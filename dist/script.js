(()=>{"use strict";(()=>{function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.image=t,this.title=n,this.number=r}var n,r;return n=e,(r=[{key:"render",value:function(){return'<div class="card" data-number="'.concat(this.number,'">\n      <div class="card__image"><img src="').concat(this.image,'"></div>\n      <span class="card__name">').concat(this.title,"</span>\n    </div>")}}])&&t(n.prototype,r),e}(),n={init:function(){fetch("./assets/json/cards.json").then((function(t){return t.json()})).then((function(t){var e=t.flat(),n=[];e.forEach((function(t){var e={word:t.word,translation:t.translation,category:t.category,clicks:0,correct:0,wrong:0,percent:0};n.push(e)})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(n)))}))},countingStatistics:function(t,e){var n=JSON.parse(localStorage.getItem("english-for-kids"));n.forEach((function(n){if(n.word===t){switch(e){case"clicks":n.clicks+=1;break;case"correct":n.correct+=1;break;case"wrong":n.wrong+=1}n.wrong+n.correct>0&&(n.percent=100*n.wrong/(n.wrong+n.correct))}})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(n)))},buildingTable:function(t){for(var e=this,n=document.querySelector(".container");n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div");r.classList.add("wrapper");var a=document.createElement("div");a.classList.add("panel-buttons");var s=document.createElement("button");s.classList.add("repeat-button"),s.innerText="Repeat difficult words";var c=document.createElement("button");c.classList.add("reset-button"),c.innerText="Reset",a.appendChild(s),a.appendChild(c);var i=document.createElement("table");i.classList.add("table"),r.appendChild(a),r.appendChild(i),n.appendChild(r),c.addEventListener("click",(function(){e.resetLocalStorage()})),s.addEventListener("click",(function(){e.repeatWords()})),i.innerHTML="<tr>\n      <th>Word</th>\n      <th>Translation</th>\n      <th>Category</th>\n      <th>Clicks</th>\n      <th>Correct</th>\n      <th>Wrong</th>\n      <th>% errors</th>\n    </tr>",t.forEach((function(t){i.innerHTML+="<tr>\n        <td>".concat(t.word,"</td>\n        <td>").concat(t.translation,"</td>\n        <td>").concat(t.category,"</td>\n        <td>").concat(t.clicks,"</td>\n        <td>").concat(t.correct,"</td>\n        <td>").concat(t.wrong,"</td>\n        <td>").concat(t.percent.toFixed(1),"</td>\n      </tr>")})),document.querySelectorAll("th").forEach((function(t){t.addEventListener("click",(function(){"↓"===t.innerText[0]?e.sortColumn(t.innerText.slice(2),!1):"↑"===t.innerText[0]?e.sortColumn(t.innerText.slice(2),!0):e.sortColumn(t.innerText,!0)}))}))},sortObject:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word";return t.sort((function(t,n){return t["".concat(e)]>n["".concat(e)]?1:t["".concat(e)]<n["".concat(e)]?-1:0})),t},sortColumn:function(t,e){var n=JSON.parse(localStorage.getItem("english-for-kids"));"% errors"===t&&(t="percent");var r,a,s=this.sortObject(n,t.toLowerCase());switch(e&&t.match(/Word|Translation|Category/)?(r="&darr;",this.buildingTable(s)):t.match(/Word|Translation|Category/)?(r="&uarr;",this.buildingTable(s.reverse())):e?(r="&darr;",this.buildingTable(s.reverse())):(r="&uarr;",this.buildingTable(s)),t){case"Word":a=document.querySelector("th:first-child");break;case"Translation":a=document.querySelector("th:nth-child(2)");break;case"Category":a=document.querySelector("th:nth-child(3)");break;case"Clicks":a=document.querySelector("th:nth-child(4)");break;case"Correct":a=document.querySelector("th:nth-child(5)");break;case"Wrong":a=document.querySelector("th:nth-child(6)");break;case"percent":a=document.querySelector("th:last-child")}a.innerHTML="".concat(r," ").concat(a.innerHTML)}};localStorage.getItem("english-for-kids")||n.init();const r=n;function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.word=n,this.translation=r,this.number=a,this.card=null,this.cardFront=null,this.cardBack=null}var e,n;return e=t,(n=[{key:"render",value:function(){var t=this;this.card=document.createElement("div"),this.card.classList.add("card-word","active-card");var e=(6*Math.random()-3).toFixed(1);this.card.setAttribute("style","transform: rotate(".concat(e,"deg);")),this.cardFront=document.createElement("div"),this.cardFront.classList.add("card-word__front"),this.cardFront.setAttribute("data-number","".concat(this.number)),this.cardFront.setAttribute("data-name","".concat(this.word));var n=document.createElement("div");n.classList.add("card-word__front-image");var a=document.createElement("img");a.src="./".concat(this.image),n.appendChild(a);var s=document.createElement("div");s.classList.add("card-word__front-name"),s.innerText="".concat(this.word);var c=document.querySelector("label > input");this.cardFront.addEventListener("click",(function(e){e.target.classList.contains("reverse-button")||c.checked||(r.countingStatistics(t.word,"clicks"),t.toVoice())}));var i=document.createElement("div");i.classList.add("reverse-button"),i.setAttribute("data-number","".concat(this.number)),i.addEventListener("click",(function(){t.reverseCard()})),this.cardFront.appendChild(n),this.cardFront.appendChild(s),this.cardFront.appendChild(i),this.cardBack=document.createElement("div"),this.cardBack.classList.add("card-word__back");var o=document.createElement("div");o.classList.add("card-word__back-image");var d=document.createElement("img");d.src="./".concat(this.image),o.appendChild(d);var l=document.createElement("div");return l.classList.add("card-word__back-name"),l.innerText="".concat(this.translation),this.cardBack.appendChild(o),this.cardBack.appendChild(l),this.card.appendChild(this.cardFront),this.card.appendChild(this.cardBack),this.card}},{key:"toVoice",value:function(){var t=new Audio("./assets/sounds/".concat(this.word,".mp3"));t.load(),t.play()}},{key:"reverseCard",value:function(){var t=this;this.cardFront.style.transform="rotateY(180deg)",this.cardBack.style.transform="rotateY(360deg)",this.card.addEventListener("mouseleave",(function(){t.cardFront.style.transform="rotateY(0deg)",t.cardBack.style.transform="rotateY(180deg)"}))}}])&&a(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"render",value:function(){return'<div class="switch-container">\n      <div class="train-mode active-mode">Train</div>\n      <label class="switch">\n        <input type="checkbox">\n        <span class="slider round"></span>\n      </label>\n      <div class="game-mode">Play</div>\n    </div>'}}],null&&c(e.prototype,null),n&&c(e,n),t}();const o={startGameButton:null,boxStars:null,currentWords:[],correctAnswer:null,wrongAnswer:null,soundWin:null,soundLose:null,repeat:null,currentWord:null,mistakes:0,wordsUsed:[],init:function(){var t=this;this.repeat=!1,this.currentWords=[],this.currentWord=null,this.wordsUsed=[],this.startGameButton=document.createElement("button"),this.startGameButton.classList.add("button-play"),this.startGameButton.innerText="Start game",this.boxStars=document.createElement("div"),this.boxStars.classList.add("box-stars"),this.correctAnswer=new Audio("./assets/sounds/correct.mp3"),this.wrongAnswer=new Audio("./assets/sounds/error.mp3"),this.soundWin=new Audio("./assets/sounds/success.mp3"),this.soundLose=new Audio("./assets/sounds/failure.mp3"),document.querySelector(".container .wrapper").appendChild(this.startGameButton),document.querySelector(".container .wrapper").appendChild(this.boxStars),this.startGameButton.addEventListener("click",(function(){t.repeat?t.currentWord.play():(t.startGameButton.classList.add("repeat"),t.repeat=!0,t.play())}))},play:function(){var t=this,e=document.querySelectorAll(".card-word__front");e.forEach((function(e){t.currentWords.push(e.getAttribute("data-name"))})),this.currentWords.sort((function(){return Math.random()-.5}));var n=0,a=function(){t.currentWord=new Audio("./assets/sounds/".concat(t.currentWords[n],".mp3")),t.currentWord.load(),t.currentWord.play()};a(),e.forEach((function(e){e.addEventListener("click",(function(){if(e.getAttribute("data-name")===t.currentWords[n]){t.wordsUsed.push(t.currentWords[n]),r.countingStatistics(t.currentWords[n],"correct"),t.correctAnswer.play(),e.style.filter="blur(5px)";var s=document.createElement("img");s.src="./assets/icons/star-win.svg",t.boxStars.appendChild(s),document.querySelector(".card-word:nth-child(".concat(+e.getAttribute("data-number")+1,")")).classList.remove("active-card"),(n+=1)<8?setTimeout(a,500):setTimeout((function(){t.finishGame()}),1e3)}else if(!t.wordsUsed.includes(e.getAttribute("data-name"))){r.countingStatistics(t.currentWords[n],"wrong"),t.mistakes+=1;var c=document.createElement("img");c.src="./assets/icons/star.svg",t.boxStars.appendChild(c),t.wrongAnswer.play()}}))}))},finishGame:function(){var t,e;l.removeContent(),0===this.mistakes?(t="Congratulations! You win!",e="./assets/icons/success.svg",this.soundWin.play()):(t="You lost(: Train and try again!</br>\n        You made ".concat(this.mistakes," mistake(s)."),e="./assets/icons/failure.svg",this.soundLose.play());var n=document.querySelector(".container"),r='<span class="win-title">'.concat(t,'</span>\n    <div class="win-image"><img src="').concat(e,'"></div>');n.innerHTML+=r;var a=document.createElement("div");a.classList.add("buttons-finish");var s=document.createElement("button");s.classList.add("new-game"),s.innerText="New game";var c=document.createElement("button");c.classList.add("main-menu"),c.innerText="Main menu",a.appendChild(s),a.appendChild(c),s.addEventListener("click",(function(){l.setContentCards(l.activeCard)})),c.addEventListener("click",(function(){l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),n.appendChild(a),this.mistakes=0}};var d={activeCard:null,title:{0:"Action (set A)",1:"Action (set B)",2:"Action (set C)",3:"Adjective",4:"Animal (set A)",5:"Animal (set B)",6:"Clothes",7:"Emotion"},images:{0:"./assets/images/categories/actionA.jpg",1:"./assets/images/categories/actionB.jpg",2:"./assets/images/categories/actionC.jpg",3:"./assets/images/categories/adjective.jpg",4:"./assets/images/categories/animalA.jpg",5:"./assets/images/categories/animalB.jpg",6:"./assets/images/categories/clothes.jpg",7:"./assets/images/categories/emotion.jpg"},setTitleCards:function(){var t=this;this.removeContent();var n=document.createElement("div");n.classList.add("wrapper"),document.querySelector(".container").appendChild(n);var r=document.createElement("div");r.classList.add("cards-title");for(var a=0;a<8;a+=1){var s=new e(this.images[a],this.title[a],a);r.innerHTML+=s.render()}r.innerHTML+='<div class="subtitle">Hello! choose a category:</div>',n.appendChild(r),document.querySelectorAll(".card").forEach((function(e){e.addEventListener("click",(function(){t.removeContent(),t.activeCard=e.getAttribute("data-number"),t.setContentCards(t.activeCard)}))}))},setContentCards:function(t){this.removeContent();var e=document.createElement("div");e.classList.add("wrapper"),e.innerHTML+=i.render(),document.querySelector(".container").appendChild(e);var n=document.createElement("div");n.classList.add("cards"),fetch("./assets/json/cards.json").then((function(t){return t.json()})).then((function(r){for(var a=r[t],c=0;c<a.length;c+=1){var i=new s(a[c].image,a[c].word,a[c].translation,c);n.appendChild(i.render())}e.appendChild(n)}));var r=document.querySelector("input[type=checkbox]");r.addEventListener("change",(function(){document.querySelector(".train-mode").classList.toggle("active-mode"),document.querySelector(".game-mode").classList.toggle("active-mode");var t=document.querySelectorAll(".card-word__front-image");r.checked?(t.forEach((function(t){t.style.height="260px"})),o.init()):(t.forEach((function(t){t.style.height="200px"})),document.querySelector(".container .wrapper").removeChild(document.querySelector(".button-play")),document.querySelector(".container .wrapper").removeChild(document.querySelector(".box-stars")))}))},removeContent:function(){for(var t=document.querySelector(".container");t.firstChild;)t.removeChild(t.firstChild)}};d.setTitleCards();const l=d;var u=document.querySelector(".modal"),m=document.querySelectorAll(".navigation-item"),h={burgerBox:null,buttonOff:!0,init:function(){var t=this;this.burgerBox=document.createElement("div"),this.burgerBox.className="burger-menu__button";var e=document.createElement("div");e.className="first-line";var n=document.createElement("div");n.className="second-line";var r=document.createElement("div");r.className="third-line",this.burgerBox.appendChild(e),this.burgerBox.appendChild(n),this.burgerBox.appendChild(r),this.burgerBox.addEventListener("click",(function(){m.forEach((function(t){t.classList.toggle("navigation-item_open")})),document.querySelector(".burger-menu").classList.toggle("burger-menu_open"),t.buttonOff?(e.style.transform="translateY(13px) rotate(45deg)",n.style.transform="translateX(-40px)",r.style.transform="translateY(-13px) rotate(-45deg)",u.classList.remove("modal-disabled"),t.buttonOff=!1):(e.style.transform="translateY(0) rotate(0)",n.style.transform="translateX(0)",r.style.transform="translateY(0) rotate(0)",u.classList.add("modal-disabled"),t.buttonOff=!0)})),document.querySelector(".header .wrapper").prepend(this.burgerBox)}};h.init(),u.addEventListener("click",(function(){h.burgerBox.click()}));const v=h;document.querySelectorAll(".navigation-item").forEach((function(t){t.addEventListener("click",(function(){if(v.burgerBox.click(),document.querySelector(".navigation-item.active").classList.remove("active"),t.classList.add("active"),"main"===t.getAttribute("data-number"))l.setTitleCards();else if("statistics"===t.getAttribute("data-number")){var e=JSON.parse(localStorage.getItem("english-for-kids")),n=r.sortObject(e);r.buildingTable(n),document.querySelector("th:nth-child(1)").innerHTML="&darr; Word"}else l.removeContent(),l.setContentCards(t.getAttribute("data-number"))}))})),document.querySelector(".title").addEventListener("click",(function(){l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),document.addEventListener("DOMContentLoaded",(function(){fetch("./assets/json/cards.json").then((function(t){return t.json()})).then((function(t){!function(t){for(var e=0;e<t.length;e+=1)(new Image).src="./".concat(t[e])}(t.flat().map((function(t){return t.image})))}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvdGl0bGUtY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL3N0YXRpc3RpY3MuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL3N3aXRjaC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL3BsYXktZ2FtZS5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2dhbWUtZmllbGQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2J1cmdlci1pY29uLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvYnVyZ2VyLW1lbnUuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJUaXRsZUNhcmQiLCJpbWFnZSIsInRpdGxlIiwibnVtYmVyIiwidGhpcyIsInN0YXRpc3RpY3MiLCJpbml0IiwiZmV0Y2giLCJ0aGVuIiwicmVzdWx0IiwianNvbiIsImFsbFdvcmRzIiwiZmxhdCIsImNvbW1vbkFycmF5IiwiZm9yRWFjaCIsIml0ZW0iLCJjdXJyZW50T2JqIiwid29yZCIsInRyYW5zbGF0aW9uIiwiY2F0ZWdvcnkiLCJjbGlja3MiLCJjb3JyZWN0Iiwid3JvbmciLCJwZXJjZW50IiwicHVzaCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiY291bnRpbmdTdGF0aXN0aWNzIiwic3RhdCIsInBhcnNlIiwiZ2V0SXRlbSIsImJ1aWxkaW5nVGFibGUiLCJkYXRhIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwic3RhdENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJidXR0b25zIiwicmVwZWF0QnV0dG9uIiwiaW5uZXJUZXh0IiwicmVzZXRCdXR0b24iLCJhcHBlbmRDaGlsZCIsInRhYmxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0TG9jYWxTdG9yYWdlIiwicmVwZWF0V29yZHMiLCJpbm5lckhUTUwiLCJyb3ciLCJ0b0ZpeGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImhlYWRpbmciLCJzb3J0Q29sdW1uIiwic2xpY2UiLCJzb3J0T2JqZWN0Iiwib2JqIiwia2V5Iiwic29ydCIsImEiLCJiIiwiZGlyZWN0T3JkZXIiLCJhcnJvdyIsImRhdGFGb3JUYWJsZSIsInRvTG93ZXJDYXNlIiwibWF0Y2giLCJyZXZlcnNlIiwiQ2FyZCIsImNhcmQiLCJjYXJkRnJvbnQiLCJjYXJkQmFjayIsInJhbmRvbVJvdGF0ZSIsIk1hdGgiLCJyYW5kb20iLCJzZXRBdHRyaWJ1dGUiLCJjYXJkRnJvbnRJbWFnZSIsImltZ0Zyb250Iiwic3JjIiwiY2FyZEZyb250TmFtZSIsImdhbWVNb2RlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImNoZWNrZWQiLCJ0b1ZvaWNlIiwiY2FyZEJ1dHRvbiIsInJldmVyc2VDYXJkIiwiY2FyZEJhY2tJbWFnZSIsImltZyIsImNhcmRCYWNrTmFtZSIsImF1ZGlvIiwiQXVkaW8iLCJsb2FkIiwicGxheSIsInN0eWxlIiwidHJhbnNmb3JtIiwiU3dpdGNoZXIiLCJzdGFydEdhbWVCdXR0b24iLCJib3hTdGFycyIsImN1cnJlbnRXb3JkcyIsImNvcnJlY3RBbnN3ZXIiLCJ3cm9uZ0Fuc3dlciIsInNvdW5kV2luIiwic291bmRMb3NlIiwicmVwZWF0IiwiY3VycmVudFdvcmQiLCJtaXN0YWtlcyIsIndvcmRzVXNlZCIsImN1cnJlbnRDYXJkcyIsImdldEF0dHJpYnV0ZSIsInBsYXlXb3JkIiwiZmlsdGVyIiwid2luU3RhcnMiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiZmluaXNoR2FtZSIsImluY2x1ZGVzIiwic3BhbiIsImdhbWVGaWVsZCIsImZpbmlzaFNjcmVlbiIsImJ1dHRvbnNGaW5pc2giLCJuZXdHYW1lQnV0dG9uIiwibWFpbk1lbnVCdXR0b24iLCJhY3RpdmVDYXJkIiwiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCJpbWFnZXMiLCJzZXRUaXRsZUNhcmRzIiwicmVtb3ZlQ29udGVudCIsImNhcmRzQ29udGFpbmVyIiwiaSIsInJlbmRlciIsInNldENvbnRlbnRDYXJkcyIsImxlbmd0aCIsImlucHV0IiwidG9nZ2xlIiwiY2FyZHMiLCJoZWlnaHQiLCJwbGF5R2FtZSIsImN1cnJlbnRDb250ZW50IiwibW9kYWxXaW5kb3ciLCJuYXZpZ2F0aW9uSXRlbXMiLCJidXJnZXJJY29uIiwiYnVyZ2VyQm94IiwiYnV0dG9uT2ZmIiwiY2xhc3NOYW1lIiwiZmlyc3RMSW5lIiwic2Vjb25kTGluZSIsInRoaXJkTGluZSIsInByZXBlbmQiLCJjbGljayIsImxpbmsiLCJhcnIiLCJJbWFnZSIsInByZWxvYWRJbWFnZXMiLCJtYXAiXSwibWFwcGluZ3MiOiJtTUFBcUJBLEUsV0FDbkIsV0FBWUMsRUFBT0MsRUFBT0MsSSw0RkFBUSxTQUNoQ0MsS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0YsTUFBUUEsRUFDYkUsS0FBS0QsT0FBU0EsRSxzREFTZCxNQUxhLGtDQUFILE9BQXFDQyxLQUFLRCxPQUExQyx3REFDNkJDLEtBQUtILE1BRGxDLG9EQUVtQkcsS0FBS0YsTUFGeEIsNEIsc0JDUFJHLEVBQWEsQ0FDakJDLEtBRGlCLFdBRWZDLE1BQU0sNEJBQ0hDLE1BQUssU0FBQ0MsR0FBRCxPQUFZQSxFQUFPQyxVQUN4QkYsTUFBSyxTQUFDQyxHQUNMLElBQU1FLEVBQVdGLEVBQU9HLE9BQ2xCQyxFQUFjLEdBQ3BCRixFQUFTRyxTQUFRLFNBQUNDLEdBQ2hCLElBQU1DLEVBQWEsQ0FD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QUF1QjBKLEdBQ3JCLElBQUssSUFBSXRCLEVBQUksRUFBR0EsRUFBSXNCLEVBQUluQixPQUFRSCxHQUFLLEdBQ3JCLElBQUl1QixPQUNabEYsSUFBTixZQUFpQmlGLEVBQUl0QixJQUd6QndCLENBUmU1SixFQUFPRyxPQUFPMEosS0FBSSxTQUFDdkosR0FBRCxPQUFVQSxFQUFLZCxpQiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaXRsZUNhcmQge1xuICBjb25zdHJ1Y3RvcihpbWFnZSwgdGl0bGUsIG51bWJlcikge1xuICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgY2FyZCA9IGA8ZGl2IGNsYXNzPVwiY2FyZFwiIGRhdGEtbnVtYmVyPVwiJHt0aGlzLm51bWJlcn1cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkX19pbWFnZVwiPjxpbWcgc3JjPVwiJHt0aGlzLmltYWdlfVwiPjwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkX19uYW1lXCI+JHt0aGlzLnRpdGxlfTwvc3Bhbj5cbiAgICA8L2Rpdj5gO1xuXG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5jb25zdCBzdGF0aXN0aWNzID0ge1xuICBpbml0KCkge1xuICAgIGZldGNoKCcuL2Fzc2V0cy9qc29uL2NhcmRzLmpzb24nKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgYWxsV29yZHMgPSByZXN1bHQuZmxhdCgpO1xuICAgICAgICBjb25zdCBjb21tb25BcnJheSA9IFtdO1xuICAgICAgICBhbGxXb3Jkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudE9iaiA9IHtcbiAgICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZCxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiBpdGVtLnRyYW5zbGF0aW9uLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksXG4gICAgICAgICAgICBjbGlja3M6IDAsXG4gICAgICAgICAgICBjb3JyZWN0OiAwLFxuICAgICAgICAgICAgd3Jvbmc6IDAsXG4gICAgICAgICAgICBwZXJjZW50OiAwLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY29tbW9uQXJyYXkucHVzaChjdXJyZW50T2JqKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJywgYCR7SlNPTi5zdHJpbmdpZnkoY29tbW9uQXJyYXkpfWApO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgY291bnRpbmdTdGF0aXN0aWNzKHdvcmQsIGNhdGVnb3J5KSB7XG4gICAgY29uc3Qgc3RhdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnKSk7XG4gICAgc3RhdC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpZiAoaXRlbS53b3JkID09PSB3b3JkKSB7XG4gICAgICAgIHN3aXRjaCAoY2F0ZWdvcnkpIHtcbiAgICAgICAgICBjYXNlICdjbGlja3MnOlxuICAgICAgICAgICAgaXRlbS5jbGlja3MgKz0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2NvcnJlY3QnOlxuICAgICAgICAgICAgaXRlbS5jb3JyZWN0ICs9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd3cm9uZyc6XG4gICAgICAgICAgICBpdGVtLndyb25nICs9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0ud3JvbmcgKyBpdGVtLmNvcnJlY3QgPiAwKSB7XG4gICAgICAgICAgaXRlbS5wZXJjZW50ID0gKGl0ZW0ud3JvbmcgKiAxMDApIC8gKGl0ZW0ud3JvbmcgKyBpdGVtLmNvcnJlY3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnLCBgJHtKU09OLnN0cmluZ2lmeShzdGF0KX1gKTtcbiAgfSxcblxuICBidWlsZGluZ1RhYmxlKGRhdGEpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzdGF0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXInKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25zLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWJ1dHRvbnMnKTtcblxuICAgIGNvbnN0IHJlcGVhdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHJlcGVhdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZXBlYXQtYnV0dG9uJyk7XG4gICAgcmVwZWF0QnV0dG9uLmlubmVyVGV4dCA9ICdSZXBlYXQgZGlmZmljdWx0IHdvcmRzJztcblxuICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgcmVzZXRCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVzZXQtYnV0dG9uJyk7XG4gICAgcmVzZXRCdXR0b24uaW5uZXJUZXh0ID0gJ1Jlc2V0JztcblxuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVwZWF0QnV0dG9uKTtcbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHJlc2V0QnV0dG9uKTtcblxuICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpO1xuXG4gICAgLy8gYWRkIGVsZW1lbnRzIHRvIHBhZ2VcbiAgICBzdGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbnMpO1xuICAgIHN0YXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0Q29udGFpbmVyKTtcblxuICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZXNldExvY2FsU3RvcmFnZSgpO1xuICAgIH0pO1xuXG4gICAgcmVwZWF0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZXBlYXRXb3JkcygpO1xuICAgIH0pO1xuXG4gICAgLy8gcmVuZGVyaW5nIHRhYmxlXG4gICAgdGFibGUuaW5uZXJIVE1MID0gYDx0cj5cbiAgICAgIDx0aD5Xb3JkPC90aD5cbiAgICAgIDx0aD5UcmFuc2xhdGlvbjwvdGg+XG4gICAgICA8dGg+Q2F0ZWdvcnk8L3RoPlxuICAgICAgPHRoPkNsaWNrczwvdGg+XG4gICAgICA8dGg+Q29ycmVjdDwvdGg+XG4gICAgICA8dGg+V3Jvbmc8L3RoPlxuICAgICAgPHRoPiUgZXJyb3JzPC90aD5cbiAgICA8L3RyPmA7XG4gICAgZGF0YS5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIHRhYmxlLmlubmVySFRNTCArPSBgPHRyPlxuICAgICAgICA8dGQ+JHtyb3cud29yZH08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cudHJhbnNsYXRpb259PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LmNhdGVnb3J5fTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy5jbGlja3N9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LmNvcnJlY3R9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93Lndyb25nfTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy5wZXJjZW50LnRvRml4ZWQoMSl9PC90ZD5cbiAgICAgIDwvdHI+YDtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRhYmxlSGVhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XG4gICAgdGFibGVIZWFkLmZvckVhY2goKGhlYWRpbmcpID0+IHtcbiAgICAgIGhlYWRpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmIChoZWFkaW5nLmlubmVyVGV4dFswXSA9PT0gJ+KGkycpIHtcbiAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oaGVhZGluZy5pbm5lclRleHQuc2xpY2UoMiksIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChoZWFkaW5nLmlubmVyVGV4dFswXSA9PT0gJ+KGkScpIHtcbiAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oaGVhZGluZy5pbm5lclRleHQuc2xpY2UoMiksIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc29ydENvbHVtbihoZWFkaW5nLmlubmVyVGV4dCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIHNvcnRPYmplY3Qob2JqLCBrZXkgPSAnd29yZCcpIHtcbiAgICBvYmouc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGFbYCR7a2V5fWBdID4gYltgJHtrZXl9YF0pIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgICBpZiAoYVtgJHtrZXl9YF0gPCBiW2Ake2tleX1gXSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9KTtcblxuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgc29ydENvbHVtbihrZXksIGRpcmVjdE9yZGVyKSB7XG4gICAgY29uc3Qgc3RhdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnKSk7XG4gICAgaWYgKGtleSA9PT0gJyUgZXJyb3JzJykge1xuICAgICAga2V5ID0gJ3BlcmNlbnQnO1xuICAgIH1cbiAgICBjb25zdCBkYXRhRm9yVGFibGUgPSB0aGlzLnNvcnRPYmplY3Qoc3RhdCwga2V5LnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgbGV0IGFycm93O1xuICAgIGlmIChkaXJlY3RPcmRlciAmJiBrZXkubWF0Y2goL1dvcmR8VHJhbnNsYXRpb258Q2F0ZWdvcnkvKSkge1xuICAgICAgYXJyb3cgPSAnJmRhcnI7JztcbiAgICAgIHRoaXMuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUpO1xuICAgIH0gZWxzZSBpZiAoa2V5Lm1hdGNoKC9Xb3JkfFRyYW5zbGF0aW9ufENhdGVnb3J5LykpIHtcbiAgICAgIGFycm93ID0gJyZ1YXJyOyc7XG4gICAgICB0aGlzLmJ1aWxkaW5nVGFibGUoZGF0YUZvclRhYmxlLnJldmVyc2UoKSk7XG4gICAgfSBlbHNlIGlmIChkaXJlY3RPcmRlcikge1xuICAgICAgYXJyb3cgPSAnJmRhcnI7JztcbiAgICAgIHRoaXMuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUucmV2ZXJzZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJyb3cgPSAnJnVhcnI7JztcbiAgICAgIHRoaXMuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUpO1xuICAgIH1cblxuICAgIGxldCB0aXRsZTtcbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnV29yZCc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6Zmlyc3QtY2hpbGQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUcmFuc2xhdGlvbic6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDIpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2F0ZWdvcnknOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCgzKScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NsaWNrcyc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDQpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ29ycmVjdCc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDUpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnV3JvbmcnOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCg2KScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BlcmNlbnQnOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOmxhc3QtY2hpbGQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGl0bGUuaW5uZXJIVE1MID0gYCR7YXJyb3d9ICR7dGl0bGUuaW5uZXJIVE1MfWA7XG4gIH0sXG59O1xuXG5pZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpIHtcbiAgc3RhdGlzdGljcy5pbml0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0YXRpc3RpY3M7XG4iLCJpbXBvcnQgc3RhdGlzdGljcyBmcm9tICcuLi9zdGF0aXN0aWNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGltYWdlLCB3b3JkLCB0cmFuc2xhdGlvbiwgbnVtYmVyKSB7XG4gICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuICAgIHRoaXMud29yZCA9IHdvcmQ7XG4gICAgdGhpcy50cmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uO1xuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICAgIHRoaXMuY2FyZCA9IG51bGw7XG4gICAgdGhpcy5jYXJkRnJvbnQgPSBudWxsO1xuICAgIHRoaXMuY2FyZEJhY2sgPSBudWxsO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmQnLCAnYWN0aXZlLWNhcmQnKTtcbiAgICBjb25zdCByYW5kb21Sb3RhdGUgPSAoTWF0aC5yYW5kb20oKSAqICgzIC0gKC0zKSkgLSAzKS50b0ZpeGVkKDEpO1xuICAgIHRoaXMuY2FyZC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYHRyYW5zZm9ybTogcm90YXRlKCR7cmFuZG9tUm90YXRlfWRlZyk7YCk7XG5cbiAgICB0aGlzLmNhcmRGcm9udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZEZyb250LmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQnKTtcbiAgICB0aGlzLmNhcmRGcm9udC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJywgYCR7dGhpcy5udW1iZXJ9YCk7XG4gICAgdGhpcy5jYXJkRnJvbnQuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCBgJHt0aGlzLndvcmR9YCk7XG5cbiAgICBjb25zdCBjYXJkRnJvbnRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRGcm9udEltYWdlLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQtaW1hZ2UnKTtcbiAgICBjb25zdCBpbWdGcm9udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltZ0Zyb250LnNyYyA9IGAuLyR7dGhpcy5pbWFnZX1gO1xuICAgIGNhcmRGcm9udEltYWdlLmFwcGVuZENoaWxkKGltZ0Zyb250KTtcblxuICAgIGNvbnN0IGNhcmRGcm9udE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkRnJvbnROYW1lLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQtbmFtZScpO1xuICAgIGNhcmRGcm9udE5hbWUuaW5uZXJUZXh0ID0gYCR7dGhpcy53b3JkfWA7XG5cbiAgICBjb25zdCBnYW1lTW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsID4gaW5wdXQnKTtcblxuICAgIHRoaXMuY2FyZEZyb250LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JldmVyc2UtYnV0dG9uJykgJiYgIWdhbWVNb2RlLmNoZWNrZWQpIHtcbiAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy53b3JkLCAnY2xpY2tzJyk7XG4gICAgICAgIHRoaXMudG9Wb2ljZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRCdXR0b24uY2xhc3NMaXN0LmFkZCgncmV2ZXJzZS1idXR0b24nKTtcbiAgICBjYXJkQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInLCBgJHt0aGlzLm51bWJlcn1gKTtcbiAgICBjYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZXZlcnNlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQuYXBwZW5kQ2hpbGQoY2FyZEZyb250SW1hZ2UpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRGcm9udE5hbWUpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRCdXR0b24pO1xuXG4gICAgdGhpcy5jYXJkQmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZEJhY2suY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkX19iYWNrJyk7XG5cbiAgICBjb25zdCBjYXJkQmFja0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEJhY2tJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2JhY2staW1hZ2UnKTtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gYC4vJHt0aGlzLmltYWdlfWA7XG4gICAgY2FyZEJhY2tJbWFnZS5hcHBlbmRDaGlsZChpbWcpO1xuXG4gICAgY29uc3QgY2FyZEJhY2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEJhY2tOYW1lLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fYmFjay1uYW1lJyk7XG4gICAgY2FyZEJhY2tOYW1lLmlubmVyVGV4dCA9IGAke3RoaXMudHJhbnNsYXRpb259YDtcblxuICAgIHRoaXMuY2FyZEJhY2suYXBwZW5kQ2hpbGQoY2FyZEJhY2tJbWFnZSk7XG4gICAgdGhpcy5jYXJkQmFjay5hcHBlbmRDaGlsZChjYXJkQmFja05hbWUpO1xuXG4gICAgdGhpcy5jYXJkLmFwcGVuZENoaWxkKHRoaXMuY2FyZEZyb250KTtcbiAgICB0aGlzLmNhcmQuYXBwZW5kQ2hpbGQodGhpcy5jYXJkQmFjayk7XG5cbiAgICByZXR1cm4gdGhpcy5jYXJkO1xuICB9XG5cbiAgdG9Wb2ljZSgpIHtcbiAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhgLi9hc3NldHMvc291bmRzLyR7dGhpcy53b3JkfS5tcDNgKTtcbiAgICBhdWRpby5sb2FkKCk7XG4gICAgYXVkaW8ucGxheSgpO1xuICB9XG5cbiAgcmV2ZXJzZUNhcmQoKSB7XG4gICAgdGhpcy5jYXJkRnJvbnQuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMTgwZGVnKSc7XG4gICAgdGhpcy5jYXJkQmFjay5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlWSgzNjBkZWcpJztcbiAgICB0aGlzLmNhcmQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgIHRoaXMuY2FyZEZyb250LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDBkZWcpJztcbiAgICAgIHRoaXMuY2FyZEJhY2suc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMTgwZGVnKSc7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXRjaGVyIHtcbiAgc3RhdGljIHJlbmRlcigpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gYDxkaXYgY2xhc3M9XCJzd2l0Y2gtY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidHJhaW4tbW9kZSBhY3RpdmUtbW9kZVwiPlRyYWluPC9kaXY+XG4gICAgICA8bGFiZWwgY2xhc3M9XCJzd2l0Y2hcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNsaWRlciByb3VuZFwiPjwvc3Bhbj5cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8ZGl2IGNsYXNzPVwiZ2FtZS1tb2RlXCI+UGxheTwvZGl2PlxuICAgIDwvZGl2PmA7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgc3RhdGlzdGljcyBmcm9tICcuL3N0YXRpc3RpY3MnO1xuaW1wb3J0IGdhbWVGaWVsZCBmcm9tICcuL2dhbWUtZmllbGQnO1xuXG5jb25zdCBwbGF5R2FtZSA9IHtcbiAgc3RhcnRHYW1lQnV0dG9uOiBudWxsLFxuICBib3hTdGFyczogbnVsbCxcbiAgY3VycmVudFdvcmRzOiBbXSxcbiAgY29ycmVjdEFuc3dlcjogbnVsbCxcbiAgd3JvbmdBbnN3ZXI6IG51bGwsXG4gIHNvdW5kV2luOiBudWxsLFxuICBzb3VuZExvc2U6IG51bGwsXG4gIHJlcGVhdDogbnVsbCxcbiAgY3VycmVudFdvcmQ6IG51bGwsXG4gIG1pc3Rha2VzOiAwLFxuICB3b3Jkc1VzZWQ6IFtdLFxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5yZXBlYXQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnRXb3JkcyA9IFtdO1xuICAgIHRoaXMuY3VycmVudFdvcmQgPSBudWxsO1xuICAgIHRoaXMud29yZHNVc2VkID0gW107XG5cbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1wbGF5Jyk7XG4gICAgdGhpcy5zdGFydEdhbWVCdXR0b24uaW5uZXJUZXh0ID0gJ1N0YXJ0IGdhbWUnO1xuXG4gICAgdGhpcy5ib3hTdGFycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuYm94U3RhcnMuY2xhc3NMaXN0LmFkZCgnYm94LXN0YXJzJyk7XG5cbiAgICB0aGlzLmNvcnJlY3RBbnN3ZXIgPSBuZXcgQXVkaW8oJy4vYXNzZXRzL3NvdW5kcy9jb3JyZWN0Lm1wMycpO1xuICAgIHRoaXMud3JvbmdBbnN3ZXIgPSBuZXcgQXVkaW8oJy4vYXNzZXRzL3NvdW5kcy9lcnJvci5tcDMnKTtcbiAgICB0aGlzLnNvdW5kV2luID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvc3VjY2Vzcy5tcDMnKTtcbiAgICB0aGlzLnNvdW5kTG9zZSA9IG5ldyBBdWRpbygnLi9hc3NldHMvc291bmRzL2ZhaWx1cmUubXAzJyk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykuYXBwZW5kQ2hpbGQodGhpcy5zdGFydEdhbWVCdXR0b24pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIgLndyYXBwZXInKS5hcHBlbmRDaGlsZCh0aGlzLmJveFN0YXJzKTtcblxuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMucmVwZWF0KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFdvcmQucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGFydEdhbWVCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVwZWF0Jyk7XG4gICAgICAgIHRoaXMucmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcGxheSgpIHtcbiAgICBjb25zdCBjdXJyZW50Q2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC13b3JkX19mcm9udCcpO1xuICAgIGN1cnJlbnRDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRXb3Jkcy5wdXNoKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKSk7XG4gICAgfSk7XG4gICAgdGhpcy5jdXJyZW50V29yZHMuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcblxuICAgIGxldCBjdXJyZW50V29yZCA9IDA7XG5cbiAgICBjb25zdCBwbGF5V29yZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFdvcmQgPSBuZXcgQXVkaW8oYC4vYXNzZXRzL3NvdW5kcy8ke3RoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXX0ubXAzYCk7XG4gICAgICB0aGlzLmN1cnJlbnRXb3JkLmxvYWQoKTtcbiAgICAgIHRoaXMuY3VycmVudFdvcmQucGxheSgpO1xuICAgIH07XG5cbiAgICBwbGF5V29yZCgpO1xuXG4gICAgY3VycmVudENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmIChjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykgPT09IHRoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXSkge1xuICAgICAgICAgIHRoaXMud29yZHNVc2VkLnB1c2godGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdKTtcbiAgICAgICAgICBzdGF0aXN0aWNzLmNvdW50aW5nU3RhdGlzdGljcyh0aGlzLmN1cnJlbnRXb3Jkc1tjdXJyZW50V29yZF0sICdjb3JyZWN0Jyk7XG4gICAgICAgICAgdGhpcy5jb3JyZWN0QW5zd2VyLnBsYXkoKTtcbiAgICAgICAgICBjYXJkLnN0eWxlLmZpbHRlciA9ICdibHVyKDVweCknO1xuXG4gICAgICAgICAgY29uc3Qgd2luU3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICB3aW5TdGFycy5zcmMgPSAnLi9hc3NldHMvaWNvbnMvc3Rhci13aW4uc3ZnJztcbiAgICAgICAgICB0aGlzLmJveFN0YXJzLmFwcGVuZENoaWxkKHdpblN0YXJzKTtcblxuICAgICAgICAgIGNvbnN0IGFjdGl2ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY2FyZC13b3JkOm50aC1jaGlsZCgkeytjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSArIDF9KWApO1xuICAgICAgICAgIGFjdGl2ZUNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWNhcmQnKTtcblxuICAgICAgICAgIGN1cnJlbnRXb3JkICs9IDE7XG4gICAgICAgICAgaWYgKGN1cnJlbnRXb3JkIDwgOCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChwbGF5V29yZCwgNTAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZmluaXNoR2FtZSgpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLndvcmRzVXNlZC5pbmNsdWRlcyhjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykpKSB7XG4gICAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdLCAnd3JvbmcnKTtcbiAgICAgICAgICB0aGlzLm1pc3Rha2VzICs9IDE7XG4gICAgICAgICAgY29uc3Qgd2luU3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICB3aW5TdGFycy5zcmMgPSAnLi9hc3NldHMvaWNvbnMvc3Rhci5zdmcnO1xuICAgICAgICAgIHRoaXMuYm94U3RhcnMuYXBwZW5kQ2hpbGQod2luU3RhcnMpO1xuXG4gICAgICAgICAgdGhpcy53cm9uZ0Fuc3dlci5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIGZpbmlzaEdhbWUoKSB7XG4gICAgZ2FtZUZpZWxkLnJlbW92ZUNvbnRlbnQoKTtcblxuICAgIGxldCBzcGFuO1xuICAgIGxldCBzcmM7XG4gICAgaWYgKHRoaXMubWlzdGFrZXMgPT09IDApIHtcbiAgICAgIHNwYW4gPSAnQ29uZ3JhdHVsYXRpb25zISBZb3Ugd2luISc7XG4gICAgICBzcmMgPSAnLi9hc3NldHMvaWNvbnMvc3VjY2Vzcy5zdmcnO1xuICAgICAgdGhpcy5zb3VuZFdpbi5wbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYW4gPSBgWW91IGxvc3QoOiBUcmFpbiBhbmQgdHJ5IGFnYWluITwvYnI+XG4gICAgICAgIFlvdSBtYWRlICR7dGhpcy5taXN0YWtlc30gbWlzdGFrZShzKS5gO1xuICAgICAgc3JjID0gJy4vYXNzZXRzL2ljb25zL2ZhaWx1cmUuc3ZnJztcbiAgICAgIHRoaXMuc291bmRMb3NlLnBsYXkoKTtcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGZpbmlzaFNjcmVlbiA9IGA8c3BhbiBjbGFzcz1cIndpbi10aXRsZVwiPiR7c3Bhbn08L3NwYW4+XG4gICAgPGRpdiBjbGFzcz1cIndpbi1pbWFnZVwiPjxpbWcgc3JjPVwiJHtzcmN9XCI+PC9kaXY+YDtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGZpbmlzaFNjcmVlbjtcblxuICAgIGNvbnN0IGJ1dHRvbnNGaW5pc2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25zRmluaXNoLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMtZmluaXNoJyk7XG4gICAgY29uc3QgbmV3R2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld0dhbWVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbmV3LWdhbWUnKTtcbiAgICBuZXdHYW1lQnV0dG9uLmlubmVyVGV4dCA9ICdOZXcgZ2FtZSc7XG4gICAgY29uc3QgbWFpbk1lbnVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBtYWluTWVudUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdtYWluLW1lbnUnKTtcbiAgICBtYWluTWVudUJ1dHRvbi5pbm5lclRleHQgPSAnTWFpbiBtZW51JztcbiAgICBidXR0b25zRmluaXNoLmFwcGVuZENoaWxkKG5ld0dhbWVCdXR0b24pO1xuICAgIGJ1dHRvbnNGaW5pc2guYXBwZW5kQ2hpbGQobWFpbk1lbnVCdXR0b24pO1xuXG4gICAgbmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGdhbWVGaWVsZC5zZXRDb250ZW50Q2FyZHMoZ2FtZUZpZWxkLmFjdGl2ZUNhcmQpO1xuICAgIH0pO1xuXG4gICAgbWFpbk1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbTpmaXJzdC1jaGlsZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbnNGaW5pc2gpO1xuICAgIHRoaXMubWlzdGFrZXMgPSAwO1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgcGxheUdhbWU7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IFRpdGxlQ2FyZCBmcm9tICcuL2NvbXBvbmVudHMvdGl0bGUtY2FyZCc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuL2NvbXBvbmVudHMvY2FyZCc7XG5pbXBvcnQgU3dpdGNoZXIgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaCc7XG5pbXBvcnQgcGxheUdhbWUgZnJvbSAnLi9wbGF5LWdhbWUnO1xuXG5jb25zdCBnYW1lRmllbGQgPSB7XG4gIGFjdGl2ZUNhcmQ6IG51bGwsXG4gIHRpdGxlOiB7XG4gICAgMDogJ0FjdGlvbiAoc2V0IEEpJyxcbiAgICAxOiAnQWN0aW9uIChzZXQgQiknLFxuICAgIDI6ICdBY3Rpb24gKHNldCBDKScsXG4gICAgMzogJ0FkamVjdGl2ZScsXG4gICAgNDogJ0FuaW1hbCAoc2V0IEEpJyxcbiAgICA1OiAnQW5pbWFsIChzZXQgQiknLFxuICAgIDY6ICdDbG90aGVzJyxcbiAgICA3OiAnRW1vdGlvbicsXG4gIH0sXG5cbiAgaW1hZ2VzOiB7XG4gICAgMDogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FjdGlvbkEuanBnJyxcbiAgICAxOiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYWN0aW9uQi5qcGcnLFxuICAgIDI6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hY3Rpb25DLmpwZycsXG4gICAgMzogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FkamVjdGl2ZS5qcGcnLFxuICAgIDQ6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hbmltYWxBLmpwZycsXG4gICAgNTogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FuaW1hbEIuanBnJyxcbiAgICA2OiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvY2xvdGhlcy5qcGcnLFxuICAgIDc6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9lbW90aW9uLmpwZycsXG4gIH0sXG5cbiAgc2V0VGl0bGVDYXJkcygpIHtcbiAgICB0aGlzLnJlbW92ZUNvbnRlbnQoKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd3JhcHBlcicpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYXJkcy10aXRsZScpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgVGl0bGVDYXJkKHRoaXMuaW1hZ2VzW2ldLCB0aGlzLnRpdGxlW2ldLCBpKTtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmlubmVySFRNTCArPSBjYXJkLnJlbmRlcigpO1xuICAgIH1cbiAgICBjYXJkc0NvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxkaXYgY2xhc3M9XCJzdWJ0aXRsZVwiPkhlbGxvISBjaG9vc2UgYSBjYXRlZ29yeTo8L2Rpdj4nO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkc0NvbnRhaW5lcik7XG5cbiAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDb250ZW50KCk7XG4gICAgICAgIHRoaXMuYWN0aXZlQ2FyZCA9IGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpO1xuICAgICAgICB0aGlzLnNldENvbnRlbnRDYXJkcyh0aGlzLmFjdGl2ZUNhcmQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29udGVudENhcmRzKGFjdGl2ZUNhcmQpIHtcbiAgICB0aGlzLnJlbW92ZUNvbnRlbnQoKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd3JhcHBlcicpO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gU3dpdGNoZXIucmVuZGVyKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NhcmRzJyk7XG5cbiAgICBmZXRjaCgnLi9hc3NldHMvanNvbi9jYXJkcy5qc29uJylcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5qc29uKCkpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHRbYWN0aXZlQ2FyZF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhW2ldLmltYWdlLCBkYXRhW2ldLndvcmQsIGRhdGFbaV0udHJhbnNsYXRpb24sIGkpO1xuICAgICAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQucmVuZGVyKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkc0NvbnRhaW5lcik7XG4gICAgICB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJhaW4tbW9kZScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1tb2RlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1tb2RlJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLW1vZGUnKTtcbiAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtd29yZF9fZnJvbnQtaW1hZ2UnKTtcbiAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9ICcyNjBweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBwbGF5R2FtZS5pbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1wbGF5JykpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJveC1zdGFycycpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZW1vdmVDb250ZW50KCkge1xuICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIHdoaWxlIChjdXJyZW50Q29udGVudC5maXJzdENoaWxkKSB7XG4gICAgICBjdXJyZW50Q29udGVudC5yZW1vdmVDaGlsZChjdXJyZW50Q29udGVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH0sXG59O1xuXG5nYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lRmllbGQ7XG4iLCJjb25zdCBtb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xuY29uc3QgbmF2aWdhdGlvbkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24taXRlbScpO1xuXG5jb25zdCBidXJnZXJJY29uID0ge1xuICBidXJnZXJCb3g6IG51bGwsXG4gIGJ1dHRvbk9mZjogdHJ1ZSxcblxuICBpbml0KCkge1xuICAgIHRoaXMuYnVyZ2VyQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5idXJnZXJCb3guY2xhc3NOYW1lID0gJ2J1cmdlci1tZW51X19idXR0b24nO1xuXG4gICAgY29uc3QgZmlyc3RMSW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZmlyc3RMSW5lLmNsYXNzTmFtZSA9ICdmaXJzdC1saW5lJztcbiAgICBjb25zdCBzZWNvbmRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc2Vjb25kTGluZS5jbGFzc05hbWUgPSAnc2Vjb25kLWxpbmUnO1xuICAgIGNvbnN0IHRoaXJkTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXJkTGluZS5jbGFzc05hbWUgPSAndGhpcmQtbGluZSc7XG5cbiAgICB0aGlzLmJ1cmdlckJveC5hcHBlbmRDaGlsZChmaXJzdExJbmUpO1xuICAgIHRoaXMuYnVyZ2VyQm94LmFwcGVuZENoaWxkKHNlY29uZExpbmUpO1xuICAgIHRoaXMuYnVyZ2VyQm94LmFwcGVuZENoaWxkKHRoaXJkTGluZSk7XG5cbiAgICB0aGlzLmJ1cmdlckJveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG5hdmlnYXRpb25JdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnbmF2aWdhdGlvbi1pdGVtX29wZW4nKTtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1tZW51JykuY2xhc3NMaXN0LnRvZ2dsZSgnYnVyZ2VyLW1lbnVfb3BlbicpO1xuICAgICAgaWYgKHRoaXMuYnV0dG9uT2ZmKSB7XG4gICAgICAgIGZpcnN0TEluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgxM3B4KSByb3RhdGUoNDVkZWcpJztcbiAgICAgICAgc2Vjb25kTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtNDBweCknO1xuICAgICAgICB0aGlyZExpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTEzcHgpIHJvdGF0ZSgtNDVkZWcpJztcblxuICAgICAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1kaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLmJ1dHRvbk9mZiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlyc3RMSW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApIHJvdGF0ZSgwKSc7XG4gICAgICAgIHNlY29uZExpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoMCknO1xuICAgICAgICB0aGlyZExpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCkgcm90YXRlKDApJztcblxuICAgICAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdtb2RhbC1kaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLmJ1dHRvbk9mZiA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIC53cmFwcGVyJykucHJlcGVuZCh0aGlzLmJ1cmdlckJveCk7XG4gIH0sXG59O1xuXG5idXJnZXJJY29uLmluaXQoKTtcblxubW9kYWxXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGJ1cmdlckljb24uYnVyZ2VyQm94LmNsaWNrKCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYnVyZ2VySWNvbjtcbiIsImltcG9ydCBnYW1lRmllbGQgZnJvbSAnLi9nYW1lLWZpZWxkJztcbmltcG9ydCBidXJnZXJJY29uIGZyb20gJy4vY29tcG9uZW50cy9idXJnZXItaWNvbic7XG5pbXBvcnQgc3RhdGlzdGljcyBmcm9tICcuL3N0YXRpc3RpY3MnO1xuXG5jb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLWl0ZW0nKTtcbmxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcbiAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBidXJnZXJJY29uLmJ1cmdlckJveC5jbGljaygpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW0uYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgbGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgIGlmIChsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSA9PT0gJ21haW4nKSB7XG4gICAgICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuICAgIH0gZWxzZSBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykgPT09ICdzdGF0aXN0aWNzJykge1xuICAgICAgY29uc3Qgc3RhdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnKSk7XG4gICAgICBjb25zdCBkYXRhRm9yVGFibGUgPSBzdGF0aXN0aWNzLnNvcnRPYmplY3Qoc3RhdCk7XG4gICAgICBzdGF0aXN0aWNzLmJ1aWxkaW5nVGFibGUoZGF0YUZvclRhYmxlKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCgxKScpLmlubmVySFRNTCA9ICcmZGFycjsgV29yZCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdhbWVGaWVsZC5yZW1vdmVDb250ZW50KCk7XG4gICAgICBnYW1lRmllbGQuc2V0Q29udGVudENhcmRzKGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XG50aXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZ2FtZUZpZWxkLnNldFRpdGxlQ2FyZHMoKTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtOmZpcnN0LWNoaWxkJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG59KTtcbiIsImltcG9ydCAnLi9nYW1lLWZpZWxkJztcbmltcG9ydCAnLi9zdGF0aXN0aWNzJztcbmltcG9ydCAnLi9jb21wb25lbnRzL3N3aXRjaCc7XG5pbXBvcnQgJy4vY29tcG9uZW50cy9idXJnZXItaWNvbic7XG5pbXBvcnQgJy4vYnVyZ2VyLW1lbnUnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBmZXRjaCgnLi9hc3NldHMvanNvbi9jYXJkcy5qc29uJylcbiAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGNvbnN0IGltYWdlcyA9IHJlc3VsdC5mbGF0KCkubWFwKChpdGVtKSA9PiBpdGVtLmltYWdlKTtcblxuICAgICAgZnVuY3Rpb24gcHJlbG9hZEltYWdlcyhhcnIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgIGltYWdlLnNyYyA9IGAuLyR7YXJyW2ldfWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByZWxvYWRJbWFnZXMoaW1hZ2VzKTtcbiAgICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==