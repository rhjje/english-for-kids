(()=>{"use strict";(()=>{function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.image=t,this.title=n,this.number=r}var n,r;return n=e,(r=[{key:"render",value:function(){var t=document.createElement("div");t.classList.add("card"),t.setAttribute("data-number","".concat(this.number));var e=document.createElement("div");e.classList.add("card__image");var n=document.createElement("img");n.src="".concat(this.image),e.appendChild(n);var r=document.createElement("span");return r.classList.add("card__name"),r.innerText="".concat(this.title),t.appendChild(e),t.appendChild(r),t}}])&&t(n.prototype,r),e}(),n={init:function(){fetch("./assets/json/cards.json").then((function(t){return t.json()})).then((function(t){var e=t.flat(),n=[];e.forEach((function(t){var e={word:t.word,translation:t.translation,category:t.category,clicks:0,correct:0,wrong:0,percent:0};n.push(e)})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(n)))}))},countingStatistics:function(t,e){var n=JSON.parse(localStorage.getItem("english-for-kids"));n.forEach((function(n){if(n.word===t){switch(e){case"clicks":n.clicks+=1;break;case"correct":n.correct+=1;break;case"wrong":n.wrong+=1}n.wrong+n.correct>0&&(n.percent=100*n.wrong/(n.wrong+n.correct))}})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(n)))},buildingTable:function(t){for(var e=this,n=document.querySelector(".container .wrapper");n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div");r.classList.add("stat-container");var a=document.createElement("div");a.classList.add("panel-buttons");var s=document.createElement("div");s.classList.add("repeat-button");var i=document.createElement("span");i.innerText="Repeat difficult words",s.appendChild(i);var c=document.createElement("div");c.classList.add("reset-button");var o=document.createElement("span");o.innerText="Reset",c.appendChild(o),a.appendChild(s),a.appendChild(c);var d=document.createElement("table");d.classList.add("table"),r.appendChild(a),r.appendChild(d),n.appendChild(r),c.addEventListener("click",(function(){e.resetLocalStorage()})),s.addEventListener("click",(function(){e.repeatWords()})),d.innerHTML="<tr>\n      <th>Word</th>\n      <th>Translation</th>\n      <th>Category</th>\n      <th>Clicks</th>\n      <th>Correct</th>\n      <th>Wrong</th>\n      <th>% errors</th>\n    </tr>",t.forEach((function(t){d.innerHTML+="<tr>\n        <td>".concat(t.word,"</td>\n        <td>").concat(t.translation,"</td>\n        <td>").concat(t.category,"</td>\n        <td>").concat(t.clicks,"</td>\n        <td>").concat(t.correct,"</td>\n        <td>").concat(t.wrong,"</td>\n        <td>").concat(t.percent.toFixed(1),"</td>\n      </tr>")})),document.querySelectorAll("th").forEach((function(t){t.addEventListener("click",(function(){"↓"===t.innerText[0]?e.sortColumn(t.innerText.slice(2),!1):"↑"===t.innerText[0]?e.sortColumn(t.innerText.slice(2),!0):e.sortColumn(t.innerText,!0)}))}))},sortObject:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word";return t.sort((function(t,n){return t["".concat(e)]>n["".concat(e)]?1:t["".concat(e)]<n["".concat(e)]?-1:0})),t},sortColumn:function(t,e){var n=JSON.parse(localStorage.getItem("english-for-kids"));"% errors"===t&&(t="percent");var r,a,s=this.sortObject(n,t.toLowerCase());switch(e&&t.match(/Word|Translation|Category/)?(r="&darr;",this.buildingTable(s)):t.match(/Word|Translation|Category/)?(r="&uarr;",this.buildingTable(s.reverse())):e?(r="&darr;",this.buildingTable(s.reverse())):(r="&uarr;",this.buildingTable(s)),t){case"Word":a=document.querySelector("th:first-child");break;case"Translation":a=document.querySelector("th:nth-child(2)");break;case"Category":a=document.querySelector("th:nth-child(3)");break;case"Clicks":a=document.querySelector("th:nth-child(4)");break;case"Correct":a=document.querySelector("th:nth-child(5)");break;case"Wrong":a=document.querySelector("th:nth-child(6)");break;case"percent":a=document.querySelector("th:last-child")}a.innerHTML="".concat(r," ").concat(a.innerHTML)}};localStorage.getItem("english-for-kids")||n.init();const r=n;function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.word=n,this.translation=r,this.number=a,this.card=null,this.cardFront=null,this.cardBack=null}var e,n;return e=t,(n=[{key:"render",value:function(){var t=this;this.card=document.createElement("div"),this.card.classList.add("card-word"),this.cardFront=document.createElement("div"),this.cardFront.classList.add("card-word__front"),this.cardFront.setAttribute("data-number","".concat(this.number)),this.cardFront.setAttribute("data-name","".concat(this.word));var e=document.createElement("div");e.classList.add("card-word__front-image");var n=document.createElement("img");n.src="./".concat(this.image),e.appendChild(n);var a=document.createElement("span");a.classList.add("card-word__front-name"),a.innerText="".concat(this.word);var s=document.querySelector("label > input");this.cardFront.addEventListener("click",(function(e){e.target.classList.contains("reverse-button")||s.classList.contains("checked")||(r.countingStatistics(t.word,"clicks"),t.toVoice())}));var i=document.createElement("div");i.classList.add("reverse-button"),i.setAttribute("data-number","".concat(this.number)),i.addEventListener("click",(function(){t.reverseCard()})),this.cardFront.appendChild(e),this.cardFront.appendChild(a),this.cardFront.appendChild(i),this.cardBack=document.createElement("div"),this.cardBack.classList.add("card-word__back");var c=document.createElement("div");c.classList.add("card-word__back-image");var o=document.createElement("img");o.src="./".concat(this.image),c.appendChild(o);var d=document.createElement("span");return d.classList.add("card-word__back-name"),d.innerText="".concat(this.translation),this.cardBack.appendChild(c),this.cardBack.appendChild(d),this.card.appendChild(this.cardFront),this.card.appendChild(this.cardBack),this.card}},{key:"toVoice",value:function(){var t=new Audio("./assets/sounds/".concat(this.word,".mp3"));t.load(),t.play()}},{key:"reverseCard",value:function(){var t=this;this.cardFront.style.transform="rotateY(180deg)",this.cardBack.style.transform="rotateY(360deg)",this.card.addEventListener("mouseleave",(function(){t.cardFront.style.transform="rotateY(0deg)",t.cardBack.style.transform="rotateY(180deg)"}))}}])&&a(e.prototype,n),t}();const i={startGameButton:null,boxStars:null,currentWords:[],correctAnswer:null,wrongAnswer:null,soundWin:null,soundLose:null,repeat:!1,currentWord:null,mistakes:0,wordsUsed:[],init:function(){var t=this;this.startGameButton=document.createElement("div"),this.startGameButton.classList.add("button-play");var e=document.createElement("span");e.innerText="Start game",this.startGameButton.appendChild(e),this.boxStars=document.createElement("div"),this.boxStars.classList.add("box-stars"),this.correctAnswer=new Audio("./assets/sounds/correct.mp3"),this.wrongAnswer=new Audio("./assets/sounds/error.mp3"),this.soundWin=new Audio("./assets/sounds/success.mp3"),this.soundLose=new Audio("./assets/sounds/failure.mp3"),document.querySelector(".container").appendChild(this.startGameButton),document.querySelector(".container").appendChild(this.boxStars),this.startGameButton.addEventListener("click",(function(){t.repeat?t.currentWord.play():(t.startGameButton.classList.add("repeat"),document.querySelector(".button-play > span").innerText="",t.repeat=!0,t.play())}))},play:function(){var t=this,e=document.querySelectorAll(".card-word__front");e.forEach((function(e){t.currentWords.push(e.getAttribute("data-name"))})),this.currentWords.sort((function(){return Math.random()-.5}));var n=0,a=function(){t.currentWord=new Audio("./assets/sounds/".concat(t.currentWords[n],".mp3")),t.currentWord.load(),t.currentWord.play()};a(),e.forEach((function(e){e.addEventListener("click",(function(){if(e.getAttribute("data-name")===t.currentWords[n]){t.wordsUsed.push(t.currentWords[n]),r.countingStatistics(t.currentWords[n],"correct"),t.correctAnswer.play(),e.style.filter="blur(5px)";var s=document.createElement("img");s.src="./assets/icons/star-win.svg",t.boxStars.appendChild(s),(n+=1)<8?setTimeout(a,500):setTimeout((function(){t.finishGame()}),1e3)}else if(!t.wordsUsed.includes(e.getAttribute("data-name"))){r.countingStatistics(t.currentWords[n],"wrong"),t.mistakes+=1;var i=document.createElement("img");i.src="./assets/icons/star.svg",t.boxStars.appendChild(i),t.wrongAnswer.play()}}))}))},finishGame:function(){var t,e;d.removeContent(),this.deleteGameElements(),0===this.mistakes?(t="Congratulations! You win!",e="./assets/icons/success.svg",this.soundWin.play()):(t="You lost(: Train and try again!</br>\n        You made ".concat(this.mistakes," mistake(s)."),e="./assets/icons/failure.svg",this.soundLose.play());var n='<span class="win-title">'.concat(t,'</span>\n    <div class="win-image"><img src="').concat(e,'"></div>');d.container.innerHTML+=n;var r=document.createElement("div");r.classList.add("buttons-finish");var a=document.createElement("button");a.classList.add("new-game"),a.innerText="New game";var s=document.createElement("button");s.classList.add("main-menu"),s.innerText="Main menu",r.appendChild(a),r.appendChild(s),a.addEventListener("click",(function(){d.removeContent(),d.setContentCards(d.activeCard)})),s.addEventListener("click",(function(){d.removeContent(),d.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),d.container.appendChild(r),this.mistakes=0},deleteGameElements:function(){var t=document.querySelector(".switch-container");t&&t.parentNode.removeChild(t),this.startGameButton&&this.startGameButton.parentNode.removeChild(this.startGameButton),this.boxStars&&this.boxStars.parentNode.removeChild(this.boxStars),this.repeat=!1,this.currentWords=[],this.currentWord=null}},c={switchBox:null,init:function(){this.switchBox=document.createElement("div"),this.switchBox.classList.add("switch-container");var t=document.createElement("div");t.classList.add("train-mode","active-mode"),t.innerText="Train";var e=document.createElement("div");e.classList.add("game-mode"),e.innerText="Play";var n=document.createElement("label");n.classList.add("switch");var r=document.createElement("input");r.setAttribute("type","checkbox"),r.addEventListener("change",(function(){r.classList.toggle("checked");var n=document.querySelectorAll(".card-word");r.classList.contains("checked")?(n.forEach((function(t){t.style.height="200px"})),i.init()):(n.forEach((function(t){t.style.height="280px"})),document.querySelector(".container").removeChild(document.querySelector(".button-play")),document.querySelector(".container").removeChild(document.querySelector(".box-stars"))),t.classList.toggle("active-mode"),e.classList.toggle("active-mode")}));var a=document.createElement("span");a.classList.add("slider","round"),n.appendChild(r),n.appendChild(a),this.switchBox.appendChild(t),this.switchBox.appendChild(n),this.switchBox.appendChild(e),document.querySelector(".container").prepend(this.switchBox)},removeSwitcher:function(){var t=document.querySelector(".switch-container");t&&t.parentNode.removeChild(t)}};var o={container:null,activeCard:null,title:{0:"Action (set A)",1:"Action (set B)",2:"Action (set C)",3:"Adjective",4:"Animal (set A)",5:"Animal (set B)",6:"Clothes",7:"Emotion"},images:{0:"./assets/images/categories/actionA.jpg",1:"./assets/images/categories/actionB.jpg",2:"./assets/images/categories/actionC.jpg",3:"./assets/images/categories/adjective.jpg",4:"./assets/images/categories/animalA.jpg",5:"./assets/images/categories/animalB.jpg",6:"./assets/images/categories/clothes.jpg",7:"./assets/images/categories/emotion.jpg"},init:function(){this.container=document.createElement("div"),this.container.classList.add("wrapper"),document.querySelector(".container").appendChild(this.container),this.setTitleCards()},setTitleCards:function(){for(var t=this,n=0;n<8;n+=1){var r=new e(this.images[n],this.title[n],n);this.container.appendChild(r.render())}document.querySelectorAll(".card").forEach((function(e){e.addEventListener("click",(function(){t.removeContent(),t.activeCard=e.getAttribute("data-number"),t.setContentCards(t.activeCard)}))}))},setContentCards:function(t){var e=this;c.init(),fetch("./assets/json/cards.json").then((function(t){return t.json()})).then((function(n){for(var r=n[t],a=0;a<r.length;a+=1){var i=new s(r[a].image,r[a].word,r[a].translation,a);e.container.appendChild(i.render())}}))},removeContent:function(){for(var t=document.querySelector(".container .wrapper");t.firstChild;)t.removeChild(t.firstChild)}};o.init();const d=o;var l={burgerBox:null,buttonOff:!0,init:function(){var t=this;this.burgerBox=document.createElement("div"),this.burgerBox.className="burger-menu__button";var e=document.createElement("div");e.className="first-line";var n=document.createElement("div");n.className="second-line";var r=document.createElement("div");r.className="third-line",this.burgerBox.appendChild(e),this.burgerBox.appendChild(n),this.burgerBox.appendChild(r),this.burgerBox.addEventListener("click",(function(){t.buttonOff?(e.style.transform="translateY(13px) rotate(45deg)",n.style.transform="translateX(-40px)",r.style.transform="translateY(-13px) rotate(-45deg)",document.querySelector(".burger-menu").style.transform="translateX(0)",document.querySelector(".modal").classList.remove("modal-disabled"),t.buttonOff=!1):(e.style.transform="translateY(0) rotate(0)",n.style.transform="translateX(0)",r.style.transform="translateY(0) rotate(0)",document.querySelector(".burger-menu").style.transform="translateX(-320px)",document.querySelector(".modal").classList.add("modal-disabled"),t.buttonOff=!0)})),document.querySelector(".header .wrapper").prepend(this.burgerBox)}};l.init();const u=l;document.querySelectorAll(".navigation-item").forEach((function(t){t.addEventListener("click",(function(){if(d.removeContent(),u.burgerBox.click(),document.querySelector(".navigation-item.active").classList.remove("active"),t.classList.add("active"),"main"===t.getAttribute("data-number"))c.removeSwitcher(),d.setTitleCards();else if("statistics"===t.getAttribute("data-number")){c.removeSwitcher();var e=JSON.parse(localStorage.getItem("english-for-kids")),n=r.sortObject(e);r.buildingTable(n),document.querySelector("th:nth-child(1)").innerHTML="&darr; Word"}else d.setContentCards(t.getAttribute("data-number"))}))})),document.querySelector(".title").addEventListener("click",(function(){d.removeContent(),i.deleteGameElements(),d.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvdGl0bGUtY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL3N0YXRpc3RpY3MuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9wbGF5LWdhbWUuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL3N3aXRjaC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2dhbWUtZmllbGQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2J1cmdlci1pY29uLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvYnVyZ2VyLW1lbnUuanMiXSwibmFtZXMiOlsiVGl0bGVDYXJkIiwiaW1hZ2UiLCJ0aXRsZSIsIm51bWJlciIsInRoaXMiLCJjYXJkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiY2FyZEltYWdlIiwiaW1nIiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJjYXJkTmFtZSIsImlubmVyVGV4dCIsInN0YXRpc3RpY3MiLCJpbml0IiwiZmV0Y2giLCJ0aGVuIiwicmVzdWx0IiwianNvbiIsImFsbFdvcmRzIiwiZmxhdCIsImNvbW1vbkFycmF5IiwiZm9yRWFjaCIsIml0ZW0iLCJjdXJyZW50T2JqIiwid29yZCIsInRyYW5zbGF0aW9uIiwiY2F0ZWdvcnkiLCJjbGlja3MiLCJjb3JyZWN0Iiwid3JvbmciLCJwZXJjZW50IiwicHVzaCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiY291bnRpbmdTdGF0aXN0aWNzIiwic3RhdCIsInBhcnNlIiwiZ2V0SXRlbSIsImJ1aWxkaW5nVGFibGUiLCJkYXRhIiwiY29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInN0YXRDb250YWluZXIiLCJidXR0b25zIiwicmVwZWF0QnV0dG9uIiwic3BhblJlcGVhdCIsInJlc2V0QnV0dG9uIiwic3BhblJlc2V0IiwidGFibGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVzZXRMb2NhbFN0b3JhZ2UiLCJyZXBlYXRXb3JkcyIsImlubmVySFRNTCIsInJvdyIsInRvRml4ZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGVhZGluZyIsInNvcnRDb2x1bW4iLCJzbGljZSIsInNvcnRPYmplY3QiLCJvYmoiLCJrZXkiLCJzb3J0IiwiYSIsImIiLCJkaXJlY3RPcmRlciIsImFycm93IiwiZGF0YUZvclRhYmxlIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsInJldmVyc2UiLCJDYXJkIiwiY2FyZEZyb250IiwiY2FyZEJhY2siLCJjYXJkRnJvbnRJbWFnZSIsImltZ0Zyb250IiwiY2FyZEZyb250TmFtZSIsImdhbWVNb2RlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsInRvVm9pY2UiLCJjYXJkQnV0dG9uIiwicmV2ZXJzZUNhcmQiLCJjYXJkQmFja0ltYWdlIiwiY2FyZEJhY2tOYW1lIiwiYXVkaW8iLCJBdWRpbyIsImxvYWQiLCJwbGF5Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJzdGFydEdhbWVCdXR0b24iLCJib3hTdGFycyIsImN1cnJlbnRXb3JkcyIsImNvcnJlY3RBbnN3ZXIiLCJ3cm9uZ0Fuc3dlciIsInNvdW5kV2luIiwic291bmRMb3NlIiwicmVwZWF0IiwiY3VycmVudFdvcmQiLCJtaXN0YWtlcyIsIndvcmRzVXNlZCIsImN1cnJlbnRDYXJkcyIsImdldEF0dHJpYnV0ZSIsIk1hdGgiLCJyYW5kb20iLCJwbGF5V29yZCIsImZpbHRlciIsIndpblN0YXJzIiwic2V0VGltZW91dCIsImZpbmlzaEdhbWUiLCJpbmNsdWRlcyIsInNwYW4iLCJnYW1lRmllbGQiLCJkZWxldGVHYW1lRWxlbWVudHMiLCJmaW5pc2hTY3JlZW4iLCJidXR0b25zRmluaXNoIiwibmV3R2FtZUJ1dHRvbiIsIm1haW5NZW51QnV0dG9uIiwicmVtb3ZlIiwic3dpdGNoZXIiLCJwYXJlbnROb2RlIiwic3dpdGNoQm94IiwidHJhaW5Nb2RlIiwiY2hlY2tib3giLCJ0b2dnbGUiLCJjYXJkcyIsImhlaWdodCIsInBsYXlHYW1lIiwicHJlcGVuZCIsInJlbW92ZVN3aXRjaGVyIiwiYWN0aXZlQ2FyZCIsIjAiLCIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiaW1hZ2VzIiwic2V0VGl0bGVDYXJkcyIsImkiLCJyZW5kZXIiLCJyZW1vdmVDb250ZW50Iiwic2V0Q29udGVudENhcmRzIiwidG9vZ2xlIiwibGVuZ3RoIiwiYnVyZ2VySWNvbiIsImJ1cmdlckJveCIsImJ1dHRvbk9mZiIsImNsYXNzTmFtZSIsImZpcnN0TEluZSIsInNlY29uZExpbmUiLCJ0aGlyZExpbmUiLCJsaW5rIl0sIm1hcHBpbmdzIjoibU1BQXFCQSxFLFdBQ25CLFdBQVlDLEVBQU9DLEVBQU9DLEksNEZBQVEsU0FDaENDLEtBQUtILE1BQVFBLEVBQ2JHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtELE9BQVNBLEUsc0RBSWQsSUFBTUUsRUFBT0MsU0FBU0MsY0FBYyxPQUNwQ0YsRUFBS0csVUFBVUMsSUFBSSxRQUNuQkosRUFBS0ssYUFBYSxjQUFsQixVQUFvQ04sS0FBS0QsU0FFekMsSUFBTVEsRUFBWUwsU0FBU0MsY0FBYyxPQUN6Q0ksRUFBVUgsVUFBVUMsSUFBSSxlQUV4QixJQUFNRyxFQUFNTixTQUFTQyxjQUFjLE9BQ25DSyxFQUFJQyxJQUFKLFVBQWFULEtBQUtILE9BQ2xCVSxFQUFVRyxZQUFZRixHQUV0QixJQUFNRyxFQUFXVCxTQUFTQyxjQUFjLFFBT3hDLE9BTkFRLEVBQVNQLFVBQVVDLElBQUksY0FDdkJNLEVBQVNDLFVBQVQsVUFBd0JaLEtBQUtGLE9BRTdCRyxFQUFLUyxZQUFZSCxHQUNqQk4sRUFBS1MsWUFBWUMsR0FFVlYsTyxzQkN6QkxZLEVBQWEsQ0FDakJDLEtBRGlCLFdBRWZDLE1BQU0sNEJBQ0hDLE1BQUssU0FBQ0MsR0FBRCxPQUFZQSxFQUFPQyxVQUN4QkYsTUFBSyxTQUFDQyxHQUNMLElBQU1FLEVBQVdGLEVBQU9HLE9BQ2xCQyxFQUFjLEdBQ3BCRixFQUFTRyxTQUFRLFNBQUNDLEdBQ2hCLElBQU1DLEVBQWEsQ0FDakJDLEtBQU1GLEVBQUtFLEtBQ1hDLFlBQWFILEVBQUtHLFlBQ2xCQyxTQUFVSixFQUFLSSxTQUNmQyxPQUFRLEVBQ1JDLFFBQVMsRUFDVEMsTUFBTyxFQUNQQyxRQUFTLEdBRVhWLEVBQVlXLEtBQUtSLE1BRW5CUyxhQUFhQyxRQUFRLG1CQUFyQixVQUE0Q0MsS0FBS0MsVUFBVWYsU0FJakVnQixtQkF2QmlCLFNBdUJFWixFQUFNRSxHQUN2QixJQUFNVyxFQUFPSCxLQUFLSSxNQUFNTixhQUFhTyxRQUFRLHFCQUM3Q0YsRUFBS2hCLFNBQVEsU0FBQ0MsR0FDWixHQUFJQSxFQUFLRSxPQUFTQSxFQUFNLENBQ3RCLE9BQVFFLEdBQ04sSUFBSyxTQUNISixFQUFLSyxRQUFVLEVBQ2YsTUFDRixJQUFLLFVBQ0hMLEVBQUtNLFNBQVcsRUFDaEIsTUFDRixJQUFLLFFBQ0hOLEVBQUtPLE9BQVMsRUFLZFAsRUFBS08sTUFBUVAsRUFBS00sUUFBVSxJQUM5Qk4sRUFBS1EsUUFBd0IsSUFBYlIsRUFBS08sT0FBZ0JQLEVBQUtPLE1BQVFQLEVBQUtNLGNBSTdESSxhQUFhQyxRQUFRLG1CQUFyQixVQUE0Q0MsS0FBS0MsVUFBVUUsTUFHN0RHLGNBaERpQixTQWdESEMsR0FFWixJQUZrQixXQUNaQyxFQUFZekMsU0FBUzBDLGNBQWMsdUJBQ2xDRCxFQUFVRSxZQUNmRixFQUFVRyxZQUFZSCxFQUFVRSxZQUdsQyxJQUFNRSxFQUFnQjdDLFNBQVNDLGNBQWMsT0FDN0M0QyxFQUFjM0MsVUFBVUMsSUFBSSxrQkFFNUIsSUFBTTJDLEVBQVU5QyxTQUFTQyxjQUFjLE9BQ3ZDNkMsRUFBUTVDLFVBQVVDLElBQUksaUJBRXRCLElBQU00QyxFQUFlL0MsU0FBU0MsY0FBYyxPQUM1QzhDLEVBQWE3QyxVQUFVQyxJQUFJLGlCQUMzQixJQUFNNkMsRUFBYWhELFNBQVNDLGNBQWMsUUFDMUMrQyxFQUFXdEMsVUFBWSx5QkFDdkJxQyxFQUFhdkMsWUFBWXdDLEdBRXpCLElBQU1DLEVBQWNqRCxTQUFTQyxjQUFjLE9BQzNDZ0QsRUFBWS9DLFVBQVVDLElBQUksZ0JBQzFCLElBQU0rQyxFQUFZbEQsU0FBU0MsY0FBYyxRQUN6Q2lELEVBQVV4QyxVQUFZLFFBQ3RCdUMsRUFBWXpDLFlBQVkwQyxHQUV4QkosRUFBUXRDLFlBQVl1QyxHQUNwQkQsRUFBUXRDLFlBQVl5QyxHQUVwQixJQUFNRSxFQUFRbkQsU0FBU0MsY0FBYyxTQUNyQ2tELEVBQU1qRCxVQUFVQyxJQUFJLFNBR3BCMEMsRUFBY3JDLFlBQVlzQyxHQUMxQkQsRUFBY3JDLFlBQVkyQyxHQUMxQlYsRUFBVWpDLFlBQVlxQyxHQUV0QkksRUFBWUcsaUJBQWlCLFNBQVMsV0FDcEMsRUFBS0MsdUJBR1BOLEVBQWFLLGlCQUFpQixTQUFTLFdBQ3JDLEVBQUtFLGlCQUlQSCxFQUFNSSxVQUFOLDBMQVNBZixFQUFLcEIsU0FBUSxTQUFDb0MsR0FDWkwsRUFBTUksV0FBTiw0QkFDUUMsRUFBSWpDLEtBRFosOEJBRVFpQyxFQUFJaEMsWUFGWiw4QkFHUWdDLEVBQUkvQixTQUhaLDhCQUlRK0IsRUFBSTlCLE9BSlosOEJBS1E4QixFQUFJN0IsUUFMWiw4QkFNUTZCLEVBQUk1QixNQU5aLDhCQU9RNEIsRUFBSTNCLFFBQVE0QixRQUFRLEdBUDVCLHlCQVdnQnpELFNBQVMwRCxpQkFBaUIsTUFDbEN0QyxTQUFRLFNBQUN1QyxHQUNqQkEsRUFBUVAsaUJBQWlCLFNBQVMsV0FDSCxNQUF6Qk8sRUFBUWpELFVBQVUsR0FDcEIsRUFBS2tELFdBQVdELEVBQVFqRCxVQUFVbUQsTUFBTSxJQUFJLEdBQ1YsTUFBekJGLEVBQVFqRCxVQUFVLEdBQzNCLEVBQUtrRCxXQUFXRCxFQUFRakQsVUFBVW1ELE1BQU0sSUFBSSxHQUU1QyxFQUFLRCxXQUFXRCxFQUFRakQsV0FBVyxVQU0zQ29ELFdBL0hpQixTQStITkMsR0FBbUIsSUFBZEMsRUFBYyx1REFBUixPQVdwQixPQVZBRCxFQUFJRSxNQUFLLFNBQUNDLEVBQUdDLEdBQ1gsT0FBSUQsRUFBRSxHQUFELE9BQUlGLElBQVNHLEVBQUUsR0FBRCxPQUFJSCxJQUNkLEVBRUxFLEVBQUUsR0FBRCxPQUFJRixJQUFTRyxFQUFFLEdBQUQsT0FBSUgsS0FDYixFQUVILEtBR0ZELEdBR1RILFdBN0lpQixTQTZJTkksRUFBS0ksR0FDZCxJQUFNaEMsRUFBT0gsS0FBS0ksTUFBTU4sYUFBYU8sUUFBUSxxQkFDakMsYUFBUjBCLElBQ0ZBLEVBQU0sV0FFUixJQUVJSyxFQWVBekUsRUFqQkUwRSxFQUFleEUsS0FBS2dFLFdBQVcxQixFQUFNNEIsRUFBSU8sZUFrQi9DLE9BZklILEdBQWVKLEVBQUlRLE1BQU0sOEJBQzNCSCxFQUFRLFNBQ1J2RSxLQUFLeUMsY0FBYytCLElBQ1ZOLEVBQUlRLE1BQU0sOEJBQ25CSCxFQUFRLFNBQ1J2RSxLQUFLeUMsY0FBYytCLEVBQWFHLFlBQ3ZCTCxHQUNUQyxFQUFRLFNBQ1J2RSxLQUFLeUMsY0FBYytCLEVBQWFHLGFBRWhDSixFQUFRLFNBQ1J2RSxLQUFLeUMsY0FBYytCLElBSWJOLEdBQ04sSUFBSyxPQUNIcEUsRUFBUUksU0FBUzBDLGNBQWMsa0JBQy9CLE1BQ0YsSUFBSyxjQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsbUJBQy9CLE1BQ0YsSUFBSyxXQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsbUJBQy9CLE1BQ0YsSUFBSyxTQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsbUJBQy9CLE1BQ0YsSUFBSyxVQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsbUJBQy9CLE1BQ0YsSUFBSyxRQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsbUJBQy9CLE1BQ0YsSUFBSyxVQUNIOUMsRUFBUUksU0FBUzBDLGNBQWMsaUJBS25DOUMsRUFBTTJELFVBQU4sVUFBcUJjLEVBQXJCLFlBQThCekUsRUFBTTJELGFBSW5DeEIsYUFBYU8sUUFBUSxxQkFDeEIzQixFQUFXQyxPQUdiLFUsMEtDcE1xQjhELEUsV0FDbkIsV0FBWS9FLEVBQU80QixFQUFNQyxFQUFhM0IsSSw0RkFBUSxTQUM1Q0MsS0FBS0gsTUFBUUEsRUFDYkcsS0FBS3lCLEtBQU9BLEVBQ1p6QixLQUFLMEIsWUFBY0EsRUFDbkIxQixLQUFLRCxPQUFTQSxFQUNkQyxLQUFLQyxLQUFPLEtBQ1pELEtBQUs2RSxVQUFZLEtBQ2pCN0UsS0FBSzhFLFNBQVcsSyxzREFHVCxXQUNQOUUsS0FBS0MsS0FBT0MsU0FBU0MsY0FBYyxPQUNuQ0gsS0FBS0MsS0FBS0csVUFBVUMsSUFBSSxhQUV4QkwsS0FBSzZFLFVBQVkzRSxTQUFTQyxjQUFjLE9BQ3hDSCxLQUFLNkUsVUFBVXpFLFVBQVVDLElBQUksb0JBQzdCTCxLQUFLNkUsVUFBVXZFLGFBQWEsY0FBNUIsVUFBOENOLEtBQUtELFNBQ25EQyxLQUFLNkUsVUFBVXZFLGFBQWEsWUFBNUIsVUFBNENOLEtBQUt5QixPQUVqRCxJQUFNc0QsRUFBaUI3RSxTQUFTQyxjQUFjLE9BQzlDNEUsRUFBZTNFLFVBQVVDLElBQUksMEJBQzdCLElBQU0yRSxFQUFXOUUsU0FBU0MsY0FBYyxPQUN4QzZFLEVBQVN2RSxJQUFULFlBQW9CVCxLQUFLSCxPQUN6QmtGLEVBQWVyRSxZQUFZc0UsR0FFM0IsSUFBTUMsRUFBZ0IvRSxTQUFTQyxjQUFjLFFBQzdDOEUsRUFBYzdFLFVBQVVDLElBQUkseUJBQzVCNEUsRUFBY3JFLFVBQWQsVUFBNkJaLEtBQUt5QixNQUVsQyxJQUFNeUQsRUFBV2hGLFNBQVMwQyxjQUFjLGlCQUV4QzVDLEtBQUs2RSxVQUFVdkIsaUJBQWlCLFNBQVMsU0FBQzZCLEdBQ25DQSxFQUFNQyxPQUFPaEYsVUFBVWlGLFNBQVMsbUJBQXNCSCxFQUFTOUUsVUFBVWlGLFNBQVMsYUFDckZ4RSxxQkFBOEIsRUFBS1ksS0FBTSxVQUN6QyxFQUFLNkQsY0FJVCxJQUFNQyxFQUFhckYsU0FBU0MsY0FBYyxPQUMxQ29GLEVBQVduRixVQUFVQyxJQUFJLGtCQUN6QmtGLEVBQVdqRixhQUFhLGNBQXhCLFVBQTBDTixLQUFLRCxTQUMvQ3dGLEVBQVdqQyxpQkFBaUIsU0FBUyxXQUNuQyxFQUFLa0MsaUJBR1B4RixLQUFLNkUsVUFBVW5FLFlBQVlxRSxHQUMzQi9FLEtBQUs2RSxVQUFVbkUsWUFBWXVFLEdBQzNCakYsS0FBSzZFLFVBQVVuRSxZQUFZNkUsR0FFM0J2RixLQUFLOEUsU0FBVzVFLFNBQVNDLGNBQWMsT0FDdkNILEtBQUs4RSxTQUFTMUUsVUFBVUMsSUFBSSxtQkFFNUIsSUFBTW9GLEVBQWdCdkYsU0FBU0MsY0FBYyxPQUM3Q3NGLEVBQWNyRixVQUFVQyxJQUFJLHlCQUM1QixJQUFNRyxFQUFNTixTQUFTQyxjQUFjLE9BQ25DSyxFQUFJQyxJQUFKLFlBQWVULEtBQUtILE9BQ3BCNEYsRUFBYy9FLFlBQVlGLEdBRTFCLElBQU1rRixFQUFleEYsU0FBU0MsY0FBYyxRQVU1QyxPQVRBdUYsRUFBYXRGLFVBQVVDLElBQUksd0JBQzNCcUYsRUFBYTlFLFVBQWIsVUFBNEJaLEtBQUswQixhQUVqQzFCLEtBQUs4RSxTQUFTcEUsWUFBWStFLEdBQzFCekYsS0FBSzhFLFNBQVNwRSxZQUFZZ0YsR0FFMUIxRixLQUFLQyxLQUFLUyxZQUFZVixLQUFLNkUsV0FDM0I3RSxLQUFLQyxLQUFLUyxZQUFZVixLQUFLOEUsVUFFcEI5RSxLQUFLQyxPLGdDQUlaLElBQU0wRixFQUFRLElBQUlDLE1BQUosMEJBQTZCNUYsS0FBS3lCLEtBQWxDLFNBQ2RrRSxFQUFNRSxPQUNORixFQUFNRyxTLG9DQUdNLFdBQ1o5RixLQUFLNkUsVUFBVWtCLE1BQU1DLFVBQVksa0JBQ2pDaEcsS0FBSzhFLFNBQVNpQixNQUFNQyxVQUFZLGtCQUNoQ2hHLEtBQUtDLEtBQUtxRCxpQkFBaUIsY0FBYyxXQUN2QyxFQUFLdUIsVUFBVWtCLE1BQU1DLFVBQVksZ0JBQ2pDLEVBQUtsQixTQUFTaUIsTUFBTUMsVUFBWSwwQixzQkNrRnRDLFFBbktpQixDQUNmQyxnQkFBaUIsS0FDakJDLFNBQVUsS0FDVkMsYUFBYyxHQUNkQyxjQUFlLEtBQ2ZDLFlBQWEsS0FDYkMsU0FBVSxLQUNWQyxVQUFXLEtBQ1hDLFFBQVEsRUFDUkMsWUFBYSxLQUNiQyxTQUFVLEVBQ1ZDLFVBQVcsR0FFWDdGLEtBYmUsV0FhUixXQUNMZCxLQUFLaUcsZ0JBQWtCL0YsU0FBU0MsY0FBYyxPQUM5Q0gsS0FBS2lHLGdCQUFnQjdGLFVBQVVDLElBQUksZUFDbkMsSUFBTVAsRUFBUUksU0FBU0MsY0FBYyxRQUNyQ0wsRUFBTWMsVUFBWSxhQUNsQlosS0FBS2lHLGdCQUFnQnZGLFlBQVlaLEdBRWpDRSxLQUFLa0csU0FBV2hHLFNBQVNDLGNBQWMsT0FDdkNILEtBQUtrRyxTQUFTOUYsVUFBVUMsSUFBSSxhQUU1QkwsS0FBS29HLGNBQWdCLElBQUlSLE1BQU0sK0JBQy9CNUYsS0FBS3FHLFlBQWMsSUFBSVQsTUFBTSw2QkFDN0I1RixLQUFLc0csU0FBVyxJQUFJVixNQUFNLCtCQUMxQjVGLEtBQUt1RyxVQUFZLElBQUlYLE1BQU0sK0JBRTNCMUYsU0FBUzBDLGNBQWMsY0FBY2xDLFlBQVlWLEtBQUtpRyxpQkFDdEQvRixTQUFTMEMsY0FBYyxjQUFjbEMsWUFBWVYsS0FBS2tHLFVBRXREbEcsS0FBS2lHLGdCQUFnQjNDLGlCQUFpQixTQUFTLFdBQ3pDLEVBQUtrRCxPQUNQLEVBQUtDLFlBQVlYLFFBRWpCLEVBQUtHLGdCQUFnQjdGLFVBQVVDLElBQUksVUFDbkNILFNBQVMwQyxjQUFjLHVCQUF1QmhDLFVBQVksR0FDMUQsRUFBSzRGLFFBQVMsRUFDZCxFQUFLVixZQUtYQSxLQTNDZSxXQTJDUixXQUNDYyxFQUFlMUcsU0FBUzBELGlCQUFpQixxQkFDL0NnRCxFQUFhdEYsU0FBUSxTQUFDckIsR0FDcEIsRUFBS2tHLGFBQWFuRSxLQUFLL0IsRUFBSzRHLGFBQWEsaUJBRTNDN0csS0FBS21HLGFBQWFoQyxNQUFLLGtCQUFNMkMsS0FBS0MsU0FBVyxNQUU3QyxJQUFJTixFQUFjLEVBRVpPLEVBQVcsV0FDZixFQUFLUCxZQUFjLElBQUliLE1BQUosMEJBQTZCLEVBQUtPLGFBQWFNLEdBQS9DLFNBQ25CLEVBQUtBLFlBQVlaLE9BQ2pCLEVBQUtZLFlBQVlYLFFBR25Ca0IsSUFFQUosRUFBYXRGLFNBQVEsU0FBQ3JCLEdBQ3BCQSxFQUFLcUQsaUJBQWlCLFNBQVMsV0FDN0IsR0FBSXJELEVBQUs0RyxhQUFhLGVBQWlCLEVBQUtWLGFBQWFNLEdBQWMsQ0FDckUsRUFBS0UsVUFBVTNFLEtBQUssRUFBS21FLGFBQWFNLElBQ3RDNUYscUJBQThCLEVBQUtzRixhQUFhTSxHQUFjLFdBQzlELEVBQUtMLGNBQWNOLE9BQ25CN0YsRUFBSzhGLE1BQU1rQixPQUFTLFlBRXBCLElBQU1DLEVBQVdoSCxTQUFTQyxjQUFjLE9BQ3hDK0csRUFBU3pHLElBQU0sOEJBQ2YsRUFBS3lGLFNBQVN4RixZQUFZd0csSUFFMUJULEdBQWUsR0FDRyxFQUNoQlUsV0FBV0gsRUFBVSxLQUVyQkcsWUFBVyxXQUNULEVBQUtDLGVBQ0osVUFFQSxJQUFLLEVBQUtULFVBQVVVLFNBQVNwSCxFQUFLNEcsYUFBYSxjQUFlLENBQ25FaEcscUJBQThCLEVBQUtzRixhQUFhTSxHQUFjLFNBQzlELEVBQUtDLFVBQVksRUFDakIsSUFBTVEsRUFBV2hILFNBQVNDLGNBQWMsT0FDeEMrRyxFQUFTekcsSUFBTSwwQkFDZixFQUFLeUYsU0FBU3hGLFlBQVl3RyxHQUUxQixFQUFLYixZQUFZUCxlQU16QnNCLFdBN0ZlLFdBaUdiLElBQUlFLEVBQ0E3RyxFQUpKOEcsa0JBQ0F2SCxLQUFLd0gscUJBSWlCLElBQWxCeEgsS0FBSzBHLFVBQ1BZLEVBQU8sNEJBQ1A3RyxFQUFNLDZCQUNOVCxLQUFLc0csU0FBU1IsU0FFZHdCLEVBQU8sMERBQUgsT0FDU3RILEtBQUswRyxTQURkLGdCQUVKakcsRUFBTSw2QkFDTlQsS0FBS3VHLFVBQVVULFFBR2pCLElBQU0yQixFQUFlLDJCQUFILE9BQThCSCxFQUE5Qix5REFDaUI3RyxFQURqQixZQUVsQjhHLHVCQUFpQ0UsRUFFakMsSUFBTUMsRUFBZ0J4SCxTQUFTQyxjQUFjLE9BQzdDdUgsRUFBY3RILFVBQVVDLElBQUksa0JBQzVCLElBQU1zSCxFQUFnQnpILFNBQVNDLGNBQWMsVUFDN0N3SCxFQUFjdkgsVUFBVUMsSUFBSSxZQUM1QnNILEVBQWMvRyxVQUFZLFdBQzFCLElBQU1nSCxFQUFpQjFILFNBQVNDLGNBQWMsVUFDOUN5SCxFQUFleEgsVUFBVUMsSUFBSSxhQUM3QnVILEVBQWVoSCxVQUFZLFlBQzNCOEcsRUFBY2hILFlBQVlpSCxHQUMxQkQsRUFBY2hILFlBQVlrSCxHQUUxQkQsRUFBY3JFLGlCQUFpQixTQUFTLFdBQ3RDaUUsa0JBQ0FBLGtCQUEwQkEsaUJBRzVCSyxFQUFldEUsaUJBQWlCLFNBQVMsV0FDdkNpRSxrQkFDQUEsa0JBRUFySCxTQUFTMEMsY0FBYywyQkFBMkJ4QyxVQUFVeUgsT0FBTyxVQUNuRTNILFNBQVMwQyxjQUFjLGdDQUFnQ3hDLFVBQVVDLElBQUksYUFHdkVrSCx3QkFBZ0NHLEdBQ2hDMUgsS0FBSzBHLFNBQVcsR0FPbEJjLG1CQWxKZSxXQW1KYixJQUFNTSxFQUFXNUgsU0FBUzBDLGNBQWMscUJBQ3BDa0YsR0FDRkEsRUFBU0MsV0FBV2pGLFlBQVlnRixHQUU5QjlILEtBQUtpRyxpQkFDUGpHLEtBQUtpRyxnQkFBZ0I4QixXQUFXakYsWUFBWTlDLEtBQUtpRyxpQkFFL0NqRyxLQUFLa0csVUFDUGxHLEtBQUtrRyxTQUFTNkIsV0FBV2pGLFlBQVk5QyxLQUFLa0csVUFFNUNsRyxLQUFLd0csUUFBUyxFQUNkeEcsS0FBS21HLGFBQWUsR0FDcEJuRyxLQUFLeUcsWUFBYyxPQ3JHdkIsRUEzRGUsQ0FDYnVCLFVBQVcsS0FFWGxILEtBSGEsV0FJWGQsS0FBS2dJLFVBQVk5SCxTQUFTQyxjQUFjLE9BQ3hDSCxLQUFLZ0ksVUFBVTVILFVBQVVDLElBQUksb0JBRTdCLElBQU00SCxFQUFZL0gsU0FBU0MsY0FBYyxPQUN6QzhILEVBQVU3SCxVQUFVQyxJQUFJLGFBQWMsZUFDdEM0SCxFQUFVckgsVUFBWSxRQUN0QixJQUFNc0UsRUFBV2hGLFNBQVNDLGNBQWMsT0FDeEMrRSxFQUFTOUUsVUFBVUMsSUFBSSxhQUN2QjZFLEVBQVN0RSxVQUFZLE9BRXJCLElBQU1rSCxFQUFXNUgsU0FBU0MsY0FBYyxTQUN4QzJILEVBQVMxSCxVQUFVQyxJQUFJLFVBQ3ZCLElBQU02SCxFQUFXaEksU0FBU0MsY0FBYyxTQUN4QytILEVBQVM1SCxhQUFhLE9BQVEsWUFFOUI0SCxFQUFTNUUsaUJBQWlCLFVBQVUsV0FDbEM0RSxFQUFTOUgsVUFBVStILE9BQU8sV0FDMUIsSUFBTUMsRUFBUWxJLFNBQVMwRCxpQkFBaUIsY0FDcENzRSxFQUFTOUgsVUFBVWlGLFNBQVMsWUFDOUIrQyxFQUFNOUcsU0FBUSxTQUFDckIsR0FDYkEsRUFBSzhGLE1BQU1zQyxPQUFTLFdBRXRCQyxXQUVBRixFQUFNOUcsU0FBUSxTQUFDckIsR0FDYkEsRUFBSzhGLE1BQU1zQyxPQUFTLFdBRXRCbkksU0FBUzBDLGNBQWMsY0FBY0UsWUFBWTVDLFNBQVMwQyxjQUFjLGlCQUN4RTFDLFNBQVMwQyxjQUFjLGNBQWNFLFlBQVk1QyxTQUFTMEMsY0FBYyxnQkFHMUVxRixFQUFVN0gsVUFBVStILE9BQU8sZUFDM0JqRCxFQUFTOUUsVUFBVStILE9BQU8sa0JBRzVCLElBQU1iLEVBQU9wSCxTQUFTQyxjQUFjLFFBQ3BDbUgsRUFBS2xILFVBQVVDLElBQUksU0FBVSxTQUM3QnlILEVBQVNwSCxZQUFZd0gsR0FDckJKLEVBQVNwSCxZQUFZNEcsR0FFckJ0SCxLQUFLZ0ksVUFBVXRILFlBQVl1SCxHQUMzQmpJLEtBQUtnSSxVQUFVdEgsWUFBWW9ILEdBQzNCOUgsS0FBS2dJLFVBQVV0SCxZQUFZd0UsR0FFM0JoRixTQUFTMEMsY0FBYyxjQUFjMkYsUUFBUXZJLEtBQUtnSSxZQUdwRFEsZUFuRGEsV0FvRFgsSUFBTVYsRUFBVzVILFNBQVMwQyxjQUFjLHFCQUNwQ2tGLEdBQ0ZBLEVBQVNDLFdBQVdqRixZQUFZZ0YsS0NyRHRDLElBQU1QLEVBQVksQ0FDaEI1RSxVQUFXLEtBQ1g4RixXQUFZLEtBQ1ozSSxNQUFPLENBQ0w0SSxFQUFHLGlCQUNIQyxFQUFHLGlCQUNIQyxFQUFHLGlCQUNIQyxFQUFHLFlBQ0hDLEVBQUcsaUJBQ0hDLEVBQUcsaUJBQ0hDLEVBQUcsVUFDSEMsRUFBRyxXQUdMQyxPQUFRLENBQ05SLEVBQUcseUNBQ0hDLEVBQUcseUNBQ0hDLEVBQUcseUNBQ0hDLEVBQUcsMkNBQ0hDLEVBQUcseUNBQ0hDLEVBQUcseUNBQ0hDLEVBQUcseUNBQ0hDLEVBQUcsMENBR0xuSSxLQXpCZ0IsV0EwQmRkLEtBQUsyQyxVQUFZekMsU0FBU0MsY0FBYyxPQUN4Q0gsS0FBSzJDLFVBQVV2QyxVQUFVQyxJQUFJLFdBQzdCSCxTQUFTMEMsY0FBYyxjQUFjbEMsWUFBWVYsS0FBSzJDLFdBQ3REM0MsS0FBS21KLGlCQUdQQSxjQWhDZ0IsV0FpQ2QsSUFEYyxXQUNMQyxFQUFJLEVBQUdBLEVBQUksRUFBR0EsR0FBSyxFQUFHLENBQzdCLElBQU1uSixFQUFPLElBQUlMLEVBQVVJLEtBQUtrSixPQUFPRSxHQUFJcEosS0FBS0YsTUFBTXNKLEdBQUlBLEdBQzFEcEosS0FBSzJDLFVBQVVqQyxZQUFZVCxFQUFLb0osVUFHcEJuSixTQUFTMEQsaUJBQWlCLFNBQ2xDdEMsU0FBUSxTQUFDckIsR0FDYkEsRUFBS3FELGlCQUFpQixTQUFTLFdBQzdCLEVBQUtnRyxnQkFDTCxFQUFLYixXQUFheEksRUFBSzRHLGFBQWEsZUFDcEMsRUFBSzBDLGdCQUFnQixFQUFLZCxtQkFLaENjLGdCQWhEZ0IsU0FnREFkLEdBQVksV0FDMUJlLFNBRUF6SSxNQUFNLDRCQUNIQyxNQUFLLFNBQUNDLEdBQUQsT0FBWUEsRUFBT0MsVUFDeEJGLE1BQUssU0FBQ0MsR0FFTCxJQURBLElBQU15QixFQUFPekIsRUFBT3dILEdBQ1hXLEVBQUksRUFBR0EsRUFBSTFHLEVBQUsrRyxPQUFRTCxHQUFLLEVBQUcsQ0FDdkMsSUFBTW5KLEVBQU8sSUFBSTJFLEVBQUtsQyxFQUFLMEcsR0FBR3ZKLE1BQU82QyxFQUFLMEcsR0FBRzNILEtBQU1pQixFQUFLMEcsR0FBRzFILFlBQWEwSCxHQUN4RSxFQUFLekcsVUFBVWpDLFlBQVlULEVBQUtvSixlQUt4Q0MsY0E5RGdCLFdBZ0VkLElBREEsSUFBTTFDLEVBQWUxRyxTQUFTMEMsY0FBYyx1QkFDckNnRSxFQUFhL0QsWUFDbEIrRCxFQUFhOUQsWUFBWThELEVBQWEvRCxjQUs1QzBFLEVBQVV6RyxPQUVWLFVDNUVBLElBQU00SSxFQUFhLENBQ2pCQyxVQUFXLEtBQ1hDLFdBQVcsRUFFWDlJLEtBSmlCLFdBSVYsV0FDTGQsS0FBSzJKLFVBQVl6SixTQUFTQyxjQUFjLE9BQ3hDSCxLQUFLMkosVUFBVUUsVUFBWSxzQkFFM0IsSUFBTUMsRUFBWTVKLFNBQVNDLGNBQWMsT0FDekMySixFQUFVRCxVQUFZLGFBQ3RCLElBQU1FLEVBQWE3SixTQUFTQyxjQUFjLE9BQzFDNEosRUFBV0YsVUFBWSxjQUN2QixJQUFNRyxFQUFZOUosU0FBU0MsY0FBYyxPQUN6QzZKLEVBQVVILFVBQVksYUFFdEI3SixLQUFLMkosVUFBVWpKLFlBQVlvSixHQUMzQjlKLEtBQUsySixVQUFVakosWUFBWXFKLEdBQzNCL0osS0FBSzJKLFVBQVVqSixZQUFZc0osR0FFM0JoSyxLQUFLMkosVUFBVXJHLGlCQUFpQixTQUFTLFdBQ25DLEVBQUtzRyxXQUNQRSxFQUFVL0QsTUFBTUMsVUFBWSxpQ0FDNUIrRCxFQUFXaEUsTUFBTUMsVUFBWSxvQkFDN0JnRSxFQUFVakUsTUFBTUMsVUFBWSxtQ0FHNUI5RixTQUFTMEMsY0FBYyxnQkFBZ0JtRCxNQUFNQyxVQUFZLGdCQUN6RDlGLFNBQVMwQyxjQUFjLFVBQVV4QyxVQUFVeUgsT0FBTyxrQkFDbEQsRUFBSytCLFdBQVksSUFFakJFLEVBQVUvRCxNQUFNQyxVQUFZLDBCQUM1QitELEVBQVdoRSxNQUFNQyxVQUFZLGdCQUM3QmdFLEVBQVVqRSxNQUFNQyxVQUFZLDBCQUc1QjlGLFNBQVMwQyxjQUFjLGdCQUFnQm1ELE1BQU1DLFVBQVkscUJBQ3pEOUYsU0FBUzBDLGNBQWMsVUFBVXhDLFVBQVVDLElBQUksa0JBQy9DLEVBQUt1SixXQUFZLE1BU3JCMUosU0FBUzBDLGNBQWMsb0JBQW9CMkYsUUFBUXZJLEtBQUsySixhQUk1REQsRUFBVzVJLE9BRVgsVUM5Q2NaLFNBQVMwRCxpQkFBaUIsb0JBQ2xDdEMsU0FBUSxTQUFDMkksR0FDYkEsRUFBSzNHLGlCQUFpQixTQUFTLFdBTTdCLEdBTEFpRSxrQkFDQW1DLG9CQUNBeEosU0FBUzBDLGNBQWMsMkJBQTJCeEMsVUFBVXlILE9BQU8sVUFDbkVvQyxFQUFLN0osVUFBVUMsSUFBSSxVQUVzQixTQUFyQzRKLEVBQUtwRCxhQUFhLGVBQ3BCMkMsbUJBQ0FqQyx1QkFDSyxHQUF5QyxlQUFyQzBDLEVBQUtwRCxhQUFhLGVBQWlDLENBQzVEMkMsbUJBQ0EsSUFBTWxILEVBQU9ILEtBQUtJLE1BQU1OLGFBQWFPLFFBQVEscUJBQ3ZDZ0MsRUFBZTNELGFBQXNCeUIsR0FDM0N6QixnQkFBeUIyRCxHQUN6QnRFLFNBQVMwQyxjQUFjLG1CQUFtQmEsVUFBWSxtQkFFdEQ4RCxrQkFBMEIwQyxFQUFLcEQsYUFBYSxzQkFLcEMzRyxTQUFTMEMsY0FBYyxVQUMvQlUsaUJBQWlCLFNBQVMsV0FDOUJpRSxrQkFDQWUsdUJBQ0FmLGtCQUVBckgsU0FBUzBDLGNBQWMsMkJBQTJCeEMsVUFBVXlILE9BQU8sVUFDbkUzSCxTQUFTMEMsY0FBYyxnQ0FBZ0N4QyxVQUFVQyxJQUFJLGMiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGl0bGVDYXJkIHtcbiAgY29uc3RydWN0b3IoaW1hZ2UsIHRpdGxlLCBudW1iZXIpIHtcbiAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2NhcmQnKTtcbiAgICBjYXJkLnNldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInLCBgJHt0aGlzLm51bWJlcn1gKTtcblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkX19pbWFnZScpO1xuXG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaW1nLnNyYyA9IGAke3RoaXMuaW1hZ2V9YDtcbiAgICBjYXJkSW1hZ2UuYXBwZW5kQ2hpbGQoaW1nKTtcblxuICAgIGNvbnN0IGNhcmROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGNhcmROYW1lLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX25hbWUnKTtcbiAgICBjYXJkTmFtZS5pbm5lclRleHQgPSBgJHt0aGlzLnRpdGxlfWA7XG5cbiAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRJbWFnZSk7XG4gICAgY2FyZC5hcHBlbmRDaGlsZChjYXJkTmFtZSk7XG5cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmNvbnN0IHN0YXRpc3RpY3MgPSB7XG4gIGluaXQoKSB7XG4gICAgZmV0Y2goJy4vYXNzZXRzL2pzb24vY2FyZHMuanNvbicpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBhbGxXb3JkcyA9IHJlc3VsdC5mbGF0KCk7XG4gICAgICAgIGNvbnN0IGNvbW1vbkFycmF5ID0gW107XG4gICAgICAgIGFsbFdvcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50T2JqID0ge1xuICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLFxuICAgICAgICAgICAgdHJhbnNsYXRpb246IGl0ZW0udHJhbnNsYXRpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSxcbiAgICAgICAgICAgIGNsaWNrczogMCxcbiAgICAgICAgICAgIGNvcnJlY3Q6IDAsXG4gICAgICAgICAgICB3cm9uZzogMCxcbiAgICAgICAgICAgIHBlcmNlbnQ6IDAsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb21tb25BcnJheS5wdXNoKGN1cnJlbnRPYmopO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnLCBgJHtKU09OLnN0cmluZ2lmeShjb21tb25BcnJheSl9YCk7XG4gICAgICB9KTtcbiAgfSxcblxuICBjb3VudGluZ1N0YXRpc3RpY3Mod29yZCwgY2F0ZWdvcnkpIHtcbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBzdGF0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChpdGVtLndvcmQgPT09IHdvcmQpIHtcbiAgICAgICAgc3dpdGNoIChjYXRlZ29yeSkge1xuICAgICAgICAgIGNhc2UgJ2NsaWNrcyc6XG4gICAgICAgICAgICBpdGVtLmNsaWNrcyArPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY29ycmVjdCc6XG4gICAgICAgICAgICBpdGVtLmNvcnJlY3QgKz0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dyb25nJzpcbiAgICAgICAgICAgIGl0ZW0ud3JvbmcgKz0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS53cm9uZyArIGl0ZW0uY29ycmVjdCA+IDApIHtcbiAgICAgICAgICBpdGVtLnBlcmNlbnQgPSAoaXRlbS53cm9uZyAqIDEwMCkgLyAoaXRlbS53cm9uZyArIGl0ZW0uY29ycmVjdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycsIGAke0pTT04uc3RyaW5naWZ5KHN0YXQpfWApO1xuICB9LFxuXG4gIGJ1aWxkaW5nVGFibGUoZGF0YSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIgLndyYXBwZXInKTtcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHN0YXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc3RhdC1jb250YWluZXInKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25zLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWJ1dHRvbnMnKTtcblxuICAgIGNvbnN0IHJlcGVhdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJlcGVhdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZXBlYXQtYnV0dG9uJyk7XG4gICAgY29uc3Qgc3BhblJlcGVhdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuUmVwZWF0LmlubmVyVGV4dCA9ICdSZXBlYXQgZGlmZmljdWx0IHdvcmRzJztcbiAgICByZXBlYXRCdXR0b24uYXBwZW5kQ2hpbGQoc3BhblJlcGVhdCk7XG5cbiAgICBjb25zdCByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJlc2V0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Jlc2V0LWJ1dHRvbicpO1xuICAgIGNvbnN0IHNwYW5SZXNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuUmVzZXQuaW5uZXJUZXh0ID0gJ1Jlc2V0JztcbiAgICByZXNldEJ1dHRvbi5hcHBlbmRDaGlsZChzcGFuUmVzZXQpO1xuXG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChyZXBlYXRCdXR0b24pO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuXG4gICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoJ3RhYmxlJyk7XG5cbiAgICAvLyBhZGQgZWxlbWVudHMgdG8gcGFnZVxuICAgIHN0YXRDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9ucyk7XG4gICAgc3RhdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRDb250YWluZXIpO1xuXG4gICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlc2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgfSk7XG5cbiAgICByZXBlYXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcGVhdFdvcmRzKCk7XG4gICAgfSk7XG5cbiAgICAvLyByZW5kZXJpbmcgdGFibGVcbiAgICB0YWJsZS5pbm5lckhUTUwgPSBgPHRyPlxuICAgICAgPHRoPldvcmQ8L3RoPlxuICAgICAgPHRoPlRyYW5zbGF0aW9uPC90aD5cbiAgICAgIDx0aD5DYXRlZ29yeTwvdGg+XG4gICAgICA8dGg+Q2xpY2tzPC90aD5cbiAgICAgIDx0aD5Db3JyZWN0PC90aD5cbiAgICAgIDx0aD5Xcm9uZzwvdGg+XG4gICAgICA8dGg+JSBlcnJvcnM8L3RoPlxuICAgIDwvdHI+YDtcbiAgICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgdGFibGUuaW5uZXJIVE1MICs9IGA8dHI+XG4gICAgICAgIDx0ZD4ke3Jvdy53b3JkfTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy50cmFuc2xhdGlvbn08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cuY2F0ZWdvcnl9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LmNsaWNrc308L3RkPlxuICAgICAgICA8dGQ+JHtyb3cuY29ycmVjdH08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cud3Jvbmd9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LnBlcmNlbnQudG9GaXhlZCgxKX08L3RkPlxuICAgICAgPC90cj5gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdGFibGVIZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICB0YWJsZUhlYWQuZm9yRWFjaCgoaGVhZGluZykgPT4ge1xuICAgICAgaGVhZGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKGhlYWRpbmcuaW5uZXJUZXh0WzBdID09PSAn4oaTJykge1xuICAgICAgICAgIHRoaXMuc29ydENvbHVtbihoZWFkaW5nLmlubmVyVGV4dC5zbGljZSgyKSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRpbmcuaW5uZXJUZXh0WzBdID09PSAn4oaRJykge1xuICAgICAgICAgIHRoaXMuc29ydENvbHVtbihoZWFkaW5nLmlubmVyVGV4dC5zbGljZSgyKSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGhlYWRpbmcuaW5uZXJUZXh0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc29ydE9iamVjdChvYmosIGtleSA9ICd3b3JkJykge1xuICAgIG9iai5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYVtgJHtrZXl9YF0gPiBiW2Ake2tleX1gXSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGlmIChhW2Ake2tleX1gXSA8IGJbYCR7a2V5fWBdKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBzb3J0Q29sdW1uKGtleSwgZGlyZWN0T3JkZXIpIHtcbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBpZiAoa2V5ID09PSAnJSBlcnJvcnMnKSB7XG4gICAgICBrZXkgPSAncGVyY2VudCc7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFGb3JUYWJsZSA9IHRoaXMuc29ydE9iamVjdChzdGF0LCBrZXkudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBsZXQgYXJyb3c7XG4gICAgaWYgKGRpcmVjdE9yZGVyICYmIGtleS5tYXRjaCgvV29yZHxUcmFuc2xhdGlvbnxDYXRlZ29yeS8pKSB7XG4gICAgICBhcnJvdyA9ICcmZGFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZSk7XG4gICAgfSBlbHNlIGlmIChrZXkubWF0Y2goL1dvcmR8VHJhbnNsYXRpb258Q2F0ZWdvcnkvKSkge1xuICAgICAgYXJyb3cgPSAnJnVhcnI7JztcbiAgICAgIHRoaXMuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUucmV2ZXJzZSgpKTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdE9yZGVyKSB7XG4gICAgICBhcnJvdyA9ICcmZGFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZS5yZXZlcnNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcnJvdyA9ICcmdWFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZSk7XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlO1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdXb3JkJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpmaXJzdC1jaGlsZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1RyYW5zbGF0aW9uJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoMiknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDYXRlZ29yeSc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDMpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2xpY2tzJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoNCknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDb3JyZWN0JzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoNSknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdXcm9uZyc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDYpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGVyY2VudCc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bGFzdC1jaGlsZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aXRsZS5pbm5lckhUTUwgPSBgJHthcnJvd30gJHt0aXRsZS5pbm5lckhUTUx9YDtcbiAgfSxcbn07XG5cbmlmICghbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnKSkge1xuICBzdGF0aXN0aWNzLmluaXQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RhdGlzdGljcztcbiIsImltcG9ydCBzdGF0aXN0aWNzIGZyb20gJy4uL3N0YXRpc3RpY3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoaW1hZ2UsIHdvcmQsIHRyYW5zbGF0aW9uLCBudW1iZXIpIHtcbiAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgdGhpcy53b3JkID0gd29yZDtcbiAgICB0aGlzLnRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb247XG4gICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgdGhpcy5jYXJkID0gbnVsbDtcbiAgICB0aGlzLmNhcmRGcm9udCA9IG51bGw7XG4gICAgdGhpcy5jYXJkQmFjayA9IG51bGw7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5jYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5jYXJkLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZCcpO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNhcmRGcm9udC5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2Zyb250Jyk7XG4gICAgdGhpcy5jYXJkRnJvbnQuc2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicsIGAke3RoaXMubnVtYmVyfWApO1xuICAgIHRoaXMuY2FyZEZyb250LnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgYCR7dGhpcy53b3JkfWApO1xuXG4gICAgY29uc3QgY2FyZEZyb250SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkRnJvbnRJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2Zyb250LWltYWdlJyk7XG4gICAgY29uc3QgaW1nRnJvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWdGcm9udC5zcmMgPSBgLi8ke3RoaXMuaW1hZ2V9YDtcbiAgICBjYXJkRnJvbnRJbWFnZS5hcHBlbmRDaGlsZChpbWdGcm9udCk7XG5cbiAgICBjb25zdCBjYXJkRnJvbnROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGNhcmRGcm9udE5hbWUuY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkX19mcm9udC1uYW1lJyk7XG4gICAgY2FyZEZyb250TmFtZS5pbm5lclRleHQgPSBgJHt0aGlzLndvcmR9YDtcblxuICAgIGNvbnN0IGdhbWVNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWwgPiBpbnB1dCcpO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncmV2ZXJzZS1idXR0b24nKSAmJiAhZ2FtZU1vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGVja2VkJykpIHtcbiAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy53b3JkLCAnY2xpY2tzJyk7XG4gICAgICAgIHRoaXMudG9Wb2ljZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRCdXR0b24uY2xhc3NMaXN0LmFkZCgncmV2ZXJzZS1idXR0b24nKTtcbiAgICBjYXJkQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInLCBgJHt0aGlzLm51bWJlcn1gKTtcbiAgICBjYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZXZlcnNlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQuYXBwZW5kQ2hpbGQoY2FyZEZyb250SW1hZ2UpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRGcm9udE5hbWUpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRCdXR0b24pO1xuXG4gICAgdGhpcy5jYXJkQmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZEJhY2suY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkX19iYWNrJyk7XG5cbiAgICBjb25zdCBjYXJkQmFja0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEJhY2tJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2JhY2staW1hZ2UnKTtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gYC4vJHt0aGlzLmltYWdlfWA7XG4gICAgY2FyZEJhY2tJbWFnZS5hcHBlbmRDaGlsZChpbWcpO1xuXG4gICAgY29uc3QgY2FyZEJhY2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGNhcmRCYWNrTmFtZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2JhY2stbmFtZScpO1xuICAgIGNhcmRCYWNrTmFtZS5pbm5lclRleHQgPSBgJHt0aGlzLnRyYW5zbGF0aW9ufWA7XG5cbiAgICB0aGlzLmNhcmRCYWNrLmFwcGVuZENoaWxkKGNhcmRCYWNrSW1hZ2UpO1xuICAgIHRoaXMuY2FyZEJhY2suYXBwZW5kQ2hpbGQoY2FyZEJhY2tOYW1lKTtcblxuICAgIHRoaXMuY2FyZC5hcHBlbmRDaGlsZCh0aGlzLmNhcmRGcm9udCk7XG4gICAgdGhpcy5jYXJkLmFwcGVuZENoaWxkKHRoaXMuY2FyZEJhY2spO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FyZDtcbiAgfVxuXG4gIHRvVm9pY2UoKSB7XG4gICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oYC4vYXNzZXRzL3NvdW5kcy8ke3RoaXMud29yZH0ubXAzYCk7XG4gICAgYXVkaW8ubG9hZCgpO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgfVxuXG4gIHJldmVyc2VDYXJkKCkge1xuICAgIHRoaXMuY2FyZEZyb250LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDE4MGRlZyknO1xuICAgIHRoaXMuY2FyZEJhY2suc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMzYwZGVnKSc7XG4gICAgdGhpcy5jYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmNhcmRGcm9udC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlWSgwZGVnKSc7XG4gICAgICB0aGlzLmNhcmRCYWNrLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDE4MGRlZyknO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IHN0YXRpc3RpY3MgZnJvbSAnLi9zdGF0aXN0aWNzJztcbmltcG9ydCBnYW1lRmllbGQgZnJvbSAnLi9nYW1lLWZpZWxkJztcblxuY29uc3QgcGxheUdhbWUgPSB7XG4gIHN0YXJ0R2FtZUJ1dHRvbjogbnVsbCxcbiAgYm94U3RhcnM6IG51bGwsXG4gIGN1cnJlbnRXb3JkczogW10sXG4gIGNvcnJlY3RBbnN3ZXI6IG51bGwsXG4gIHdyb25nQW5zd2VyOiBudWxsLFxuICBzb3VuZFdpbjogbnVsbCxcbiAgc291bmRMb3NlOiBudWxsLFxuICByZXBlYXQ6IGZhbHNlLFxuICBjdXJyZW50V29yZDogbnVsbCxcbiAgbWlzdGFrZXM6IDAsXG4gIHdvcmRzVXNlZDogW10sXG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1wbGF5Jyk7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGl0bGUuaW5uZXJUZXh0ID0gJ1N0YXJ0IGdhbWUnO1xuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgIHRoaXMuYm94U3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmJveFN0YXJzLmNsYXNzTGlzdC5hZGQoJ2JveC1zdGFycycpO1xuXG4gICAgdGhpcy5jb3JyZWN0QW5zd2VyID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvY29ycmVjdC5tcDMnKTtcbiAgICB0aGlzLndyb25nQW5zd2VyID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvZXJyb3IubXAzJyk7XG4gICAgdGhpcy5zb3VuZFdpbiA9IG5ldyBBdWRpbygnLi9hc3NldHMvc291bmRzL3N1Y2Nlc3MubXAzJyk7XG4gICAgdGhpcy5zb3VuZExvc2UgPSBuZXcgQXVkaW8oJy4vYXNzZXRzL3NvdW5kcy9mYWlsdXJlLm1wMycpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLmFwcGVuZENoaWxkKHRoaXMuc3RhcnRHYW1lQnV0dG9uKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuYXBwZW5kQ2hpbGQodGhpcy5ib3hTdGFycyk7XG5cbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlcGVhdCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRXb3JkLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlcGVhdCcpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLXBsYXkgPiBzcGFuJykuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgIHRoaXMucmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcGxheSgpIHtcbiAgICBjb25zdCBjdXJyZW50Q2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC13b3JkX19mcm9udCcpO1xuICAgIGN1cnJlbnRDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRXb3Jkcy5wdXNoKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKSk7XG4gICAgfSk7XG4gICAgdGhpcy5jdXJyZW50V29yZHMuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcblxuICAgIGxldCBjdXJyZW50V29yZCA9IDA7XG5cbiAgICBjb25zdCBwbGF5V29yZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFdvcmQgPSBuZXcgQXVkaW8oYC4vYXNzZXRzL3NvdW5kcy8ke3RoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXX0ubXAzYCk7XG4gICAgICB0aGlzLmN1cnJlbnRXb3JkLmxvYWQoKTtcbiAgICAgIHRoaXMuY3VycmVudFdvcmQucGxheSgpO1xuICAgIH07XG5cbiAgICBwbGF5V29yZCgpO1xuXG4gICAgY3VycmVudENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmIChjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykgPT09IHRoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXSkge1xuICAgICAgICAgIHRoaXMud29yZHNVc2VkLnB1c2godGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdKTtcbiAgICAgICAgICBzdGF0aXN0aWNzLmNvdW50aW5nU3RhdGlzdGljcyh0aGlzLmN1cnJlbnRXb3Jkc1tjdXJyZW50V29yZF0sICdjb3JyZWN0Jyk7XG4gICAgICAgICAgdGhpcy5jb3JyZWN0QW5zd2VyLnBsYXkoKTtcbiAgICAgICAgICBjYXJkLnN0eWxlLmZpbHRlciA9ICdibHVyKDVweCknO1xuXG4gICAgICAgICAgY29uc3Qgd2luU3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICB3aW5TdGFycy5zcmMgPSAnLi9hc3NldHMvaWNvbnMvc3Rhci13aW4uc3ZnJztcbiAgICAgICAgICB0aGlzLmJveFN0YXJzLmFwcGVuZENoaWxkKHdpblN0YXJzKTtcblxuICAgICAgICAgIGN1cnJlbnRXb3JkICs9IDE7XG4gICAgICAgICAgaWYgKGN1cnJlbnRXb3JkIDwgOCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChwbGF5V29yZCwgNTAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZmluaXNoR2FtZSgpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLndvcmRzVXNlZC5pbmNsdWRlcyhjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykpKSB7XG4gICAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdLCAnd3JvbmcnKTtcbiAgICAgICAgICB0aGlzLm1pc3Rha2VzICs9IDE7XG4gICAgICAgICAgY29uc3Qgd2luU3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICB3aW5TdGFycy5zcmMgPSAnLi9hc3NldHMvaWNvbnMvc3Rhci5zdmcnO1xuICAgICAgICAgIHRoaXMuYm94U3RhcnMuYXBwZW5kQ2hpbGQod2luU3RhcnMpO1xuXG4gICAgICAgICAgdGhpcy53cm9uZ0Fuc3dlci5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIGZpbmlzaEdhbWUoKSB7XG4gICAgZ2FtZUZpZWxkLnJlbW92ZUNvbnRlbnQoKTtcbiAgICB0aGlzLmRlbGV0ZUdhbWVFbGVtZW50cygpO1xuXG4gICAgbGV0IHNwYW47XG4gICAgbGV0IHNyYztcbiAgICBpZiAodGhpcy5taXN0YWtlcyA9PT0gMCkge1xuICAgICAgc3BhbiA9ICdDb25ncmF0dWxhdGlvbnMhIFlvdSB3aW4hJztcbiAgICAgIHNyYyA9ICcuL2Fzc2V0cy9pY29ucy9zdWNjZXNzLnN2Zyc7XG4gICAgICB0aGlzLnNvdW5kV2luLnBsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3BhbiA9IGBZb3UgbG9zdCg6IFRyYWluIGFuZCB0cnkgYWdhaW4hPC9icj5cbiAgICAgICAgWW91IG1hZGUgJHt0aGlzLm1pc3Rha2VzfSBtaXN0YWtlKHMpLmA7XG4gICAgICBzcmMgPSAnLi9hc3NldHMvaWNvbnMvZmFpbHVyZS5zdmcnO1xuICAgICAgdGhpcy5zb3VuZExvc2UucGxheSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbmlzaFNjcmVlbiA9IGA8c3BhbiBjbGFzcz1cIndpbi10aXRsZVwiPiR7c3Bhbn08L3NwYW4+XG4gICAgPGRpdiBjbGFzcz1cIndpbi1pbWFnZVwiPjxpbWcgc3JjPVwiJHtzcmN9XCI+PC9kaXY+YDtcbiAgICBnYW1lRmllbGQuY29udGFpbmVyLmlubmVySFRNTCArPSBmaW5pc2hTY3JlZW47XG5cbiAgICBjb25zdCBidXR0b25zRmluaXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnV0dG9uc0ZpbmlzaC5jbGFzc0xpc3QuYWRkKCdidXR0b25zLWZpbmlzaCcpO1xuICAgIGNvbnN0IG5ld0dhbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ25ldy1nYW1lJyk7XG4gICAgbmV3R2FtZUJ1dHRvbi5pbm5lclRleHQgPSAnTmV3IGdhbWUnO1xuICAgIGNvbnN0IG1haW5NZW51QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbWFpbk1lbnVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbWFpbi1tZW51Jyk7XG4gICAgbWFpbk1lbnVCdXR0b24uaW5uZXJUZXh0ID0gJ01haW4gbWVudSc7XG4gICAgYnV0dG9uc0ZpbmlzaC5hcHBlbmRDaGlsZChuZXdHYW1lQnV0dG9uKTtcbiAgICBidXR0b25zRmluaXNoLmFwcGVuZENoaWxkKG1haW5NZW51QnV0dG9uKTtcblxuICAgIG5ld0dhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBnYW1lRmllbGQucmVtb3ZlQ29udGVudCgpO1xuICAgICAgZ2FtZUZpZWxkLnNldENvbnRlbnRDYXJkcyhnYW1lRmllbGQuYWN0aXZlQ2FyZCk7XG4gICAgfSk7XG5cbiAgICBtYWluTWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGdhbWVGaWVsZC5yZW1vdmVDb250ZW50KCk7XG4gICAgICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbTpmaXJzdC1jaGlsZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgZ2FtZUZpZWxkLmNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25zRmluaXNoKTtcbiAgICB0aGlzLm1pc3Rha2VzID0gMDtcbiAgICAvLyBnYW1lRmllbGQuY29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz1cImJ1dHRvbnMtZmluaXNoXCI+XG4gICAgLy8gICA8YnV0dG9uIGNsYXNzPVwibmV3LWdhbWVcIj5OZXcgZ2FtZTwvYnV0dG9uPlxuICAgIC8vICAgPGJ1dHRvbiBjbGFzcz1cIm1haW4tbWVudVwiPk1haW4gbWVudTwvYnV0dG9uPlxuICAgIC8vIDwvZGl2PmA7XG4gIH0sXG5cbiAgZGVsZXRlR2FtZUVsZW1lbnRzKCkge1xuICAgIGNvbnN0IHN3aXRjaGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN3aXRjaC1jb250YWluZXInKTtcbiAgICBpZiAoc3dpdGNoZXIpIHtcbiAgICAgIHN3aXRjaGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3dpdGNoZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGFydEdhbWVCdXR0b24pIHtcbiAgICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zdGFydEdhbWVCdXR0b24pO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3hTdGFycykge1xuICAgICAgdGhpcy5ib3hTdGFycy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuYm94U3RhcnMpO1xuICAgIH1cbiAgICB0aGlzLnJlcGVhdCA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudFdvcmRzID0gW107XG4gICAgdGhpcy5jdXJyZW50V29yZCA9IG51bGw7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbGF5R2FtZTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgcGxheUdhbWUgZnJvbSAnLi4vcGxheS1nYW1lJztcblxuY29uc3QgdG9nZ2xlID0ge1xuICBzd2l0Y2hCb3g6IG51bGwsXG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnN3aXRjaEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuc3dpdGNoQm94LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaC1jb250YWluZXInKTtcblxuICAgIGNvbnN0IHRyYWluTW9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRyYWluTW9kZS5jbGFzc0xpc3QuYWRkKCd0cmFpbi1tb2RlJywgJ2FjdGl2ZS1tb2RlJyk7XG4gICAgdHJhaW5Nb2RlLmlubmVyVGV4dCA9ICdUcmFpbic7XG4gICAgY29uc3QgZ2FtZU1vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBnYW1lTW9kZS5jbGFzc0xpc3QuYWRkKCdnYW1lLW1vZGUnKTtcbiAgICBnYW1lTW9kZS5pbm5lclRleHQgPSAnUGxheSc7XG5cbiAgICBjb25zdCBzd2l0Y2hlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgc3dpdGNoZXIuY2xhc3NMaXN0LmFkZCgnc3dpdGNoJyk7XG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY2hlY2tib3guY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpO1xuICAgICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC13b3JkJyk7XG4gICAgICBpZiAoY2hlY2tib3guY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGVja2VkJykpIHtcbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgICAgIGNhcmQuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4JztcbiAgICAgICAgfSk7XG4gICAgICAgIHBsYXlHYW1lLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9ICcyODBweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1wbGF5JykpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJveC1zdGFycycpKTtcbiAgICAgIH1cblxuICAgICAgdHJhaW5Nb2RlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1tb2RlJyk7XG4gICAgICBnYW1lTW9kZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtbW9kZScpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcicsICdyb3VuZCcpO1xuICAgIHN3aXRjaGVyLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICBzd2l0Y2hlci5hcHBlbmRDaGlsZChzcGFuKTtcblxuICAgIHRoaXMuc3dpdGNoQm94LmFwcGVuZENoaWxkKHRyYWluTW9kZSk7XG4gICAgdGhpcy5zd2l0Y2hCb3guYXBwZW5kQ2hpbGQoc3dpdGNoZXIpO1xuICAgIHRoaXMuc3dpdGNoQm94LmFwcGVuZENoaWxkKGdhbWVNb2RlKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKS5wcmVwZW5kKHRoaXMuc3dpdGNoQm94KTtcbiAgfSxcblxuICByZW1vdmVTd2l0Y2hlcigpIHtcbiAgICBjb25zdCBzd2l0Y2hlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2gtY29udGFpbmVyJyk7XG4gICAgaWYgKHN3aXRjaGVyKSB7XG4gICAgICBzd2l0Y2hlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN3aXRjaGVyKTtcbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b2dnbGU7XG4iLCJpbXBvcnQgVGl0bGVDYXJkIGZyb20gJy4vY29tcG9uZW50cy90aXRsZS1jYXJkJztcbmltcG9ydCBDYXJkIGZyb20gJy4vY29tcG9uZW50cy9jYXJkJztcbmltcG9ydCB0b29nbGUgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaCc7XG5cbmNvbnN0IGdhbWVGaWVsZCA9IHtcbiAgY29udGFpbmVyOiBudWxsLFxuICBhY3RpdmVDYXJkOiBudWxsLFxuICB0aXRsZToge1xuICAgIDA6ICdBY3Rpb24gKHNldCBBKScsXG4gICAgMTogJ0FjdGlvbiAoc2V0IEIpJyxcbiAgICAyOiAnQWN0aW9uIChzZXQgQyknLFxuICAgIDM6ICdBZGplY3RpdmUnLFxuICAgIDQ6ICdBbmltYWwgKHNldCBBKScsXG4gICAgNTogJ0FuaW1hbCAoc2V0IEIpJyxcbiAgICA2OiAnQ2xvdGhlcycsXG4gICAgNzogJ0Vtb3Rpb24nLFxuICB9LFxuXG4gIGltYWdlczoge1xuICAgIDA6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hY3Rpb25BLmpwZycsXG4gICAgMTogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FjdGlvbkIuanBnJyxcbiAgICAyOiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYWN0aW9uQy5qcGcnLFxuICAgIDM6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hZGplY3RpdmUuanBnJyxcbiAgICA0OiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYW5pbWFsQS5qcGcnLFxuICAgIDU6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hbmltYWxCLmpwZycsXG4gICAgNjogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2Nsb3RoZXMuanBnJyxcbiAgICA3OiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvZW1vdGlvbi5qcGcnLFxuICB9LFxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyJyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICB0aGlzLnNldFRpdGxlQ2FyZHMoKTtcbiAgfSxcblxuICBzZXRUaXRsZUNhcmRzKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IFRpdGxlQ2FyZCh0aGlzLmltYWdlc1tpXSwgdGhpcy50aXRsZVtpXSwgaSk7XG4gICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDb250ZW50KCk7XG4gICAgICAgIHRoaXMuYWN0aXZlQ2FyZCA9IGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpO1xuICAgICAgICB0aGlzLnNldENvbnRlbnRDYXJkcyh0aGlzLmFjdGl2ZUNhcmQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29udGVudENhcmRzKGFjdGl2ZUNhcmQpIHtcbiAgICB0b29nbGUuaW5pdCgpO1xuXG4gICAgZmV0Y2goJy4vYXNzZXRzL2pzb24vY2FyZHMuanNvbicpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzdWx0W2FjdGl2ZUNhcmRdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YVtpXS5pbWFnZSwgZGF0YVtpXS53b3JkLCBkYXRhW2ldLnRyYW5zbGF0aW9uLCBpKTtcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkLnJlbmRlcigpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0sXG5cbiAgcmVtb3ZlQ29udGVudCgpIHtcbiAgICBjb25zdCBjdXJyZW50Q2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJyk7XG4gICAgd2hpbGUgKGN1cnJlbnRDYXJkcy5maXJzdENoaWxkKSB7XG4gICAgICBjdXJyZW50Q2FyZHMucmVtb3ZlQ2hpbGQoY3VycmVudENhcmRzLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfSxcbn07XG5cbmdhbWVGaWVsZC5pbml0KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVGaWVsZDtcbiIsImNvbnN0IGJ1cmdlckljb24gPSB7XG4gIGJ1cmdlckJveDogbnVsbCxcbiAgYnV0dG9uT2ZmOiB0cnVlLFxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5idXJnZXJCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmJ1cmdlckJveC5jbGFzc05hbWUgPSAnYnVyZ2VyLW1lbnVfX2J1dHRvbic7XG5cbiAgICBjb25zdCBmaXJzdExJbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaXJzdExJbmUuY2xhc3NOYW1lID0gJ2ZpcnN0LWxpbmUnO1xuICAgIGNvbnN0IHNlY29uZExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzZWNvbmRMaW5lLmNsYXNzTmFtZSA9ICdzZWNvbmQtbGluZSc7XG4gICAgY29uc3QgdGhpcmRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcmRMaW5lLmNsYXNzTmFtZSA9ICd0aGlyZC1saW5lJztcblxuICAgIHRoaXMuYnVyZ2VyQm94LmFwcGVuZENoaWxkKGZpcnN0TEluZSk7XG4gICAgdGhpcy5idXJnZXJCb3guYXBwZW5kQ2hpbGQoc2Vjb25kTGluZSk7XG4gICAgdGhpcy5idXJnZXJCb3guYXBwZW5kQ2hpbGQodGhpcmRMaW5lKTtcblxuICAgIHRoaXMuYnVyZ2VyQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuYnV0dG9uT2ZmKSB7XG4gICAgICAgIGZpcnN0TEluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgxM3B4KSByb3RhdGUoNDVkZWcpJztcbiAgICAgICAgc2Vjb25kTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtNDBweCknO1xuICAgICAgICB0aGlyZExpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTEzcHgpIHJvdGF0ZSgtNDVkZWcpJztcblxuICAgICAgICAvLyBtb3ZlbWVudCBidXJnZXItbWVudVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLW1lbnUnKS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgwKSc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLWRpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuYnV0dG9uT2ZmID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdExJbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCkgcm90YXRlKDApJztcbiAgICAgICAgc2Vjb25kTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgwKSc7XG4gICAgICAgIHRoaXJkTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSByb3RhdGUoMCknO1xuXG4gICAgICAgIC8vIG1vdmVtZW50IGJ1cmdlci1tZW51XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudScpLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0zMjBweCknO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKS5jbGFzc0xpc3QuYWRkKCdtb2RhbC1kaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLmJ1dHRvbk9mZiA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBidXJnZXJCb3guYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdhc2Rhc2RhcycpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gYWRkIGJ1cmdlci1pY29uIHRvIHBhZ2VcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIC53cmFwcGVyJykucHJlcGVuZCh0aGlzLmJ1cmdlckJveCk7XG4gIH0sXG59O1xuXG5idXJnZXJJY29uLmluaXQoKTtcblxuZXhwb3J0IGRlZmF1bHQgYnVyZ2VySWNvbjtcbiIsImltcG9ydCBnYW1lRmllbGQgZnJvbSAnLi9nYW1lLWZpZWxkJztcbmltcG9ydCBidXJnZXJJY29uIGZyb20gJy4vY29tcG9uZW50cy9idXJnZXItaWNvbic7XG5pbXBvcnQgdG9vZ2xlIGZyb20gJy4vY29tcG9uZW50cy9zd2l0Y2gnO1xuaW1wb3J0IHN0YXRpc3RpY3MgZnJvbSAnLi9zdGF0aXN0aWNzJztcbmltcG9ydCBwbGF5R2FtZSBmcm9tICcuL3BsYXktZ2FtZSc7XG5cbmNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24taXRlbScpO1xubGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdhbWVGaWVsZC5yZW1vdmVDb250ZW50KCk7XG4gICAgYnVyZ2VySWNvbi5idXJnZXJCb3guY2xpY2soKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykgPT09ICdtYWluJykge1xuICAgICAgdG9vZ2xlLnJlbW92ZVN3aXRjaGVyKCk7XG4gICAgICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuICAgIH0gZWxzZSBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykgPT09ICdzdGF0aXN0aWNzJykge1xuICAgICAgdG9vZ2xlLnJlbW92ZVN3aXRjaGVyKCk7XG4gICAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICAgIGNvbnN0IGRhdGFGb3JUYWJsZSA9IHN0YXRpc3RpY3Muc29ydE9iamVjdChzdGF0KTtcbiAgICAgIHN0YXRpc3RpY3MuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDEpJykuaW5uZXJIVE1MID0gJyZkYXJyOyBXb3JkJztcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZUZpZWxkLnNldENvbnRlbnRDYXJkcyhsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZScpO1xudGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGdhbWVGaWVsZC5yZW1vdmVDb250ZW50KCk7XG4gIHBsYXlHYW1lLmRlbGV0ZUdhbWVFbGVtZW50cygpO1xuICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW0uYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW06Zmlyc3QtY2hpbGQnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==