(()=>{"use strict";(()=>{function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.title=r,this.number=n}var r,n;return r=t,(n=[{key:"render",value:function(){return'<div class="card" data-number="'.concat(this.number,'">\n      <div class="card__image"><img src="').concat(this.image,'"></div>\n      <span class="card__name">').concat(this.title,"</span>\n    </div>")}}])&&e(r.prototype,n),t}();function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"render",value:function(){return'<div class="switch-container">\n      <div class="train-mode active-mode">Train</div>\n      <label class="switch">\n        <input type="checkbox">\n        <span class="slider round"></span>\n      </label>\n      <div class="game-mode">Play</div>\n    </div>'}}],null&&r(t.prototype,null),n&&r(t,n),e}();const a={startGameButton:null,boxStars:null,currentWords:[],correctAnswer:null,wrongAnswer:null,soundWin:null,soundLose:null,repeat:null,currentWord:null,mistakes:0,wordsUsed:[],repeatMode:!1,init:function(){var e=this;this.repeat=!1,this.currentWords=[],this.currentWord=null,this.wordsUsed=[],this.startGameButton=document.createElement("button"),this.startGameButton.classList.add("button-play"),this.startGameButton.innerText="Start game",this.boxStars=document.createElement("div"),this.boxStars.classList.add("box-stars"),this.correctAnswer=new Audio("./assets/sounds/correct.mp3"),this.wrongAnswer=new Audio("./assets/sounds/error.mp3"),this.soundWin=new Audio("./assets/sounds/success.mp3"),this.soundLose=new Audio("./assets/sounds/failure.mp3"),document.querySelector(".container .wrapper").appendChild(this.startGameButton),document.querySelector(".container .wrapper").appendChild(this.boxStars),this.startGameButton.addEventListener("click",(function(){e.repeat?e.currentWord.play():(e.startGameButton.classList.add("repeat"),e.repeat=!0,e.play())}))},play:function(){var e=this,t=document.querySelectorAll(".card-word__front");t.forEach((function(t){e.currentWords.push(t.getAttribute("data-name"))})),this.currentWords.sort((function(){return Math.random()-.5}));var r=0,n=function(){e.currentWord=new Audio("./assets/sounds/".concat(e.currentWords[r],".mp3")),e.currentWord.load(),e.currentWord.play()};n(),t.forEach((function(t){t.addEventListener("click",(function(){if(t.getAttribute("data-name")===e.currentWords[r]){e.wordsUsed.push(e.currentWords[r]),c.countingStatistics(e.currentWords[r],"correct"),e.correctAnswer.play(),t.style.filter="blur(5px)";var a=document.createElement("img");a.src="./assets/icons/star-win.svg",e.boxStars.appendChild(a),document.querySelector(".card-word:nth-child(".concat(+t.getAttribute("data-number")+1,")")).classList.remove("active-card"),(r+=1)<e.currentWords.length?setTimeout(n,500):setTimeout((function(){e.finishGame()}),1e3)}else if(!e.wordsUsed.includes(t.getAttribute("data-name"))){c.countingStatistics(e.currentWords[r],"wrong"),e.mistakes+=1;var i=document.createElement("img");i.src="./assets/icons/star.svg",e.boxStars.appendChild(i),e.wrongAnswer.play()}}))}))},finishGame:function(){var e,t,r=this;l.removeContent(),0===this.mistakes?(e="Congratulations! You win!",t="./assets/icons/success.svg",this.soundWin.play()):(e="You lost(: Train and try again!</br>\n        You made ".concat(this.mistakes," mistake(s)."),t="./assets/icons/failure.svg",this.soundLose.play());var n=document.querySelector(".container"),a='<span class="win-title">'.concat(e,'</span>\n    <div class="win-image"><img src="').concat(t,'"></div>');n.innerHTML+=a;var i=document.createElement("div");i.classList.add("buttons-finish");var o=document.createElement("button");o.classList.add("new-game"),o.innerText="New game";var s=document.createElement("button");s.classList.add("main-menu"),s.innerText="Main menu",i.appendChild(o),i.appendChild(s),o.addEventListener("click",(function(){r.repeatMode?c.repeatDifficultWords():l.setContentCards(l.activeCard)})),s.addEventListener("click",(function(){r.repeatMode=!1,l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),n.appendChild(i),this.mistakes=0}};var i={init:function(){fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(e){var t=e.flat(),r=[];t.forEach((function(e){var t={word:e.word,translation:e.translation,category:e.category,clicks:0,correct:0,wrong:0,percent:0,image:e.image};r.push(t)})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(r)))}))},countingStatistics:function(e,t){var r=JSON.parse(localStorage.getItem("english-for-kids"));r.forEach((function(r){if(r.word===e){switch(t){case"clicks":r.clicks+=1;break;case"correct":r.correct+=1;break;case"wrong":r.wrong+=1}r.wrong+r.correct>0&&(r.percent=100*r.wrong/(r.wrong+r.correct))}})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(r)))},buildingTable:function(e){for(var t=this,r=document.querySelector(".container");r.firstChild;)r.removeChild(r.firstChild);var n=document.createElement("div");n.classList.add("wrapper");var a=document.createElement("div");a.classList.add("panel-buttons");var i=document.createElement("button");i.classList.add("repeat-button"),i.innerText="Repeat difficult words";var c=document.createElement("button");c.classList.add("reset-button"),c.innerText="Reset",a.appendChild(i),a.appendChild(c);var o=document.createElement("table");o.classList.add("table"),n.appendChild(a),n.appendChild(o),r.appendChild(n),c.addEventListener("click",(function(){t.resetLocalStorage()})),i.addEventListener("click",(function(){t.repeatDifficultWords()})),o.innerHTML="<tr>\n      <th>Word</th>\n      <th>Translation</th>\n      <th>Category</th>\n      <th>Clicks</th>\n      <th>Correct</th>\n      <th>Wrong</th>\n      <th>% errors</th>\n    </tr>",e.forEach((function(e){o.innerHTML+="<tr>\n        <td>".concat(e.word,"</td>\n        <td>").concat(e.translation,"</td>\n        <td>").concat(e.category,"</td>\n        <td>").concat(e.clicks,"</td>\n        <td>").concat(e.correct,"</td>\n        <td>").concat(e.wrong,"</td>\n        <td>").concat(e.percent.toFixed(1),"</td>\n      </tr>")})),document.querySelectorAll("th").forEach((function(e){e.addEventListener("click",(function(){"↓"===e.innerText[0]?t.sortColumn(e.innerText.slice(2),!1):"↑"===e.innerText[0]?t.sortColumn(e.innerText.slice(2),!0):t.sortColumn(e.innerText,!0)}))}))},sortObject:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word";return e.sort((function(e,r){return e["".concat(t)]>r["".concat(t)]?1:e["".concat(t)]<r["".concat(t)]?-1:0})),e},sortColumn:function(e,t){var r=JSON.parse(localStorage.getItem("english-for-kids"));"% errors"===e&&(e="percent");var n,a,i=this.sortObject(r,e.toLowerCase());switch(t&&e.match(/Word|Translation|Category/)?(n="&darr;",this.buildingTable(i)):e.match(/Word|Translation|Category/)?(n="&uarr;",this.buildingTable(i.reverse())):t?(n="&darr;",this.buildingTable(i.reverse())):(n="&uarr;",this.buildingTable(i)),e){case"Word":a=document.querySelector("th:first-child");break;case"Translation":a=document.querySelector("th:nth-child(2)");break;case"Category":a=document.querySelector("th:nth-child(3)");break;case"Clicks":a=document.querySelector("th:nth-child(4)");break;case"Correct":a=document.querySelector("th:nth-child(5)");break;case"Wrong":a=document.querySelector("th:nth-child(6)");break;case"percent":a=document.querySelector("th:last-child")}a.innerHTML="".concat(n," ").concat(a.innerHTML)},repeatDifficultWords:function(){a.repeatMode=!0;for(var e=document.querySelector(".container");e.firstChild;)e.removeChild(e.firstChild);var t=document.createElement("div");t.classList.add("wrapper"),e.appendChild(t);var r=document.createElement("div");r.classList.add("cards");var i=JSON.parse(localStorage.getItem("english-for-kids")),c=this.sortObject(i,"wrong").reverse();if(0===c[0].wrong)t.innerHTML+='<div class="subtitle">There are no words here yet :-)</div>',setTimeout((function(){document.querySelector(".title").click()}),2e3);else{t.innerHTML+=n.render();for(var o=0;o<8;o+=1)if(0!==c[o].wrong){var d=new s(c[o].image,c[o].word,c[o].translation,o);r.appendChild(d.render())}t.appendChild(r);var l=document.querySelector("input[type=checkbox]");l.addEventListener("change",(function(){document.querySelector(".train-mode").classList.toggle("active-mode"),document.querySelector(".game-mode").classList.toggle("active-mode");var e=document.querySelectorAll(".card-word__front-image");l.checked?(e.forEach((function(e){e.style.height="260px"})),a.init()):(e.forEach((function(e){e.style.height="200px"})),document.querySelector(".container .wrapper").removeChild(document.querySelector(".button-play")),document.querySelector(".container .wrapper").removeChild(document.querySelector(".box-stars")))}))}},resetLocalStorage:function(){var e=JSON.parse(localStorage.getItem("english-for-kids")).map((function(e){return{word:e.word,translation:e.translation,category:e.category,clicks:0,correct:0,wrong:0,percent:0,image:e.image}}));this.buildingTable(this.sortObject(e)),localStorage.setItem("english-for-kids","".concat(JSON.stringify(e)))}};localStorage.getItem("english-for-kids")||i.init();const c=i;function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.image=t,this.word=r,this.translation=n,this.number=a,this.card=null,this.cardFront=null,this.cardBack=null}var t,r;return t=e,(r=[{key:"render",value:function(){var e=this;this.card=document.createElement("div"),this.card.classList.add("card-word","active-card");var t=(6*Math.random()-3).toFixed(1);this.card.setAttribute("style","transform: rotate(".concat(t,"deg);")),this.cardFront=document.createElement("div"),this.cardFront.classList.add("card-word__front"),this.cardFront.setAttribute("data-number","".concat(this.number)),this.cardFront.setAttribute("data-name","".concat(this.word));var r=document.createElement("div");r.classList.add("card-word__front-image");var n=document.createElement("img");n.src="./".concat(this.image),r.appendChild(n);var a=document.createElement("div");a.classList.add("card-word__front-name"),a.innerText="".concat(this.word);var i=document.querySelector("label > input");this.cardFront.addEventListener("click",(function(t){t.target.classList.contains("reverse-button")||i.checked||(c.countingStatistics(e.word,"clicks"),e.toVoice())}));var o=document.createElement("div");o.classList.add("reverse-button"),o.setAttribute("data-number","".concat(this.number)),o.addEventListener("click",(function(){e.reverseCard()})),this.cardFront.appendChild(r),this.cardFront.appendChild(a),this.cardFront.appendChild(o),this.cardBack=document.createElement("div"),this.cardBack.classList.add("card-word__back");var s=document.createElement("div");s.classList.add("card-word__back-image");var d=document.createElement("img");d.src="./".concat(this.image),s.appendChild(d);var l=document.createElement("div");return l.classList.add("card-word__back-name"),l.innerText="".concat(this.translation),this.cardBack.appendChild(s),this.cardBack.appendChild(l),this.card.appendChild(this.cardFront),this.card.appendChild(this.cardBack),this.card}},{key:"toVoice",value:function(){var e=new Audio("./assets/sounds/".concat(this.word,".mp3"));e.load(),e.play()}},{key:"reverseCard",value:function(){var e=this;this.cardFront.style.transform="rotateY(180deg)",this.cardBack.style.transform="rotateY(360deg)",this.card.addEventListener("mouseleave",(function(){e.cardFront.style.transform="rotateY(0deg)",e.cardBack.style.transform="rotateY(180deg)"}))}}])&&o(t.prototype,r),e}(),d={activeCard:null,title:{0:"Action (set A)",1:"Action (set B)",2:"Action (set C)",3:"Adjective",4:"Animal (set A)",5:"Animal (set B)",6:"Clothes",7:"Emotion"},images:{0:"./assets/images/categories/actionA.jpg",1:"./assets/images/categories/actionB.jpg",2:"./assets/images/categories/actionC.jpg",3:"./assets/images/categories/adjective.jpg",4:"./assets/images/categories/animalA.jpg",5:"./assets/images/categories/animalB.jpg",6:"./assets/images/categories/clothes.jpg",7:"./assets/images/categories/emotion.jpg"},setTitleCards:function(){var e=this;a.repeatMode=!1,this.removeContent();var r=document.createElement("div");r.classList.add("wrapper"),document.querySelector(".container").appendChild(r);var n=document.createElement("div");n.classList.add("cards-title");for(var i=0;i<8;i+=1){var c=new t(this.images[i],this.title[i],i);n.innerHTML+=c.render()}n.innerHTML+='<div class="subtitle">Hello! choose a category:</div>',r.appendChild(n),document.querySelectorAll(".card").forEach((function(t){t.addEventListener("click",(function(){e.removeContent(),e.activeCard=t.getAttribute("data-number"),e.setContentCards(e.activeCard)}))}))},setContentCards:function(e){a.repeatMode=!1,this.removeContent();var t=document.createElement("div");t.classList.add("wrapper"),t.innerHTML+=n.render(),document.querySelector(".container").appendChild(t);var r=document.createElement("div");r.classList.add("cards"),fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(n){for(var a=n[e],i=0;i<a.length;i+=1){var c=new s(a[i].image,a[i].word,a[i].translation,i);r.appendChild(c.render())}t.appendChild(r)}));var i=document.querySelector("input[type=checkbox]");i.addEventListener("change",(function(){document.querySelector(".train-mode").classList.toggle("active-mode"),document.querySelector(".game-mode").classList.toggle("active-mode");var e=document.querySelectorAll(".card-word__front-image");i.checked?(e.forEach((function(e){e.style.height="260px"})),a.init()):(e.forEach((function(e){e.style.height="200px"})),document.querySelector(".container .wrapper").removeChild(document.querySelector(".button-play")),document.querySelector(".container .wrapper").removeChild(document.querySelector(".box-stars")))}))},removeContent:function(){for(var e=document.querySelector(".container");e.firstChild;)e.removeChild(e.firstChild)}};d.setTitleCards();const l=d;var u=document.querySelector(".modal"),m=document.querySelectorAll(".navigation-item"),h={burgerBox:null,buttonOff:!0,init:function(){var e=this;this.burgerBox=document.createElement("div"),this.burgerBox.className="burger-menu__button";var t=document.createElement("div");t.className="first-line";var r=document.createElement("div");r.className="second-line";var n=document.createElement("div");n.className="third-line",this.burgerBox.appendChild(t),this.burgerBox.appendChild(r),this.burgerBox.appendChild(n),this.burgerBox.addEventListener("click",(function(){m.forEach((function(e){e.classList.toggle("navigation-item_open")})),document.querySelector(".burger-menu").classList.toggle("burger-menu_open"),e.buttonOff?(t.style.transform="translateY(13px) rotate(45deg)",r.style.transform="translateX(-40px)",n.style.transform="translateY(-13px) rotate(-45deg)",u.classList.remove("modal-disabled"),e.buttonOff=!1):(t.style.transform="translateY(0) rotate(0)",r.style.transform="translateX(0)",n.style.transform="translateY(0) rotate(0)",u.classList.add("modal-disabled"),e.buttonOff=!0)})),document.querySelector(".header .wrapper").prepend(this.burgerBox)}};h.init(),u.addEventListener("click",(function(){h.burgerBox.click()}));const v=h;document.querySelectorAll(".navigation-item").forEach((function(e){e.addEventListener("click",(function(){if(v.burgerBox.click(),document.querySelector(".navigation-item.active").classList.remove("active"),e.classList.add("active"),"main"===e.getAttribute("data-number"))l.setTitleCards();else if("statistics"===e.getAttribute("data-number")){var t=JSON.parse(localStorage.getItem("english-for-kids")),r=c.sortObject(t);c.buildingTable(r),document.querySelector("th:nth-child(1)").innerHTML="&darr; Word"}else l.removeContent(),l.setContentCards(e.getAttribute("data-number"))}))})),document.querySelector(".title").addEventListener("click",(function(){l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),document.addEventListener("DOMContentLoaded",(function(){fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(e){!function(e){for(var t=0;t<e.length;t+=1)(new Image).src="./".concat(e[t])}(e.flat().map((function(e){return e.image})))}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvdGl0bGUtY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvc3dpdGNoLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvcGxheS1nYW1lLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvc3RhdGlzdGljcy5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2dhbWUtZmllbGQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2J1cmdlci1pY29uLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvYnVyZ2VyLW1lbnUuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJUaXRsZUNhcmQiLCJpbWFnZSIsInRpdGxlIiwibnVtYmVyIiwidGhpcyIsIlN3aXRjaGVyIiwic3RhcnRHYW1lQnV0dG9uIiwiYm94U3RhcnMiLCJjdXJyZW50V29yZHMiLCJjb3JyZWN0QW5zd2VyIiwid3JvbmdBbnN3ZXIiLCJzb3VuZFdpbiIsInNvdW5kTG9zZSIsInJlcGVhdCIsImN1cnJlbnRXb3JkIiwibWlzdGFrZXMiLCJ3b3Jkc1VzZWQiLCJyZXBlYXRNb2RlIiwiaW5pdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVyVGV4dCIsIkF1ZGlvIiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJjdXJyZW50Q2FyZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImNhcmQiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJwbGF5V29yZCIsImxvYWQiLCJzdGF0aXN0aWNzIiwic3R5bGUiLCJmaWx0ZXIiLCJ3aW5TdGFycyIsInNyYyIsInJlbW92ZSIsImxlbmd0aCIsInNldFRpbWVvdXQiLCJmaW5pc2hHYW1lIiwiaW5jbHVkZXMiLCJzcGFuIiwiZ2FtZUZpZWxkIiwiY29udGFpbmVyIiwiZmluaXNoU2NyZWVuIiwiaW5uZXJIVE1MIiwiYnV0dG9uc0ZpbmlzaCIsIm5ld0dhbWVCdXR0b24iLCJtYWluTWVudUJ1dHRvbiIsImZldGNoIiwidGhlbiIsInJlc3VsdCIsImpzb24iLCJhbGxXb3JkcyIsImZsYXQiLCJjb21tb25BcnJheSIsIml0ZW0iLCJjdXJyZW50T2JqIiwid29yZCIsInRyYW5zbGF0aW9uIiwiY2F0ZWdvcnkiLCJjbGlja3MiLCJjb3JyZWN0Iiwid3JvbmciLCJwZXJjZW50IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb3VudGluZ1N0YXRpc3RpY3MiLCJzdGF0IiwicGFyc2UiLCJnZXRJdGVtIiwiYnVpbGRpbmdUYWJsZSIsImRhdGEiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzdGF0Q29udGFpbmVyIiwiYnV0dG9ucyIsInJlcGVhdEJ1dHRvbiIsInJlc2V0QnV0dG9uIiwidGFibGUiLCJyZXNldExvY2FsU3RvcmFnZSIsInJlcGVhdERpZmZpY3VsdFdvcmRzIiwicm93IiwidG9GaXhlZCIsImhlYWRpbmciLCJzb3J0Q29sdW1uIiwic2xpY2UiLCJzb3J0T2JqZWN0Iiwib2JqIiwia2V5IiwiYSIsImIiLCJkaXJlY3RPcmRlciIsImFycm93IiwiZGF0YUZvclRhYmxlIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsInJldmVyc2UiLCJwbGF5R2FtZSIsIndyYXBwZXIiLCJjYXJkc0NvbnRhaW5lciIsImNsaWNrIiwicmVuZGVyIiwiaSIsIkNhcmQiLCJpbnB1dCIsInRvZ2dsZSIsImNhcmRzIiwiY2hlY2tlZCIsImhlaWdodCIsInJlc2V0QXJyYXkiLCJtYXAiLCJjYXJkRnJvbnQiLCJjYXJkQmFjayIsInJhbmRvbVJvdGF0ZSIsInNldEF0dHJpYnV0ZSIsImNhcmRGcm9udEltYWdlIiwiaW1nRnJvbnQiLCJjYXJkRnJvbnROYW1lIiwiZ2FtZU1vZGUiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwidG9Wb2ljZSIsImNhcmRCdXR0b24iLCJyZXZlcnNlQ2FyZCIsImNhcmRCYWNrSW1hZ2UiLCJpbWciLCJjYXJkQmFja05hbWUiLCJhdWRpbyIsInRyYW5zZm9ybSIsImFjdGl2ZUNhcmQiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsImltYWdlcyIsInNldFRpdGxlQ2FyZHMiLCJyZW1vdmVDb250ZW50Iiwic2V0Q29udGVudENhcmRzIiwiY3VycmVudENvbnRlbnQiLCJtb2RhbFdpbmRvdyIsIm5hdmlnYXRpb25JdGVtcyIsImJ1cmdlckljb24iLCJidXJnZXJCb3giLCJidXR0b25PZmYiLCJjbGFzc05hbWUiLCJmaXJzdExJbmUiLCJzZWNvbmRMaW5lIiwidGhpcmRMaW5lIiwicHJlcGVuZCIsImxpbmsiLCJhcnIiLCJJbWFnZSIsInByZWxvYWRJbWFnZXMiXSwibWFwcGluZ3MiOiJtTUFBcUJBLEUsV0FDbkIsV0FBWUMsRUFBT0MsRUFBT0MsSSw0RkFBUSxTQUNoQ0MsS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0YsTUFBUUEsRUFDYkUsS0FBS0QsT0FBU0EsRSxzREFTZCxNQUxhLGtDQUFILE9BQXFDQyxLQUFLRCxPQUExQyx3REFDNkJDLEtBQUtILE1BRGxDLG9EQUVtQkcsS0FBS0YsTUFGeEIsNEIsZ01DUk9HLEUsbUxBVWpCLE1BUmdCLDJRLHlDQ3lKcEIsUUF2SmlCLENBQ2ZDLGdCQUFpQixLQUNqQkMsU0FBVSxLQUNWQyxhQUFjLEdBQ2RDLGNBQWUsS0FDZkMsWUFBYSxLQUNiQyxTQUFVLEtBQ1ZDLFVBQVcsS0FD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STVERCxFQUFXNUksT0FFWDBJLEVBQVlqSSxpQkFBaUIsU0FBUyxXQUNwQ21JLEVBQVdDLFVBQVUvQyxXQUd2QixVQ2xEYzdGLFNBQVNXLGlCQUFpQixvQkFDbENDLFNBQVEsU0FBQ3VJLEdBQ2JBLEVBQUszSSxpQkFBaUIsU0FBUyxXQUs3QixHQUpBbUksb0JBQ0EzSSxTQUFTTSxjQUFjLDJCQUEyQkosVUFBVXdCLE9BQU8sVUFDbkV5SCxFQUFLakosVUFBVUMsSUFBSSxVQUVzQixTQUFyQ2dKLEVBQUtwSSxhQUFhLGVBQ3BCaUIsdUJBQ0ssR0FBeUMsZUFBckNtSCxFQUFLcEksYUFBYSxlQUFpQyxDQUM1RCxJQUFNNkMsRUFBT0gsS0FBS0ksTUFBTU4sYUFBYU8sUUFBUSxxQkFDdkN3QixFQUFlakUsYUFBc0J1QyxHQUMzQ3ZDLGdCQUF5QmlFLEdBQ3pCdEYsU0FBU00sY0FBYyxtQkFBbUI2QixVQUFZLG1CQUV0REgsa0JBQ0FBLGtCQUEwQm1ILEVBQUtwSSxhQUFhLHNCQUtwQ2YsU0FBU00sY0FBYyxVQUMvQkUsaUJBQWlCLFNBQVMsV0FDOUJ3QixrQkFFQWhDLFNBQVNNLGNBQWMsMkJBQTJCSixVQUFVd0IsT0FBTyxVQUNuRTFCLFNBQVNNLGNBQWMsZ0NBQWdDSixVQUFVQyxJQUFJLGFDeEJ2RUgsU0FBU1EsaUJBQWlCLG9CQUFvQixXQUM1QytCLE1BQU0sNEJBQ0hDLE1BQUssU0FBQ0MsR0FBRCxPQUFZQSxFQUFPQyxVQUN4QkYsTUFBSyxTQUFDQyxJQUdMLFNBQXVCMkcsR0FDckIsSUFBSyxJQUFJckQsRUFBSSxFQUFHQSxFQUFJcUQsRUFBSXpILE9BQVFvRSxHQUFLLEdBQ3JCLElBQUlzRCxPQUNaNUgsSUFBTixZQUFpQjJILEVBQUlyRCxJQUd6QnVELENBUmU3RyxFQUFPRyxPQUFPMkQsS0FBSSxTQUFDekQsR0FBRCxPQUFVQSxFQUFLaEUsaUIiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGl0bGVDYXJkIHtcbiAgY29uc3RydWN0b3IoaW1hZ2UsIHRpdGxlLCBudW1iZXIpIHtcbiAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNhcmQgPSBgPGRpdiBjbGFzcz1cImNhcmRcIiBkYXRhLW51bWJlcj1cIiR7dGhpcy5udW1iZXJ9XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZF9faW1hZ2VcIj48aW1nIHNyYz1cIiR7dGhpcy5pbWFnZX1cIj48L2Rpdj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZF9fbmFtZVwiPiR7dGhpcy50aXRsZX08L3NwYW4+XG4gICAgPC9kaXY+YDtcblxuICAgIHJldHVybiBjYXJkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTd2l0Y2hlciB7XG4gIHN0YXRpYyByZW5kZXIoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGA8ZGl2IGNsYXNzPVwic3dpdGNoLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRyYWluLW1vZGUgYWN0aXZlLW1vZGVcIj5UcmFpbjwvZGl2PlxuICAgICAgPGxhYmVsIGNsYXNzPVwic3dpdGNoXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzbGlkZXIgcm91bmRcIj48L3NwYW4+XG4gICAgICA8L2xhYmVsPlxuICAgICAgPGRpdiBjbGFzcz1cImdhbWUtbW9kZVwiPlBsYXk8L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IHN0YXRpc3RpY3MgZnJvbSAnLi9zdGF0aXN0aWNzJztcbmltcG9ydCBnYW1lRmllbGQgZnJvbSAnLi9nYW1lLWZpZWxkJztcblxuY29uc3QgcGxheUdhbWUgPSB7XG4gIHN0YXJ0R2FtZUJ1dHRvbjogbnVsbCxcbiAgYm94U3RhcnM6IG51bGwsXG4gIGN1cnJlbnRXb3JkczogW10sXG4gIGNvcnJlY3RBbnN3ZXI6IG51bGwsXG4gIHdyb25nQW5zd2VyOiBudWxsLFxuICBzb3VuZFdpbjogbnVsbCxcbiAgc291bmRMb3NlOiBudWxsLFxuICByZXBlYXQ6IG51bGwsXG4gIGN1cnJlbnRXb3JkOiBudWxsLFxuICBtaXN0YWtlczogMCxcbiAgd29yZHNVc2VkOiBbXSxcbiAgcmVwZWF0TW9kZTogZmFsc2UsXG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnJlcGVhdCA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudFdvcmRzID0gW107XG4gICAgdGhpcy5jdXJyZW50V29yZCA9IG51bGw7XG4gICAgdGhpcy53b3Jkc1VzZWQgPSBbXTtcblxuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgdGhpcy5zdGFydEdhbWVCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uLXBsYXknKTtcbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbi5pbm5lclRleHQgPSAnU3RhcnQgZ2FtZSc7XG5cbiAgICB0aGlzLmJveFN0YXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5ib3hTdGFycy5jbGFzc0xpc3QuYWRkKCdib3gtc3RhcnMnKTtcblxuICAgIHRoaXMuY29ycmVjdEFuc3dlciA9IG5ldyBBdWRpbygnLi9hc3NldHMvc291bmRzL2NvcnJlY3QubXAzJyk7XG4gICAgdGhpcy53cm9uZ0Fuc3dlciA9IG5ldyBBdWRpbygnLi9hc3NldHMvc291bmRzL2Vycm9yLm1wMycpO1xuICAgIHRoaXMuc291bmRXaW4gPSBuZXcgQXVkaW8oJy4vYXNzZXRzL3NvdW5kcy9zdWNjZXNzLm1wMycpO1xuICAgIHRoaXMuc291bmRMb3NlID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvZmFpbHVyZS5tcDMnKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIgLndyYXBwZXInKS5hcHBlbmRDaGlsZCh0aGlzLnN0YXJ0R2FtZUJ1dHRvbik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lciAud3JhcHBlcicpLmFwcGVuZENoaWxkKHRoaXMuYm94U3RhcnMpO1xuXG4gICAgdGhpcy5zdGFydEdhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5yZXBlYXQpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50V29yZC5wbGF5KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZXBlYXQnKTtcbiAgICAgICAgdGhpcy5yZXBlYXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBwbGF5KCkge1xuICAgIGNvbnN0IGN1cnJlbnRDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLXdvcmRfX2Zyb250Jyk7XG4gICAgY3VycmVudENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFdvcmRzLnB1c2goY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpKTtcbiAgICB9KTtcbiAgICB0aGlzLmN1cnJlbnRXb3Jkcy5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuXG4gICAgbGV0IGN1cnJlbnRXb3JkID0gMDtcblxuICAgIGNvbnN0IHBsYXlXb3JkID0gKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50V29yZCA9IG5ldyBBdWRpbyhgLi9hc3NldHMvc291bmRzLyR7dGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdfS5tcDNgKTtcbiAgICAgIHRoaXMuY3VycmVudFdvcmQubG9hZCgpO1xuICAgICAgdGhpcy5jdXJyZW50V29yZC5wbGF5KCk7XG4gICAgfTtcblxuICAgIHBsYXlXb3JkKCk7XG5cbiAgICBjdXJyZW50Q2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnKSA9PT0gdGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdKSB7XG4gICAgICAgICAgdGhpcy53b3Jkc1VzZWQucHVzaCh0aGlzLmN1cnJlbnRXb3Jkc1tjdXJyZW50V29yZF0pO1xuICAgICAgICAgIHN0YXRpc3RpY3MuY291bnRpbmdTdGF0aXN0aWNzKHRoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXSwgJ2NvcnJlY3QnKTtcbiAgICAgICAgICB0aGlzLmNvcnJlY3RBbnN3ZXIucGxheSgpO1xuICAgICAgICAgIGNhcmQuc3R5bGUuZmlsdGVyID0gJ2JsdXIoNXB4KSc7XG5cbiAgICAgICAgICBjb25zdCB3aW5TdGFycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgIHdpblN0YXJzLnNyYyA9ICcuL2Fzc2V0cy9pY29ucy9zdGFyLXdpbi5zdmcnO1xuICAgICAgICAgIHRoaXMuYm94U3RhcnMuYXBwZW5kQ2hpbGQod2luU3RhcnMpO1xuXG4gICAgICAgICAgY29uc3QgYWN0aXZlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jYXJkLXdvcmQ6bnRoLWNoaWxkKCR7K2NhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpICsgMX0pYCk7XG4gICAgICAgICAgYWN0aXZlQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtY2FyZCcpO1xuXG4gICAgICAgICAgY3VycmVudFdvcmQgKz0gMTtcbiAgICAgICAgICBpZiAoY3VycmVudFdvcmQgPCB0aGlzLmN1cnJlbnRXb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocGxheVdvcmQsIDUwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmZpbmlzaEdhbWUoKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy53b3Jkc1VzZWQuaW5jbHVkZXMoY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpKSkge1xuICAgICAgICAgIHN0YXRpc3RpY3MuY291bnRpbmdTdGF0aXN0aWNzKHRoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXSwgJ3dyb25nJyk7XG4gICAgICAgICAgdGhpcy5taXN0YWtlcyArPSAxO1xuICAgICAgICAgIGNvbnN0IHdpblN0YXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgd2luU3RhcnMuc3JjID0gJy4vYXNzZXRzL2ljb25zL3N0YXIuc3ZnJztcbiAgICAgICAgICB0aGlzLmJveFN0YXJzLmFwcGVuZENoaWxkKHdpblN0YXJzKTtcblxuICAgICAgICAgIHRoaXMud3JvbmdBbnN3ZXIucGxheSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICBmaW5pc2hHYW1lKCkge1xuICAgIGdhbWVGaWVsZC5yZW1vdmVDb250ZW50KCk7XG5cbiAgICBsZXQgc3BhbjtcbiAgICBsZXQgc3JjO1xuICAgIGlmICh0aGlzLm1pc3Rha2VzID09PSAwKSB7XG4gICAgICBzcGFuID0gJ0NvbmdyYXR1bGF0aW9ucyEgWW91IHdpbiEnO1xuICAgICAgc3JjID0gJy4vYXNzZXRzL2ljb25zL3N1Y2Nlc3Muc3ZnJztcbiAgICAgIHRoaXMuc291bmRXaW4ucGxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGFuID0gYFlvdSBsb3N0KDogVHJhaW4gYW5kIHRyeSBhZ2FpbiE8L2JyPlxuICAgICAgICBZb3UgbWFkZSAke3RoaXMubWlzdGFrZXN9IG1pc3Rha2UocykuYDtcbiAgICAgIHNyYyA9ICcuL2Fzc2V0cy9pY29ucy9mYWlsdXJlLnN2Zyc7XG4gICAgICB0aGlzLnNvdW5kTG9zZS5wbGF5KCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICBjb25zdCBmaW5pc2hTY3JlZW4gPSBgPHNwYW4gY2xhc3M9XCJ3aW4tdGl0bGVcIj4ke3NwYW59PC9zcGFuPlxuICAgIDxkaXYgY2xhc3M9XCJ3aW4taW1hZ2VcIj48aW1nIHNyYz1cIiR7c3JjfVwiPjwvZGl2PmA7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCArPSBmaW5pc2hTY3JlZW47XG5cbiAgICBjb25zdCBidXR0b25zRmluaXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnV0dG9uc0ZpbmlzaC5jbGFzc0xpc3QuYWRkKCdidXR0b25zLWZpbmlzaCcpO1xuICAgIGNvbnN0IG5ld0dhbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBuZXdHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ25ldy1nYW1lJyk7XG4gICAgbmV3R2FtZUJ1dHRvbi5pbm5lclRleHQgPSAnTmV3IGdhbWUnO1xuICAgIGNvbnN0IG1haW5NZW51QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgbWFpbk1lbnVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbWFpbi1tZW51Jyk7XG4gICAgbWFpbk1lbnVCdXR0b24uaW5uZXJUZXh0ID0gJ01haW4gbWVudSc7XG4gICAgYnV0dG9uc0ZpbmlzaC5hcHBlbmRDaGlsZChuZXdHYW1lQnV0dG9uKTtcbiAgICBidXR0b25zRmluaXNoLmFwcGVuZENoaWxkKG1haW5NZW51QnV0dG9uKTtcblxuICAgIG5ld0dhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5yZXBlYXRNb2RlKSB7XG4gICAgICAgIHN0YXRpc3RpY3MucmVwZWF0RGlmZmljdWx0V29yZHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdhbWVGaWVsZC5zZXRDb250ZW50Q2FyZHMoZ2FtZUZpZWxkLmFjdGl2ZUNhcmQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWFpbk1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcGVhdE1vZGUgPSBmYWxzZTtcbiAgICAgIGdhbWVGaWVsZC5zZXRUaXRsZUNhcmRzKCk7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW0uYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtOmZpcnN0LWNoaWxkJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uc0ZpbmlzaCk7XG4gICAgdGhpcy5taXN0YWtlcyA9IDA7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbGF5R2FtZTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgQ2FyZCBmcm9tICcuL2NvbXBvbmVudHMvY2FyZCc7XG5pbXBvcnQgU3dpdGNoZXIgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaCc7XG5pbXBvcnQgcGxheUdhbWUgZnJvbSAnLi9wbGF5LWdhbWUnO1xuXG5jb25zdCBzdGF0aXN0aWNzID0ge1xuICBpbml0KCkge1xuICAgIGZldGNoKCcuL2Fzc2V0cy9qc29uL2NhcmRzLmpzb24nKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgYWxsV29yZHMgPSByZXN1bHQuZmxhdCgpO1xuICAgICAgICBjb25zdCBjb21tb25BcnJheSA9IFtdO1xuICAgICAgICBhbGxXb3Jkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudE9iaiA9IHtcbiAgICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZCxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiBpdGVtLnRyYW5zbGF0aW9uLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksXG4gICAgICAgICAgICBjbGlja3M6IDAsXG4gICAgICAgICAgICBjb3JyZWN0OiAwLFxuICAgICAgICAgICAgd3Jvbmc6IDAsXG4gICAgICAgICAgICBwZXJjZW50OiAwLFxuICAgICAgICAgICAgaW1hZ2U6IGl0ZW0uaW1hZ2UsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb21tb25BcnJheS5wdXNoKGN1cnJlbnRPYmopO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnLCBgJHtKU09OLnN0cmluZ2lmeShjb21tb25BcnJheSl9YCk7XG4gICAgICB9KTtcbiAgfSxcblxuICBjb3VudGluZ1N0YXRpc3RpY3Mod29yZCwgY2F0ZWdvcnkpIHtcbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBzdGF0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChpdGVtLndvcmQgPT09IHdvcmQpIHtcbiAgICAgICAgc3dpdGNoIChjYXRlZ29yeSkge1xuICAgICAgICAgIGNhc2UgJ2NsaWNrcyc6XG4gICAgICAgICAgICBpdGVtLmNsaWNrcyArPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY29ycmVjdCc6XG4gICAgICAgICAgICBpdGVtLmNvcnJlY3QgKz0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dyb25nJzpcbiAgICAgICAgICAgIGl0ZW0ud3JvbmcgKz0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS53cm9uZyArIGl0ZW0uY29ycmVjdCA+IDApIHtcbiAgICAgICAgICBpdGVtLnBlcmNlbnQgPSAoaXRlbS53cm9uZyAqIDEwMCkgLyAoaXRlbS53cm9uZyArIGl0ZW0uY29ycmVjdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycsIGAke0pTT04uc3RyaW5naWZ5KHN0YXQpfWApO1xuICB9LFxuXG4gIGJ1aWxkaW5nVGFibGUoZGF0YSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHN0YXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd3JhcHBlcicpO1xuXG4gICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgncGFuZWwtYnV0dG9ucycpO1xuXG4gICAgY29uc3QgcmVwZWF0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgcmVwZWF0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlcGVhdC1idXR0b24nKTtcbiAgICByZXBlYXRCdXR0b24uaW5uZXJUZXh0ID0gJ1JlcGVhdCBkaWZmaWN1bHQgd29yZHMnO1xuXG4gICAgY29uc3QgcmVzZXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICByZXNldEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdyZXNldC1idXR0b24nKTtcbiAgICByZXNldEJ1dHRvbi5pbm5lclRleHQgPSAnUmVzZXQnO1xuXG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChyZXBlYXRCdXR0b24pO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuXG4gICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoJ3RhYmxlJyk7XG5cbiAgICAvLyBhZGQgZWxlbWVudHMgdG8gcGFnZVxuICAgIHN0YXRDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9ucyk7XG4gICAgc3RhdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRDb250YWluZXIpO1xuXG4gICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlc2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgfSk7XG5cbiAgICByZXBlYXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcGVhdERpZmZpY3VsdFdvcmRzKCk7XG4gICAgfSk7XG5cbiAgICAvLyByZW5kZXJpbmcgdGFibGVcbiAgICB0YWJsZS5pbm5lckhUTUwgPSBgPHRyPlxuICAgICAgPHRoPldvcmQ8L3RoPlxuICAgICAgPHRoPlRyYW5zbGF0aW9uPC90aD5cbiAgICAgIDx0aD5DYXRlZ29yeTwvdGg+XG4gICAgICA8dGg+Q2xpY2tzPC90aD5cbiAgICAgIDx0aD5Db3JyZWN0PC90aD5cbiAgICAgIDx0aD5Xcm9uZzwvdGg+XG4gICAgICA8dGg+JSBlcnJvcnM8L3RoPlxuICAgIDwvdHI+YDtcbiAgICBkYXRhLmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgdGFibGUuaW5uZXJIVE1MICs9IGA8dHI+XG4gICAgICAgIDx0ZD4ke3Jvdy53b3JkfTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy50cmFuc2xhdGlvbn08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cuY2F0ZWdvcnl9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LmNsaWNrc308L3RkPlxuICAgICAgICA8dGQ+JHtyb3cuY29ycmVjdH08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cud3Jvbmd9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LnBlcmNlbnQudG9GaXhlZCgxKX08L3RkPlxuICAgICAgPC90cj5gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdGFibGVIZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICB0YWJsZUhlYWQuZm9yRWFjaCgoaGVhZGluZykgPT4ge1xuICAgICAgaGVhZGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKGhlYWRpbmcuaW5uZXJUZXh0WzBdID09PSAn4oaTJykge1xuICAgICAgICAgIHRoaXMuc29ydENvbHVtbihoZWFkaW5nLmlubmVyVGV4dC5zbGljZSgyKSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRpbmcuaW5uZXJUZXh0WzBdID09PSAn4oaRJykge1xuICAgICAgICAgIHRoaXMuc29ydENvbHVtbihoZWFkaW5nLmlubmVyVGV4dC5zbGljZSgyKSwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGhlYWRpbmcuaW5uZXJUZXh0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc29ydE9iamVjdChvYmosIGtleSA9ICd3b3JkJykge1xuICAgIG9iai5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYVtgJHtrZXl9YF0gPiBiW2Ake2tleX1gXSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGlmIChhW2Ake2tleX1gXSA8IGJbYCR7a2V5fWBdKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBzb3J0Q29sdW1uKGtleSwgZGlyZWN0T3JkZXIpIHtcbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBpZiAoa2V5ID09PSAnJSBlcnJvcnMnKSB7XG4gICAgICBrZXkgPSAncGVyY2VudCc7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFGb3JUYWJsZSA9IHRoaXMuc29ydE9iamVjdChzdGF0LCBrZXkudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBsZXQgYXJyb3c7XG4gICAgaWYgKGRpcmVjdE9yZGVyICYmIGtleS5tYXRjaCgvV29yZHxUcmFuc2xhdGlvbnxDYXRlZ29yeS8pKSB7XG4gICAgICBhcnJvdyA9ICcmZGFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZSk7XG4gICAgfSBlbHNlIGlmIChrZXkubWF0Y2goL1dvcmR8VHJhbnNsYXRpb258Q2F0ZWdvcnkvKSkge1xuICAgICAgYXJyb3cgPSAnJnVhcnI7JztcbiAgICAgIHRoaXMuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUucmV2ZXJzZSgpKTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdE9yZGVyKSB7XG4gICAgICBhcnJvdyA9ICcmZGFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZS5yZXZlcnNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcnJvdyA9ICcmdWFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZSk7XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlO1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdXb3JkJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpmaXJzdC1jaGlsZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1RyYW5zbGF0aW9uJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoMiknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDYXRlZ29yeSc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDMpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2xpY2tzJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoNCknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDb3JyZWN0JzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoNSknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdXcm9uZyc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDYpJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGVyY2VudCc6XG4gICAgICAgIHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bGFzdC1jaGlsZCcpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aXRsZS5pbm5lckhUTUwgPSBgJHthcnJvd30gJHt0aXRsZS5pbm5lckhUTUx9YDtcbiAgfSxcblxuICByZXBlYXREaWZmaWN1bHRXb3JkcygpIHtcbiAgICBwbGF5R2FtZS5yZXBlYXRNb2RlID0gdHJ1ZTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyJyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYXJkcycpO1xuXG4gICAgY29uc3Qgc3RhdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZ2xpc2gtZm9yLWtpZHMnKSk7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuc29ydE9iamVjdChzdGF0LCAnd3JvbmcnKS5yZXZlcnNlKCk7XG4gICAgaWYgKGRhdGFbMF0ud3JvbmcgPT09IDApIHtcbiAgICAgIHdyYXBwZXIuaW5uZXJIVE1MICs9ICc8ZGl2IGNsYXNzPVwic3VidGl0bGVcIj5UaGVyZSBhcmUgbm8gd29yZHMgaGVyZSB5ZXQgOi0pPC9kaXY+JztcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKS5jbGljaygpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdyYXBwZXIuaW5uZXJIVE1MICs9IFN3aXRjaGVyLnJlbmRlcigpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGRhdGFbaV0ud3JvbmcgIT09IDApIHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YVtpXS5pbWFnZSwgZGF0YVtpXS53b3JkLCBkYXRhW2ldLnRyYW5zbGF0aW9uLCBpKTtcbiAgICAgICAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkLnJlbmRlcigpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChjYXJkc0NvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyYWluLW1vZGUnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtbW9kZScpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1tb2RlJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLW1vZGUnKTtcbiAgICAgICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC13b3JkX19mcm9udC1pbWFnZScpO1xuICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICAgIGNhcmQuc3R5bGUuaGVpZ2h0ID0gJzI2MHB4JztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwbGF5R2FtZS5pbml0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lciAud3JhcHBlcicpLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tcGxheScpKTtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJveC1zdGFycycpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHJlc2V0TG9jYWxTdG9yYWdlKCkge1xuICAgIGNvbnN0IHN0YXQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpO1xuICAgIGNvbnN0IHJlc2V0QXJyYXkgPSBzdGF0Lm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgIHdvcmQ6IGl0ZW0ud29yZCxcbiAgICAgIHRyYW5zbGF0aW9uOiBpdGVtLnRyYW5zbGF0aW9uLFxuICAgICAgY2F0ZWdvcnk6IGl0ZW0uY2F0ZWdvcnksXG4gICAgICBjbGlja3M6IDAsXG4gICAgICBjb3JyZWN0OiAwLFxuICAgICAgd3Jvbmc6IDAsXG4gICAgICBwZXJjZW50OiAwLFxuICAgICAgaW1hZ2U6IGl0ZW0uaW1hZ2UsXG4gICAgfSkpO1xuICAgIHRoaXMuYnVpbGRpbmdUYWJsZSh0aGlzLnNvcnRPYmplY3QocmVzZXRBcnJheSkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJywgYCR7SlNPTi5zdHJpbmdpZnkocmVzZXRBcnJheSl9YCk7XG4gIH0sXG59O1xuXG5pZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpIHtcbiAgc3RhdGlzdGljcy5pbml0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0YXRpc3RpY3M7XG4iLCJpbXBvcnQgc3RhdGlzdGljcyBmcm9tICcuLi9zdGF0aXN0aWNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGltYWdlLCB3b3JkLCB0cmFuc2xhdGlvbiwgbnVtYmVyKSB7XG4gICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuICAgIHRoaXMud29yZCA9IHdvcmQ7XG4gICAgdGhpcy50cmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uO1xuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICAgIHRoaXMuY2FyZCA9IG51bGw7XG4gICAgdGhpcy5jYXJkRnJvbnQgPSBudWxsO1xuICAgIHRoaXMuY2FyZEJhY2sgPSBudWxsO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmQnLCAnYWN0aXZlLWNhcmQnKTtcbiAgICBjb25zdCByYW5kb21Sb3RhdGUgPSAoTWF0aC5yYW5kb20oKSAqICgzIC0gKC0zKSkgLSAzKS50b0ZpeGVkKDEpO1xuICAgIHRoaXMuY2FyZC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYHRyYW5zZm9ybTogcm90YXRlKCR7cmFuZG9tUm90YXRlfWRlZyk7YCk7XG5cbiAgICB0aGlzLmNhcmRGcm9udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZEZyb250LmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQnKTtcbiAgICB0aGlzLmNhcmRGcm9udC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJywgYCR7dGhpcy5udW1iZXJ9YCk7XG4gICAgdGhpcy5jYXJkRnJvbnQuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCBgJHt0aGlzLndvcmR9YCk7XG5cbiAgICBjb25zdCBjYXJkRnJvbnRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRGcm9udEltYWdlLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQtaW1hZ2UnKTtcbiAgICBjb25zdCBpbWdGcm9udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltZ0Zyb250LnNyYyA9IGAuLyR7dGhpcy5pbWFnZX1gO1xuICAgIGNhcmRGcm9udEltYWdlLmFwcGVuZENoaWxkKGltZ0Zyb250KTtcblxuICAgIGNvbnN0IGNhcmRGcm9udE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkRnJvbnROYW1lLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fZnJvbnQtbmFtZScpO1xuICAgIGNhcmRGcm9udE5hbWUuaW5uZXJUZXh0ID0gYCR7dGhpcy53b3JkfWA7XG5cbiAgICBjb25zdCBnYW1lTW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsID4gaW5wdXQnKTtcblxuICAgIHRoaXMuY2FyZEZyb250LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3JldmVyc2UtYnV0dG9uJykgJiYgIWdhbWVNb2RlLmNoZWNrZWQpIHtcbiAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy53b3JkLCAnY2xpY2tzJyk7XG4gICAgICAgIHRoaXMudG9Wb2ljZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRCdXR0b24uY2xhc3NMaXN0LmFkZCgncmV2ZXJzZS1idXR0b24nKTtcbiAgICBjYXJkQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInLCBgJHt0aGlzLm51bWJlcn1gKTtcbiAgICBjYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5yZXZlcnNlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQuYXBwZW5kQ2hpbGQoY2FyZEZyb250SW1hZ2UpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRGcm9udE5hbWUpO1xuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRCdXR0b24pO1xuXG4gICAgdGhpcy5jYXJkQmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuY2FyZEJhY2suY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkX19iYWNrJyk7XG5cbiAgICBjb25zdCBjYXJkQmFja0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEJhY2tJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2JhY2staW1hZ2UnKTtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gYC4vJHt0aGlzLmltYWdlfWA7XG4gICAgY2FyZEJhY2tJbWFnZS5hcHBlbmRDaGlsZChpbWcpO1xuXG4gICAgY29uc3QgY2FyZEJhY2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEJhY2tOYW1lLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fYmFjay1uYW1lJyk7XG4gICAgY2FyZEJhY2tOYW1lLmlubmVyVGV4dCA9IGAke3RoaXMudHJhbnNsYXRpb259YDtcblxuICAgIHRoaXMuY2FyZEJhY2suYXBwZW5kQ2hpbGQoY2FyZEJhY2tJbWFnZSk7XG4gICAgdGhpcy5jYXJkQmFjay5hcHBlbmRDaGlsZChjYXJkQmFja05hbWUpO1xuXG4gICAgdGhpcy5jYXJkLmFwcGVuZENoaWxkKHRoaXMuY2FyZEZyb250KTtcbiAgICB0aGlzLmNhcmQuYXBwZW5kQ2hpbGQodGhpcy5jYXJkQmFjayk7XG5cbiAgICByZXR1cm4gdGhpcy5jYXJkO1xuICB9XG5cbiAgdG9Wb2ljZSgpIHtcbiAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhgLi9hc3NldHMvc291bmRzLyR7dGhpcy53b3JkfS5tcDNgKTtcbiAgICBhdWRpby5sb2FkKCk7XG4gICAgYXVkaW8ucGxheSgpO1xuICB9XG5cbiAgcmV2ZXJzZUNhcmQoKSB7XG4gICAgdGhpcy5jYXJkRnJvbnQuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMTgwZGVnKSc7XG4gICAgdGhpcy5jYXJkQmFjay5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlWSgzNjBkZWcpJztcbiAgICB0aGlzLmNhcmQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgIHRoaXMuY2FyZEZyb250LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDBkZWcpJztcbiAgICAgIHRoaXMuY2FyZEJhY2suc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMTgwZGVnKSc7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgVGl0bGVDYXJkIGZyb20gJy4vY29tcG9uZW50cy90aXRsZS1jYXJkJztcbmltcG9ydCBDYXJkIGZyb20gJy4vY29tcG9uZW50cy9jYXJkJztcbmltcG9ydCBTd2l0Y2hlciBmcm9tICcuL2NvbXBvbmVudHMvc3dpdGNoJztcbmltcG9ydCBwbGF5R2FtZSBmcm9tICcuL3BsYXktZ2FtZSc7XG5cbmNvbnN0IGdhbWVGaWVsZCA9IHtcbiAgYWN0aXZlQ2FyZDogbnVsbCxcbiAgdGl0bGU6IHtcbiAgICAwOiAnQWN0aW9uIChzZXQgQSknLFxuICAgIDE6ICdBY3Rpb24gKHNldCBCKScsXG4gICAgMjogJ0FjdGlvbiAoc2V0IEMpJyxcbiAgICAzOiAnQWRqZWN0aXZlJyxcbiAgICA0OiAnQW5pbWFsIChzZXQgQSknLFxuICAgIDU6ICdBbmltYWwgKHNldCBCKScsXG4gICAgNjogJ0Nsb3RoZXMnLFxuICAgIDc6ICdFbW90aW9uJyxcbiAgfSxcblxuICBpbWFnZXM6IHtcbiAgICAwOiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYWN0aW9uQS5qcGcnLFxuICAgIDE6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hY3Rpb25CLmpwZycsXG4gICAgMjogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FjdGlvbkMuanBnJyxcbiAgICAzOiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYWRqZWN0aXZlLmpwZycsXG4gICAgNDogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FuaW1hbEEuanBnJyxcbiAgICA1OiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYW5pbWFsQi5qcGcnLFxuICAgIDY6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9jbG90aGVzLmpwZycsXG4gICAgNzogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2Vtb3Rpb24uanBnJyxcbiAgfSxcblxuICBzZXRUaXRsZUNhcmRzKCkge1xuICAgIHBsYXlHYW1lLnJlcGVhdE1vZGUgPSBmYWxzZTtcbiAgICB0aGlzLnJlbW92ZUNvbnRlbnQoKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd3JhcHBlcicpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYXJkcy10aXRsZScpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgVGl0bGVDYXJkKHRoaXMuaW1hZ2VzW2ldLCB0aGlzLnRpdGxlW2ldLCBpKTtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmlubmVySFRNTCArPSBjYXJkLnJlbmRlcigpO1xuICAgIH1cbiAgICBjYXJkc0NvbnRhaW5lci5pbm5lckhUTUwgKz0gJzxkaXYgY2xhc3M9XCJzdWJ0aXRsZVwiPkhlbGxvISBjaG9vc2UgYSBjYXRlZ29yeTo8L2Rpdj4nO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkc0NvbnRhaW5lcik7XG5cbiAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkJyk7XG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDb250ZW50KCk7XG4gICAgICAgIHRoaXMuYWN0aXZlQ2FyZCA9IGNhcmQuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpO1xuICAgICAgICB0aGlzLnNldENvbnRlbnRDYXJkcyh0aGlzLmFjdGl2ZUNhcmQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29udGVudENhcmRzKGFjdGl2ZUNhcmQpIHtcbiAgICBwbGF5R2FtZS5yZXBlYXRNb2RlID0gZmFsc2U7XG4gICAgdGhpcy5yZW1vdmVDb250ZW50KCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXInKTtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IFN3aXRjaGVyLnJlbmRlcigpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYXJkcycpO1xuXG4gICAgZmV0Y2goJy4vYXNzZXRzL2pzb24vY2FyZHMuanNvbicpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzdWx0W2FjdGl2ZUNhcmRdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YVtpXS5pbWFnZSwgZGF0YVtpXS53b3JkLCBkYXRhW2ldLnRyYW5zbGF0aW9uLCBpKTtcbiAgICAgICAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkLnJlbmRlcigpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZHNDb250YWluZXIpO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJyk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyYWluLW1vZGUnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtbW9kZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUtbW9kZScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1tb2RlJyk7XG4gICAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLXdvcmRfX2Zyb250LWltYWdlJyk7XG4gICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSAnMjYwcHgnO1xuICAgICAgICB9KTtcbiAgICAgICAgcGxheUdhbWUuaW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgICAgIGNhcmQuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4JztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lciAud3JhcHBlcicpLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tcGxheScpKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lciAud3JhcHBlcicpLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3gtc3RhcnMnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVtb3ZlQ29udGVudCgpIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICB3aGlsZSAoY3VycmVudENvbnRlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgY3VycmVudENvbnRlbnQucmVtb3ZlQ2hpbGQoY3VycmVudENvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9LFxufTtcblxuZ2FtZUZpZWxkLnNldFRpdGxlQ2FyZHMoKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUZpZWxkO1xuIiwiY29uc3QgbW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbmNvbnN0IG5hdmlnYXRpb25JdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLWl0ZW0nKTtcblxuY29uc3QgYnVyZ2VySWNvbiA9IHtcbiAgYnVyZ2VyQm94OiBudWxsLFxuICBidXR0b25PZmY6IHRydWUsXG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmJ1cmdlckJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuYnVyZ2VyQm94LmNsYXNzTmFtZSA9ICdidXJnZXItbWVudV9fYnV0dG9uJztcblxuICAgIGNvbnN0IGZpcnN0TEluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGZpcnN0TEluZS5jbGFzc05hbWUgPSAnZmlyc3QtbGluZSc7XG4gICAgY29uc3Qgc2Vjb25kTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNlY29uZExpbmUuY2xhc3NOYW1lID0gJ3NlY29uZC1saW5lJztcbiAgICBjb25zdCB0aGlyZExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlyZExpbmUuY2xhc3NOYW1lID0gJ3RoaXJkLWxpbmUnO1xuXG4gICAgdGhpcy5idXJnZXJCb3guYXBwZW5kQ2hpbGQoZmlyc3RMSW5lKTtcbiAgICB0aGlzLmJ1cmdlckJveC5hcHBlbmRDaGlsZChzZWNvbmRMaW5lKTtcbiAgICB0aGlzLmJ1cmdlckJveC5hcHBlbmRDaGlsZCh0aGlyZExpbmUpO1xuXG4gICAgdGhpcy5idXJnZXJCb3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBuYXZpZ2F0aW9uSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdmlnYXRpb24taXRlbV9vcGVuJyk7XG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudScpLmNsYXNzTGlzdC50b2dnbGUoJ2J1cmdlci1tZW51X29wZW4nKTtcbiAgICAgIGlmICh0aGlzLmJ1dHRvbk9mZikge1xuICAgICAgICBmaXJzdExJbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMTNweCkgcm90YXRlKDQ1ZGVnKSc7XG4gICAgICAgIHNlY29uZExpbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLTQwcHgpJztcbiAgICAgICAgdGhpcmRMaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xM3B4KSByb3RhdGUoLTQ1ZGVnKSc7XG5cbiAgICAgICAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy5idXR0b25PZmYgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpcnN0TEluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSByb3RhdGUoMCknO1xuICAgICAgICBzZWNvbmRMaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKDApJztcbiAgICAgICAgdGhpcmRMaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApIHJvdGF0ZSgwKSc7XG5cbiAgICAgICAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LmFkZCgnbW9kYWwtZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy5idXR0b25PZmYgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlciAud3JhcHBlcicpLnByZXBlbmQodGhpcy5idXJnZXJCb3gpO1xuICB9LFxufTtcblxuYnVyZ2VySWNvbi5pbml0KCk7XG5cbm1vZGFsV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBidXJnZXJJY29uLmJ1cmdlckJveC5jbGljaygpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGJ1cmdlckljb247XG4iLCJpbXBvcnQgZ2FtZUZpZWxkIGZyb20gJy4vZ2FtZS1maWVsZCc7XG5pbXBvcnQgYnVyZ2VySWNvbiBmcm9tICcuL2NvbXBvbmVudHMvYnVyZ2VyLWljb24nO1xuaW1wb3J0IHN0YXRpc3RpY3MgZnJvbSAnLi9zdGF0aXN0aWNzJztcblxuY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi1pdGVtJyk7XG5saW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XG4gIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgYnVyZ2VySWNvbi5idXJnZXJCb3guY2xpY2soKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1pdGVtLmFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykgPT09ICdtYWluJykge1xuICAgICAgZ2FtZUZpZWxkLnNldFRpdGxlQ2FyZHMoKTtcbiAgICB9IGVsc2UgaWYgKGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpID09PSAnc3RhdGlzdGljcycpIHtcbiAgICAgIGNvbnN0IHN0YXQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpO1xuICAgICAgY29uc3QgZGF0YUZvclRhYmxlID0gc3RhdGlzdGljcy5zb3J0T2JqZWN0KHN0YXQpO1xuICAgICAgc3RhdGlzdGljcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoMSknKS5pbm5lckhUTUwgPSAnJmRhcnI7IFdvcmQnO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYW1lRmllbGQucmVtb3ZlQ29udGVudCgpO1xuICAgICAgZ2FtZUZpZWxkLnNldENvbnRlbnRDYXJkcyhsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZScpO1xudGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGdhbWVGaWVsZC5zZXRUaXRsZUNhcmRzKCk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbS5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbTpmaXJzdC1jaGlsZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufSk7XG4iLCJpbXBvcnQgJy4vZ2FtZS1maWVsZCc7XG5pbXBvcnQgJy4vc3RhdGlzdGljcyc7XG5pbXBvcnQgJy4vY29tcG9uZW50cy9zd2l0Y2gnO1xuaW1wb3J0ICcuL2NvbXBvbmVudHMvYnVyZ2VyLWljb24nO1xuaW1wb3J0ICcuL2J1cmdlci1tZW51JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgZmV0Y2goJy4vYXNzZXRzL2pzb24vY2FyZHMuanNvbicpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBjb25zdCBpbWFnZXMgPSByZXN1bHQuZmxhdCgpLm1hcCgoaXRlbSkgPT4gaXRlbS5pbWFnZSk7XG5cbiAgICAgIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXMoYXJyKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICBpbWFnZS5zcmMgPSBgLi8ke2FycltpXX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwcmVsb2FkSW1hZ2VzKGltYWdlcyk7XG4gICAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=