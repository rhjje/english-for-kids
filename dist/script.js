(()=>{"use strict";(()=>{function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.title=r,this.number=n}var r,n;return r=t,(n=[{key:"render",value:function(){return'<div class="card" data-number="'.concat(this.number,'">\n      <div class="card__image"><img src="').concat(this.image,'"></div>\n      <span class="card__name">').concat(this.title,"</span>\n    </div>")}}])&&e(r.prototype,n),t}();function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"render",value:function(){return'<div class="switch-container">\n      <div class="train-mode active-mode">Train</div>\n      <label class="switch">\n        <input type="checkbox">\n        <span class="slider round"></span>\n      </label>\n      <div class="game-mode">Play</div>\n    </div>'}}],null&&r(t.prototype,null),n&&r(t,n),e}();const a={startGameButton:null,boxStars:null,currentWords:[],correctAnswer:null,wrongAnswer:null,soundWin:null,soundLose:null,repeat:null,currentWord:null,mistakes:0,wordsUsed:[],repeatMode:!1,init:function(){var e=this;this.repeat=!1,this.currentWords=[],this.currentWord=null,this.wordsUsed=[],this.startGameButton=document.createElement("button"),this.startGameButton.classList.add("button-play"),this.startGameButton.innerText="Start game",this.boxStars=document.createElement("div"),this.boxStars.classList.add("box-stars"),this.correctAnswer=new Audio("./assets/sounds/correct.mp3"),this.wrongAnswer=new Audio("./assets/sounds/error.mp3"),this.soundWin=new Audio("./assets/sounds/success.mp3"),this.soundLose=new Audio("./assets/sounds/failure.mp3"),document.querySelector(".container .wrapper").appendChild(this.startGameButton),document.querySelector(".container .wrapper").appendChild(this.boxStars),this.startGameButton.addEventListener("click",(function(){e.repeat?e.currentWord.play():(e.startGameButton.classList.add("repeat"),e.repeat=!0,e.play())}))},play:function(){var e=this,t=document.querySelectorAll(".card-word__front");t.forEach((function(t){e.currentWords.push(t.getAttribute("data-name"))})),this.currentWords.sort((function(){return Math.random()-.5}));var r=0,n=function(){e.currentWord=new Audio("./assets/sounds/".concat(e.currentWords[r],".mp3")),e.currentWord.load(),e.currentWord.play()};n(),t.forEach((function(t){t.addEventListener("click",(function(){if(t.getAttribute("data-name")===e.currentWords[r]){e.wordsUsed.push(e.currentWords[r]),i.countingStatistics(e.currentWords[r],"correct"),e.correctAnswer.play(),t.style.filter="blur(5px)";var a=document.createElement("img");a.src="./assets/icons/star-win.svg",e.boxStars.appendChild(a),document.querySelector(".card-word:nth-child(".concat(+t.getAttribute("data-number")+1,")")).classList.remove("active-card"),(r+=1)<e.currentWords.length?setTimeout(n,500):setTimeout((function(){e.finishGame()}),1e3)}else if(!e.wordsUsed.includes(t.getAttribute("data-name"))){i.countingStatistics(e.currentWords[r],"wrong"),e.mistakes+=1;var c=document.createElement("img");c.src="./assets/icons/star.svg",e.boxStars.appendChild(c),e.wrongAnswer.play()}}))}))},finishGame:function(){var e,t,r=this;l.removeContent(),0===this.mistakes?(e="Congratulations! You win!",t="./assets/icons/success.svg",this.soundWin.play()):(e="You lost(: Train and try again!</br>\n        You made ".concat(this.mistakes," mistake(s)."),t="./assets/icons/failure.svg",this.soundLose.play());var n=document.querySelector(".container"),a='<span class="win-title">'.concat(e,'</span>\n    <div class="win-image"><img src="').concat(t,'"></div>');n.innerHTML+=a;var c=document.createElement("div");c.classList.add("buttons-finish");var o=document.createElement("button");o.classList.add("new-game"),o.innerText="New game";var s=document.createElement("button");s.classList.add("main-menu"),s.innerText="Main menu",c.appendChild(o),c.appendChild(s),o.addEventListener("click",(function(){r.repeatMode?i.repeatDifficultWords():l.setContentCards(l.activeCard)})),s.addEventListener("click",(function(){r.repeatMode=!1,l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),n.appendChild(c),this.mistakes=0}};var c={init:function(){fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(e){var t=e.flat(),r=[];t.forEach((function(e){var t={word:e.word,translation:e.translation,category:e.category,clicks:0,correct:0,wrong:0,percent:0,image:e.image};r.push(t)})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(r)))}))},countingStatistics:function(e,t){var r=JSON.parse(localStorage.getItem("english-for-kids"));r.forEach((function(r){if(r.word===e){switch(t){case"clicks":r.clicks+=1;break;case"correct":r.correct+=1;break;case"wrong":r.wrong+=1}r.wrong+r.correct>0&&(r.percent=100*r.wrong/(r.wrong+r.correct))}})),localStorage.setItem("english-for-kids","".concat(JSON.stringify(r)))},buildingTable:function(e){for(var t=this,r=document.querySelector(".container");r.firstChild;)r.removeChild(r.firstChild);var n=document.createElement("div");n.classList.add("wrapper");var a=document.createElement("div");a.classList.add("panel-buttons");var c=document.createElement("button");c.classList.add("repeat-button"),c.innerText="Repeat difficult words";var i=document.createElement("button");i.classList.add("reset-button"),i.innerText="Reset",a.appendChild(c),a.appendChild(i);var o=document.createElement("table");o.classList.add("table"),n.appendChild(a),n.appendChild(o),r.appendChild(n),i.addEventListener("click",(function(){t.resetLocalStorage()})),c.addEventListener("click",(function(){t.repeatDifficultWords()})),o.innerHTML="<tr>\n      <th>Word</th>\n      <th>Translation</th>\n      <th>Category</th>\n      <th>Clicks</th>\n      <th>Correct</th>\n      <th>Wrong</th>\n      <th>% errors</th>\n    </tr>",e.forEach((function(e){o.innerHTML+="<tr>\n        <td>".concat(e.word,"</td>\n        <td>").concat(e.translation,"</td>\n        <td>").concat(e.category,"</td>\n        <td>").concat(e.clicks,"</td>\n        <td>").concat(e.correct,"</td>\n        <td>").concat(e.wrong,"</td>\n        <td>").concat(e.percent.toFixed(1),"</td>\n      </tr>")})),document.querySelectorAll("th").forEach((function(e){e.addEventListener("click",(function(){"↓"===e.innerText[0]?t.sortColumn(e.innerText.slice(2),!1):"↑"===e.innerText[0]?t.sortColumn(e.innerText.slice(2),!0):t.sortColumn(e.innerText,!0)}))}))},sortObject:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word";return e.sort((function(e,r){return e["".concat(t)]>r["".concat(t)]?1:e["".concat(t)]<r["".concat(t)]?-1:0})),e},sortColumn:function(e,t){var r=JSON.parse(localStorage.getItem("english-for-kids"));"% errors"===e&&(e="percent");var n,a,c=this.sortObject(r,e.toLowerCase());switch(t&&e.match(/Word|Translation|Category/)?(n="&darr;",this.buildingTable(c)):e.match(/Word|Translation|Category/)?(n="&uarr;",this.buildingTable(c.reverse())):t?(n="&darr;",this.buildingTable(c.reverse())):(n="&uarr;",this.buildingTable(c)),e){case"Word":a=document.querySelector("th:first-child");break;case"Translation":a=document.querySelector("th:nth-child(2)");break;case"Category":a=document.querySelector("th:nth-child(3)");break;case"Clicks":a=document.querySelector("th:nth-child(4)");break;case"Correct":a=document.querySelector("th:nth-child(5)");break;case"Wrong":a=document.querySelector("th:nth-child(6)");break;case"percent":a=document.querySelector("th:last-child")}a.innerHTML="".concat(n," ").concat(a.innerHTML)},repeatDifficultWords:function(){a.repeatMode=!0;for(var e=document.querySelector(".container");e.firstChild;)e.removeChild(e.firstChild);var t=document.createElement("div");t.classList.add("wrapper"),t.innerHTML+=n.render(),e.appendChild(t);var r=document.createElement("div");r.classList.add("cards");for(var c=JSON.parse(localStorage.getItem("english-for-kids")),i=this.sortObject(c,"wrong").reverse(),o=0;o<8;o+=1)if(0!==i[o].wrong){var d=new s(i[o].image,i[o].word,i[o].translation,o);r.appendChild(d.render())}t.appendChild(r);var l=document.querySelector("input[type=checkbox]");l.addEventListener("change",(function(){document.querySelector(".train-mode").classList.toggle("active-mode"),document.querySelector(".game-mode").classList.toggle("active-mode");var e=document.querySelectorAll(".card-word__front-image");l.checked?(e.forEach((function(e){e.style.height="260px"})),a.init()):(e.forEach((function(e){e.style.height="200px"})),document.querySelector(".container .wrapper").removeChild(document.querySelector(".button-play")),document.querySelector(".container .wrapper").removeChild(document.querySelector(".box-stars")))}))},resetLocalStorage:function(){var e=JSON.parse(localStorage.getItem("english-for-kids")).map((function(e){return{word:e.word,translation:e.translation,category:e.category,clicks:0,correct:0,wrong:0,percent:0,image:e.image}}));this.buildingTable(this.sortObject(e)),localStorage.setItem("english-for-kids","".concat(JSON.stringify(e)))}};localStorage.getItem("english-for-kids")||c.init();const i=c;function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.image=t,this.word=r,this.translation=n,this.number=a,this.card=null,this.cardFront=null,this.cardBack=null}var t,r;return t=e,(r=[{key:"render",value:function(){var e=this;this.card=document.createElement("div"),this.card.classList.add("card-word","active-card");var t=(6*Math.random()-3).toFixed(1);this.card.setAttribute("style","transform: rotate(".concat(t,"deg);")),this.cardFront=document.createElement("div"),this.cardFront.classList.add("card-word__front"),this.cardFront.setAttribute("data-number","".concat(this.number)),this.cardFront.setAttribute("data-name","".concat(this.word));var r=document.createElement("div");r.classList.add("card-word__front-image");var n=document.createElement("img");n.src="./".concat(this.image),r.appendChild(n);var a=document.createElement("div");a.classList.add("card-word__front-name"),a.innerText="".concat(this.word);var c=document.querySelector("label > input");this.cardFront.addEventListener("click",(function(t){t.target.classList.contains("reverse-button")||c.checked||(i.countingStatistics(e.word,"clicks"),e.toVoice())}));var o=document.createElement("div");o.classList.add("reverse-button"),o.setAttribute("data-number","".concat(this.number)),o.addEventListener("click",(function(){e.reverseCard()})),this.cardFront.appendChild(r),this.cardFront.appendChild(a),this.cardFront.appendChild(o),this.cardBack=document.createElement("div"),this.cardBack.classList.add("card-word__back");var s=document.createElement("div");s.classList.add("card-word__back-image");var d=document.createElement("img");d.src="./".concat(this.image),s.appendChild(d);var l=document.createElement("div");return l.classList.add("card-word__back-name"),l.innerText="".concat(this.translation),this.cardBack.appendChild(s),this.cardBack.appendChild(l),this.card.appendChild(this.cardFront),this.card.appendChild(this.cardBack),this.card}},{key:"toVoice",value:function(){var e=new Audio("./assets/sounds/".concat(this.word,".mp3"));e.load(),e.play()}},{key:"reverseCard",value:function(){var e=this;this.cardFront.style.transform="rotateY(180deg)",this.cardBack.style.transform="rotateY(360deg)",this.card.addEventListener("mouseleave",(function(){e.cardFront.style.transform="rotateY(0deg)",e.cardBack.style.transform="rotateY(180deg)"}))}}])&&o(t.prototype,r),e}(),d={activeCard:null,title:{0:"Action (set A)",1:"Action (set B)",2:"Action (set C)",3:"Adjective",4:"Animal (set A)",5:"Animal (set B)",6:"Clothes",7:"Emotion"},images:{0:"./assets/images/categories/actionA.jpg",1:"./assets/images/categories/actionB.jpg",2:"./assets/images/categories/actionC.jpg",3:"./assets/images/categories/adjective.jpg",4:"./assets/images/categories/animalA.jpg",5:"./assets/images/categories/animalB.jpg",6:"./assets/images/categories/clothes.jpg",7:"./assets/images/categories/emotion.jpg"},setTitleCards:function(){var e=this;a.repeatMode=!1,this.removeContent();var r=document.createElement("div");r.classList.add("wrapper"),document.querySelector(".container").appendChild(r);var n=document.createElement("div");n.classList.add("cards-title");for(var c=0;c<8;c+=1){var i=new t(this.images[c],this.title[c],c);n.innerHTML+=i.render()}n.innerHTML+='<div class="subtitle">Hello! choose a category:</div>',r.appendChild(n),document.querySelectorAll(".card").forEach((function(t){t.addEventListener("click",(function(){e.removeContent(),e.activeCard=t.getAttribute("data-number"),e.setContentCards(e.activeCard)}))}))},setContentCards:function(e){a.repeatMode=!1,this.removeContent();var t=document.createElement("div");t.classList.add("wrapper"),t.innerHTML+=n.render(),document.querySelector(".container").appendChild(t);var r=document.createElement("div");r.classList.add("cards"),fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(n){for(var a=n[e],c=0;c<a.length;c+=1){var i=new s(a[c].image,a[c].word,a[c].translation,c);r.appendChild(i.render())}t.appendChild(r)}));var c=document.querySelector("input[type=checkbox]");c.addEventListener("change",(function(){document.querySelector(".train-mode").classList.toggle("active-mode"),document.querySelector(".game-mode").classList.toggle("active-mode");var e=document.querySelectorAll(".card-word__front-image");c.checked?(e.forEach((function(e){e.style.height="260px"})),a.init()):(e.forEach((function(e){e.style.height="200px"})),document.querySelector(".container .wrapper").removeChild(document.querySelector(".button-play")),document.querySelector(".container .wrapper").removeChild(document.querySelector(".box-stars")))}))},removeContent:function(){for(var e=document.querySelector(".container");e.firstChild;)e.removeChild(e.firstChild)}};d.setTitleCards();const l=d;var u=document.querySelector(".modal"),m=document.querySelectorAll(".navigation-item"),h={burgerBox:null,buttonOff:!0,init:function(){var e=this;this.burgerBox=document.createElement("div"),this.burgerBox.className="burger-menu__button";var t=document.createElement("div");t.className="first-line";var r=document.createElement("div");r.className="second-line";var n=document.createElement("div");n.className="third-line",this.burgerBox.appendChild(t),this.burgerBox.appendChild(r),this.burgerBox.appendChild(n),this.burgerBox.addEventListener("click",(function(){m.forEach((function(e){e.classList.toggle("navigation-item_open")})),document.querySelector(".burger-menu").classList.toggle("burger-menu_open"),e.buttonOff?(t.style.transform="translateY(13px) rotate(45deg)",r.style.transform="translateX(-40px)",n.style.transform="translateY(-13px) rotate(-45deg)",u.classList.remove("modal-disabled"),e.buttonOff=!1):(t.style.transform="translateY(0) rotate(0)",r.style.transform="translateX(0)",n.style.transform="translateY(0) rotate(0)",u.classList.add("modal-disabled"),e.buttonOff=!0)})),document.querySelector(".header .wrapper").prepend(this.burgerBox)}};h.init(),u.addEventListener("click",(function(){h.burgerBox.click()}));const v=h;document.querySelectorAll(".navigation-item").forEach((function(e){e.addEventListener("click",(function(){if(v.burgerBox.click(),document.querySelector(".navigation-item.active").classList.remove("active"),e.classList.add("active"),"main"===e.getAttribute("data-number"))l.setTitleCards();else if("statistics"===e.getAttribute("data-number")){var t=JSON.parse(localStorage.getItem("english-for-kids")),r=i.sortObject(t);i.buildingTable(r),document.querySelector("th:nth-child(1)").innerHTML="&darr; Word"}else l.removeContent(),l.setContentCards(e.getAttribute("data-number"))}))})),document.querySelector(".title").addEventListener("click",(function(){l.setTitleCards(),document.querySelector(".navigation-item.active").classList.remove("active"),document.querySelector(".navigation-item:first-child").classList.add("active")})),document.addEventListener("DOMContentLoaded",(function(){fetch("./assets/json/cards.json").then((function(e){return e.json()})).then((function(e){!function(e){for(var t=0;t<e.length;t+=1)(new Image).src="./".concat(e[t])}(e.flat().map((function(e){return e.image})))}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvdGl0bGUtY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvc3dpdGNoLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvcGxheS1nYW1lLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvc3RhdGlzdGljcy5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9lbmdsaXNoLWZvci1raWRzLy4vc3JjL2pzL2dhbWUtZmllbGQuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9jb21wb25lbnRzL2J1cmdlci1pY29uLmpzIiwid2VicGFjazovL2VuZ2xpc2gtZm9yLWtpZHMvLi9zcmMvanMvYnVyZ2VyLW1lbnUuanMiLCJ3ZWJwYWNrOi8vZW5nbGlzaC1mb3Ita2lkcy8uL3NyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJUaXRsZUNhcmQiLCJpbWFnZSIsInRpdGxlIiwibnVtYmVyIiwidGhpcyIsIlN3aXRjaGVyIiwic3RhcnRHYW1lQnV0dG9uIiwiYm94U3RhcnMiLCJjdXJyZW50V29yZHMiLCJjb3JyZWN0QW5zd2VyIiwid3JvbmdBbnN3ZXIiLCJzb3VuZFdpbiIsInNvdW5kTG9zZSIsInJlcGVhdCIsImN1cnJlbnRXb3JkIiwibWlzdGFrZXMiLCJ3b3Jkc1VzZWQiLCJyZXBlYXRNb2RlIiwiaW5pdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVyVGV4dCIsIkF1ZGlvIiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJjdXJyZW50Q2FyZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImNhcmQiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJwbGF5V29yZCIsImxvYWQiLCJzdGF0aXN0aWNzIiwic3R5bGUiLCJmaWx0ZXIiLCJ3aW5TdGFycyIsInNyYyIsInJlbW92ZSIsImxlbmd0aCIsInNldFRpbWVvdXQiLCJmaW5pc2hHYW1lIiwiaW5jbHVkZXMiLCJzcGFuIiwiZ2FtZUZpZWxkIiwiY29udGFpbmVyIiwiZmluaXNoU2NyZWVuIiwiaW5uZXJIVE1MIiwiYnV0dG9uc0ZpbmlzaCIsIm5ld0dhbWVCdXR0b24iLCJtYWluTWVudUJ1dHRvbiIsImZldGNoIiwidGhlbiIsInJlc3VsdCIsImpzb24iLCJhbGxXb3JkcyIsImZsYXQiLCJjb21tb25BcnJheSIsIml0ZW0iLCJjdXJyZW50T2JqIiwid29yZCIsInRyYW5zbGF0aW9uIiwiY2F0ZWdvcnkiLCJjbGlja3MiLCJjb3JyZWN0Iiwid3JvbmciLCJwZXJjZW50IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb3VudGluZ1N0YXRpc3RpY3MiLCJzdGF0IiwicGFyc2UiLCJnZXRJdGVtIiwiYnVpbGRpbmdUYWJsZSIsImRhdGEiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJzdGF0Q29udGFpbmVyIiwiYnV0dG9ucyIsInJlcGVhdEJ1dHRvbiIsInJlc2V0QnV0dG9uIiwidGFibGUiLCJyZXNldExvY2FsU3RvcmFnZSIsInJlcGVhdERpZmZpY3VsdFdvcmRzIiwicm93IiwidG9GaXhlZCIsImhlYWRpbmciLCJzb3J0Q29sdW1uIiwic2xpY2UiLCJzb3J0T2JqZWN0Iiwib2JqIiwia2V5IiwiYSIsImIiLCJkaXJlY3RPcmRlciIsImFycm93IiwiZGF0YUZvclRhYmxlIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsInJldmVyc2UiLCJwbGF5R2FtZSIsIndyYXBwZXIiLCJyZW5kZXIiLCJjYXJkc0NvbnRhaW5lciIsImkiLCJDYXJkIiwiaW5wdXQiLCJ0b2dnbGUiLCJjYXJkcyIsImNoZWNrZWQiLCJoZWlnaHQiLCJyZXNldEFycmF5IiwibWFwIiwiY2FyZEZyb250IiwiY2FyZEJhY2siLCJyYW5kb21Sb3RhdGUiLCJzZXRBdHRyaWJ1dGUiLCJjYXJkRnJvbnRJbWFnZSIsImltZ0Zyb250IiwiY2FyZEZyb250TmFtZSIsImdhbWVNb2RlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsInRvVm9pY2UiLCJjYXJkQnV0dG9uIiwicmV2ZXJzZUNhcmQiLCJjYXJkQmFja0ltYWdlIiwiaW1nIiwiY2FyZEJhY2tOYW1lIiwiYXVkaW8iLCJ0cmFuc2Zvcm0iLCJhY3RpdmVDYXJkIiwiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCJpbWFnZXMiLCJzZXRUaXRsZUNhcmRzIiwicmVtb3ZlQ29udGVudCIsInNldENvbnRlbnRDYXJkcyIsImN1cnJlbnRDb250ZW50IiwibW9kYWxXaW5kb3ciLCJuYXZpZ2F0aW9uSXRlbXMiLCJidXJnZXJJY29uIiwiYnVyZ2VyQm94IiwiYnV0dG9uT2ZmIiwiY2xhc3NOYW1lIiwiZmlyc3RMSW5lIiwic2Vjb25kTGluZSIsInRoaXJkTGluZSIsInByZXBlbmQiLCJjbGljayIsImxpbmsiLCJhcnIiLCJJbWFnZSIsInByZWxvYWRJbWFnZXMiXSwibWFwcGluZ3MiOiJtTUFBcUJBLEUsV0FDbkIsV0FBWUMsRUFBT0MsRUFBT0MsSSw0RkFBUSxTQUNoQ0MsS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0YsTUFBUUEsRUFDYkUsS0FBS0QsT0FBU0EsRSxzREFTZCxNQUxhLGtDQUFILE9BQXFDQyxLQUFLRCxPQUExQyx3REFDNkJDLEtBQUtILE1BRGxDLG9EQUVtQkcsS0FBS0YsTUFGeEIsNEIsZ01DUk9HLEUsbUxBVWpCLE1BUmdCLDJRLHlDQ3lKcEIsUUF2SmlCLENBQ2ZDLGdCQUFpQixLQUNqQkMsU0FBVSxLQUNWQyxhQUFjLEdBQ2RDLGNBQWUsS0FDZkMsWUFBYSxLQUNiQyxTQUFVLEtBQ1ZDLFVBQVcsS0FD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dUksR0FDYkEsRUFBSzNJLGlCQUFpQixTQUFTLFdBSzdCLEdBSkFrSSxvQkFDQTFJLFNBQVNNLGNBQWMsMkJBQTJCSixVQUFVd0IsT0FBTyxVQUNuRXlILEVBQUtqSixVQUFVQyxJQUFJLFVBRXNCLFNBQXJDZ0osRUFBS3BJLGFBQWEsZUFDcEJpQix1QkFDSyxHQUF5QyxlQUFyQ21ILEVBQUtwSSxhQUFhLGVBQWlDLENBQzVELElBQU02QyxFQUFPSCxLQUFLSSxNQUFNTixhQUFhTyxRQUFRLHFCQUN2Q3dCLEVBQWVqRSxhQUFzQnVDLEdBQzNDdkMsZ0JBQXlCaUUsR0FDekJ0RixTQUFTTSxjQUFjLG1CQUFtQjZCLFVBQVksbUJBRXRESCxrQkFDQUEsa0JBQTBCbUgsRUFBS3BJLGFBQWEsc0JBS3BDZixTQUFTTSxjQUFjLFVBQy9CRSxpQkFBaUIsU0FBUyxXQUM5QndCLGtCQUVBaEMsU0FBU00sY0FBYywyQkFBMkJKLFVBQVV3QixPQUFPLFVBQ25FMUIsU0FBU00sY0FBYyxnQ0FBZ0NKLFVBQVVDLElBQUksYUN4QnZFSCxTQUFTUSxpQkFBaUIsb0JBQW9CLFdBQzVDK0IsTUFBTSw0QkFDSEMsTUFBSyxTQUFDQyxHQUFELE9BQVlBLEVBQU9DLFVBQ3hCRixNQUFLLFNBQUNDLElBR0wsU0FBdUIyRyxHQUNyQixJQUFLLElBQUl0RCxFQUFJLEVBQUdBLEVBQUlzRCxFQUFJekgsT0FBUW1FLEdBQUssR0FDckIsSUFBSXVELE9BQ1o1SCxJQUFOLFlBQWlCMkgsRUFBSXRELElBR3pCd0QsQ0FSZTdHLEVBQU9HLE9BQU8wRCxLQUFJLFNBQUN4RCxHQUFELE9BQVVBLEVBQUtoRSxpQiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUaXRsZUNhcmQge1xuICBjb25zdHJ1Y3RvcihpbWFnZSwgdGl0bGUsIG51bWJlcikge1xuICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgY2FyZCA9IGA8ZGl2IGNsYXNzPVwiY2FyZFwiIGRhdGEtbnVtYmVyPVwiJHt0aGlzLm51bWJlcn1cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkX19pbWFnZVwiPjxpbWcgc3JjPVwiJHt0aGlzLmltYWdlfVwiPjwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9XCJjYXJkX19uYW1lXCI+JHt0aGlzLnRpdGxlfTwvc3Bhbj5cbiAgICA8L2Rpdj5gO1xuXG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXRjaGVyIHtcbiAgc3RhdGljIHJlbmRlcigpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gYDxkaXYgY2xhc3M9XCJzd2l0Y2gtY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidHJhaW4tbW9kZSBhY3RpdmUtbW9kZVwiPlRyYWluPC9kaXY+XG4gICAgICA8bGFiZWwgY2xhc3M9XCJzd2l0Y2hcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInNsaWRlciByb3VuZFwiPjwvc3Bhbj5cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8ZGl2IGNsYXNzPVwiZ2FtZS1tb2RlXCI+UGxheTwvZGl2PlxuICAgIDwvZGl2PmA7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgc3RhdGlzdGljcyBmcm9tICcuL3N0YXRpc3RpY3MnO1xuaW1wb3J0IGdhbWVGaWVsZCBmcm9tICcuL2dhbWUtZmllbGQnO1xuXG5jb25zdCBwbGF5R2FtZSA9IHtcbiAgc3RhcnRHYW1lQnV0dG9uOiBudWxsLFxuICBib3hTdGFyczogbnVsbCxcbiAgY3VycmVudFdvcmRzOiBbXSxcbiAgY29ycmVjdEFuc3dlcjogbnVsbCxcbiAgd3JvbmdBbnN3ZXI6IG51bGwsXG4gIHNvdW5kV2luOiBudWxsLFxuICBzb3VuZExvc2U6IG51bGwsXG4gIHJlcGVhdDogbnVsbCxcbiAgY3VycmVudFdvcmQ6IG51bGwsXG4gIG1pc3Rha2VzOiAwLFxuICB3b3Jkc1VzZWQ6IFtdLFxuICByZXBlYXRNb2RlOiBmYWxzZSxcblxuICBpbml0KCkge1xuICAgIHRoaXMucmVwZWF0ID0gZmFsc2U7XG4gICAgdGhpcy5jdXJyZW50V29yZHMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRXb3JkID0gbnVsbDtcbiAgICB0aGlzLndvcmRzVXNlZCA9IFtdO1xuXG4gICAgdGhpcy5zdGFydEdhbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b24tcGxheScpO1xuICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmlubmVyVGV4dCA9ICdTdGFydCBnYW1lJztcblxuICAgIHRoaXMuYm94U3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmJveFN0YXJzLmNsYXNzTGlzdC5hZGQoJ2JveC1zdGFycycpO1xuXG4gICAgdGhpcy5jb3JyZWN0QW5zd2VyID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvY29ycmVjdC5tcDMnKTtcbiAgICB0aGlzLndyb25nQW5zd2VyID0gbmV3IEF1ZGlvKCcuL2Fzc2V0cy9zb3VuZHMvZXJyb3IubXAzJyk7XG4gICAgdGhpcy5zb3VuZFdpbiA9IG5ldyBBdWRpbygnLi9hc3NldHMvc291bmRzL3N1Y2Nlc3MubXAzJyk7XG4gICAgdGhpcy5zb3VuZExvc2UgPSBuZXcgQXVkaW8oJy4vYXNzZXRzL3NvdW5kcy9mYWlsdXJlLm1wMycpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lciAud3JhcHBlcicpLmFwcGVuZENoaWxkKHRoaXMuc3RhcnRHYW1lQnV0dG9uKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykuYXBwZW5kQ2hpbGQodGhpcy5ib3hTdGFycyk7XG5cbiAgICB0aGlzLnN0YXJ0R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlcGVhdCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRXb3JkLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhcnRHYW1lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlcGVhdCcpO1xuICAgICAgICB0aGlzLnJlcGVhdCA9IHRydWU7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHBsYXkoKSB7XG4gICAgY29uc3QgY3VycmVudENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtd29yZF9fZnJvbnQnKTtcbiAgICBjdXJyZW50Q2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50V29yZHMucHVzaChjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykpO1xuICAgIH0pO1xuICAgIHRoaXMuY3VycmVudFdvcmRzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG5cbiAgICBsZXQgY3VycmVudFdvcmQgPSAwO1xuXG4gICAgY29uc3QgcGxheVdvcmQgPSAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRXb3JkID0gbmV3IEF1ZGlvKGAuL2Fzc2V0cy9zb3VuZHMvJHt0aGlzLmN1cnJlbnRXb3Jkc1tjdXJyZW50V29yZF19Lm1wM2ApO1xuICAgICAgdGhpcy5jdXJyZW50V29yZC5sb2FkKCk7XG4gICAgICB0aGlzLmN1cnJlbnRXb3JkLnBsYXkoKTtcbiAgICB9O1xuXG4gICAgcGxheVdvcmQoKTtcblxuICAgIGN1cnJlbnRDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpID09PSB0aGlzLmN1cnJlbnRXb3Jkc1tjdXJyZW50V29yZF0pIHtcbiAgICAgICAgICB0aGlzLndvcmRzVXNlZC5wdXNoKHRoaXMuY3VycmVudFdvcmRzW2N1cnJlbnRXb3JkXSk7XG4gICAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdLCAnY29ycmVjdCcpO1xuICAgICAgICAgIHRoaXMuY29ycmVjdEFuc3dlci5wbGF5KCk7XG4gICAgICAgICAgY2FyZC5zdHlsZS5maWx0ZXIgPSAnYmx1cig1cHgpJztcblxuICAgICAgICAgIGNvbnN0IHdpblN0YXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgd2luU3RhcnMuc3JjID0gJy4vYXNzZXRzL2ljb25zL3N0YXItd2luLnN2Zyc7XG4gICAgICAgICAgdGhpcy5ib3hTdGFycy5hcHBlbmRDaGlsZCh3aW5TdGFycyk7XG5cbiAgICAgICAgICBjb25zdCBhY3RpdmVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmNhcmQtd29yZDpudGgtY2hpbGQoJHsrY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykgKyAxfSlgKTtcbiAgICAgICAgICBhY3RpdmVDYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1jYXJkJyk7XG5cbiAgICAgICAgICBjdXJyZW50V29yZCArPSAxO1xuICAgICAgICAgIGlmIChjdXJyZW50V29yZCA8IHRoaXMuY3VycmVudFdvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChwbGF5V29yZCwgNTAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZmluaXNoR2FtZSgpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLndvcmRzVXNlZC5pbmNsdWRlcyhjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJykpKSB7XG4gICAgICAgICAgc3RhdGlzdGljcy5jb3VudGluZ1N0YXRpc3RpY3ModGhpcy5jdXJyZW50V29yZHNbY3VycmVudFdvcmRdLCAnd3JvbmcnKTtcbiAgICAgICAgICB0aGlzLm1pc3Rha2VzICs9IDE7XG4gICAgICAgICAgY29uc3Qgd2luU3RhcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICB3aW5TdGFycy5zcmMgPSAnLi9hc3NldHMvaWNvbnMvc3Rhci5zdmcnO1xuICAgICAgICAgIHRoaXMuYm94U3RhcnMuYXBwZW5kQ2hpbGQod2luU3RhcnMpO1xuXG4gICAgICAgICAgdGhpcy53cm9uZ0Fuc3dlci5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIGZpbmlzaEdhbWUoKSB7XG4gICAgZ2FtZUZpZWxkLnJlbW92ZUNvbnRlbnQoKTtcblxuICAgIGxldCBzcGFuO1xuICAgIGxldCBzcmM7XG4gICAgaWYgKHRoaXMubWlzdGFrZXMgPT09IDApIHtcbiAgICAgIHNwYW4gPSAnQ29uZ3JhdHVsYXRpb25zISBZb3Ugd2luISc7XG4gICAgICBzcmMgPSAnLi9hc3NldHMvaWNvbnMvc3VjY2Vzcy5zdmcnO1xuICAgICAgdGhpcy5zb3VuZFdpbi5wbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYW4gPSBgWW91IGxvc3QoOiBUcmFpbiBhbmQgdHJ5IGFnYWluITwvYnI+XG4gICAgICAgIFlvdSBtYWRlICR7dGhpcy5taXN0YWtlc30gbWlzdGFrZShzKS5gO1xuICAgICAgc3JjID0gJy4vYXNzZXRzL2ljb25zL2ZhaWx1cmUuc3ZnJztcbiAgICAgIHRoaXMuc291bmRMb3NlLnBsYXkoKTtcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGZpbmlzaFNjcmVlbiA9IGA8c3BhbiBjbGFzcz1cIndpbi10aXRsZVwiPiR7c3Bhbn08L3NwYW4+XG4gICAgPGRpdiBjbGFzcz1cIndpbi1pbWFnZVwiPjxpbWcgc3JjPVwiJHtzcmN9XCI+PC9kaXY+YDtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGZpbmlzaFNjcmVlbjtcblxuICAgIGNvbnN0IGJ1dHRvbnNGaW5pc2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25zRmluaXNoLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMtZmluaXNoJyk7XG4gICAgY29uc3QgbmV3R2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld0dhbWVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbmV3LWdhbWUnKTtcbiAgICBuZXdHYW1lQnV0dG9uLmlubmVyVGV4dCA9ICdOZXcgZ2FtZSc7XG4gICAgY29uc3QgbWFpbk1lbnVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBtYWluTWVudUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdtYWluLW1lbnUnKTtcbiAgICBtYWluTWVudUJ1dHRvbi5pbm5lclRleHQgPSAnTWFpbiBtZW51JztcbiAgICBidXR0b25zRmluaXNoLmFwcGVuZENoaWxkKG5ld0dhbWVCdXR0b24pO1xuICAgIGJ1dHRvbnNGaW5pc2guYXBwZW5kQ2hpbGQobWFpbk1lbnVCdXR0b24pO1xuXG4gICAgbmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlcGVhdE1vZGUpIHtcbiAgICAgICAgc3RhdGlzdGljcy5yZXBlYXREaWZmaWN1bHRXb3JkcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2FtZUZpZWxkLnNldENvbnRlbnRDYXJkcyhnYW1lRmllbGQuYWN0aXZlQ2FyZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBtYWluTWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVwZWF0TW9kZSA9IGZhbHNlO1xuICAgICAgZ2FtZUZpZWxkLnNldFRpdGxlQ2FyZHMoKTtcblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbS5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW06Zmlyc3QtY2hpbGQnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25zRmluaXNoKTtcbiAgICB0aGlzLm1pc3Rha2VzID0gMDtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXlHYW1lO1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbmltcG9ydCBDYXJkIGZyb20gJy4vY29tcG9uZW50cy9jYXJkJztcbmltcG9ydCBTd2l0Y2hlciBmcm9tICcuL2NvbXBvbmVudHMvc3dpdGNoJztcbmltcG9ydCBwbGF5R2FtZSBmcm9tICcuL3BsYXktZ2FtZSc7XG5cbmNvbnN0IHN0YXRpc3RpY3MgPSB7XG4gIGluaXQoKSB7XG4gICAgZmV0Y2goJy4vYXNzZXRzL2pzb24vY2FyZHMuanNvbicpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBhbGxXb3JkcyA9IHJlc3VsdC5mbGF0KCk7XG4gICAgICAgIGNvbnN0IGNvbW1vbkFycmF5ID0gW107XG4gICAgICAgIGFsbFdvcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50T2JqID0ge1xuICAgICAgICAgICAgd29yZDogaXRlbS53b3JkLFxuICAgICAgICAgICAgdHJhbnNsYXRpb246IGl0ZW0udHJhbnNsYXRpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogaXRlbS5jYXRlZ29yeSxcbiAgICAgICAgICAgIGNsaWNrczogMCxcbiAgICAgICAgICAgIGNvcnJlY3Q6IDAsXG4gICAgICAgICAgICB3cm9uZzogMCxcbiAgICAgICAgICAgIHBlcmNlbnQ6IDAsXG4gICAgICAgICAgICBpbWFnZTogaXRlbS5pbWFnZSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbW1vbkFycmF5LnB1c2goY3VycmVudE9iaik7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycsIGAke0pTT04uc3RyaW5naWZ5KGNvbW1vbkFycmF5KX1gKTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIGNvdW50aW5nU3RhdGlzdGljcyh3b3JkLCBjYXRlZ29yeSkge1xuICAgIGNvbnN0IHN0YXQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpO1xuICAgIHN0YXQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKGl0ZW0ud29yZCA9PT0gd29yZCkge1xuICAgICAgICBzd2l0Y2ggKGNhdGVnb3J5KSB7XG4gICAgICAgICAgY2FzZSAnY2xpY2tzJzpcbiAgICAgICAgICAgIGl0ZW0uY2xpY2tzICs9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3JyZWN0JzpcbiAgICAgICAgICAgIGl0ZW0uY29ycmVjdCArPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd3JvbmcnOlxuICAgICAgICAgICAgaXRlbS53cm9uZyArPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLndyb25nICsgaXRlbS5jb3JyZWN0ID4gMCkge1xuICAgICAgICAgIGl0ZW0ucGVyY2VudCA9IChpdGVtLndyb25nICogMTAwKSAvIChpdGVtLndyb25nICsgaXRlbS5jb3JyZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJywgYCR7SlNPTi5zdHJpbmdpZnkoc3RhdCl9YCk7XG4gIH0sXG5cbiAgYnVpbGRpbmdUYWJsZShkYXRhKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIHdoaWxlIChjb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3RhdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyJyk7XG5cbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdwYW5lbC1idXR0b25zJyk7XG5cbiAgICBjb25zdCByZXBlYXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICByZXBlYXRCdXR0b24uY2xhc3NMaXN0LmFkZCgncmVwZWF0LWJ1dHRvbicpO1xuICAgIHJlcGVhdEJ1dHRvbi5pbm5lclRleHQgPSAnUmVwZWF0IGRpZmZpY3VsdCB3b3Jkcyc7XG5cbiAgICBjb25zdCByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHJlc2V0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Jlc2V0LWJ1dHRvbicpO1xuICAgIHJlc2V0QnV0dG9uLmlubmVyVGV4dCA9ICdSZXNldCc7XG5cbiAgICBidXR0b25zLmFwcGVuZENoaWxkKHJlcGVhdEJ1dHRvbik7XG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChyZXNldEJ1dHRvbik7XG5cbiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgdGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTtcblxuICAgIC8vIGFkZCBlbGVtZW50cyB0byBwYWdlXG4gICAgc3RhdENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25zKTtcbiAgICBzdGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdENvbnRhaW5lcik7XG5cbiAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVzZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICB9KTtcblxuICAgIHJlcGVhdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVwZWF0RGlmZmljdWx0V29yZHMoKTtcbiAgICB9KTtcblxuICAgIC8vIHJlbmRlcmluZyB0YWJsZVxuICAgIHRhYmxlLmlubmVySFRNTCA9IGA8dHI+XG4gICAgICA8dGg+V29yZDwvdGg+XG4gICAgICA8dGg+VHJhbnNsYXRpb248L3RoPlxuICAgICAgPHRoPkNhdGVnb3J5PC90aD5cbiAgICAgIDx0aD5DbGlja3M8L3RoPlxuICAgICAgPHRoPkNvcnJlY3Q8L3RoPlxuICAgICAgPHRoPldyb25nPC90aD5cbiAgICAgIDx0aD4lIGVycm9yczwvdGg+XG4gICAgPC90cj5gO1xuICAgIGRhdGEuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICB0YWJsZS5pbm5lckhUTUwgKz0gYDx0cj5cbiAgICAgICAgPHRkPiR7cm93LndvcmR9PC90ZD5cbiAgICAgICAgPHRkPiR7cm93LnRyYW5zbGF0aW9ufTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy5jYXRlZ29yeX08L3RkPlxuICAgICAgICA8dGQ+JHtyb3cuY2xpY2tzfTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy5jb3JyZWN0fTwvdGQ+XG4gICAgICAgIDx0ZD4ke3Jvdy53cm9uZ308L3RkPlxuICAgICAgICA8dGQ+JHtyb3cucGVyY2VudC50b0ZpeGVkKDEpfTwvdGQ+XG4gICAgICA8L3RyPmA7XG4gICAgfSk7XG5cbiAgICBjb25zdCB0YWJsZUhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpO1xuICAgIHRhYmxlSGVhZC5mb3JFYWNoKChoZWFkaW5nKSA9PiB7XG4gICAgICBoZWFkaW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoaGVhZGluZy5pbm5lclRleHRbMF0gPT09ICfihpMnKSB7XG4gICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGhlYWRpbmcuaW5uZXJUZXh0LnNsaWNlKDIpLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaGVhZGluZy5pbm5lclRleHRbMF0gPT09ICfihpEnKSB7XG4gICAgICAgICAgdGhpcy5zb3J0Q29sdW1uKGhlYWRpbmcuaW5uZXJUZXh0LnNsaWNlKDIpLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNvcnRDb2x1bW4oaGVhZGluZy5pbm5lclRleHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICBzb3J0T2JqZWN0KG9iaiwga2V5ID0gJ3dvcmQnKSB7XG4gICAgb2JqLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhW2Ake2tleX1gXSA+IGJbYCR7a2V5fWBdKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaWYgKGFbYCR7a2V5fWBdIDwgYltgJHtrZXl9YF0pIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIHNvcnRDb2x1bW4oa2V5LCBkaXJlY3RPcmRlcikge1xuICAgIGNvbnN0IHN0YXQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmdsaXNoLWZvci1raWRzJykpO1xuICAgIGlmIChrZXkgPT09ICclIGVycm9ycycpIHtcbiAgICAgIGtleSA9ICdwZXJjZW50JztcbiAgICB9XG4gICAgY29uc3QgZGF0YUZvclRhYmxlID0gdGhpcy5zb3J0T2JqZWN0KHN0YXQsIGtleS50b0xvd2VyQ2FzZSgpKTtcblxuICAgIGxldCBhcnJvdztcbiAgICBpZiAoZGlyZWN0T3JkZXIgJiYga2V5Lm1hdGNoKC9Xb3JkfFRyYW5zbGF0aW9ufENhdGVnb3J5LykpIHtcbiAgICAgIGFycm93ID0gJyZkYXJyOyc7XG4gICAgICB0aGlzLmJ1aWxkaW5nVGFibGUoZGF0YUZvclRhYmxlKTtcbiAgICB9IGVsc2UgaWYgKGtleS5tYXRjaCgvV29yZHxUcmFuc2xhdGlvbnxDYXRlZ29yeS8pKSB7XG4gICAgICBhcnJvdyA9ICcmdWFycjsnO1xuICAgICAgdGhpcy5idWlsZGluZ1RhYmxlKGRhdGFGb3JUYWJsZS5yZXZlcnNlKCkpO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0T3JkZXIpIHtcbiAgICAgIGFycm93ID0gJyZkYXJyOyc7XG4gICAgICB0aGlzLmJ1aWxkaW5nVGFibGUoZGF0YUZvclRhYmxlLnJldmVyc2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFycm93ID0gJyZ1YXJyOyc7XG4gICAgICB0aGlzLmJ1aWxkaW5nVGFibGUoZGF0YUZvclRhYmxlKTtcbiAgICB9XG5cbiAgICBsZXQgdGl0bGU7XG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgJ1dvcmQnOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOmZpcnN0LWNoaWxkJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVHJhbnNsYXRpb24nOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCgyKScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NhdGVnb3J5JzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoMyknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDbGlja3MnOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCg0KScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NvcnJlY3QnOlxuICAgICAgICB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCg1KScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1dyb25nJzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpudGgtY2hpbGQoNiknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwZXJjZW50JzpcbiAgICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aDpsYXN0LWNoaWxkJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRpdGxlLmlubmVySFRNTCA9IGAke2Fycm93fSAke3RpdGxlLmlubmVySFRNTH1gO1xuICB9LFxuXG4gIHJlcGVhdERpZmZpY3VsdFdvcmRzKCkge1xuICAgIHBsYXlHYW1lLnJlcGVhdE1vZGUgPSB0cnVlO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXInKTtcbiAgICB3cmFwcGVyLmlubmVySFRNTCArPSBTd2l0Y2hlci5yZW5kZXIoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NhcmRzJyk7XG5cbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5zb3J0T2JqZWN0KHN0YXQsICd3cm9uZycpLnJldmVyc2UoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkgKz0gMSkge1xuICAgICAgaWYgKGRhdGFbaV0ud3JvbmcgIT09IDApIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGFbaV0uaW1hZ2UsIGRhdGFbaV0ud29yZCwgZGF0YVtpXS50cmFuc2xhdGlvbiwgaSk7XG4gICAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQucmVuZGVyKCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGNhcmRzQ29udGFpbmVyKTtcblxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJhaW4tbW9kZScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1tb2RlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1tb2RlJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLW1vZGUnKTtcbiAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtd29yZF9fZnJvbnQtaW1hZ2UnKTtcbiAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9ICcyNjBweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBwbGF5R2FtZS5pbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1wbGF5JykpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyIC53cmFwcGVyJykucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJveC1zdGFycycpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZXNldExvY2FsU3RvcmFnZSgpIHtcbiAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICBjb25zdCByZXNldEFycmF5ID0gc3RhdC5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICB3b3JkOiBpdGVtLndvcmQsXG4gICAgICB0cmFuc2xhdGlvbjogaXRlbS50cmFuc2xhdGlvbixcbiAgICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5LFxuICAgICAgY2xpY2tzOiAwLFxuICAgICAgY29ycmVjdDogMCxcbiAgICAgIHdyb25nOiAwLFxuICAgICAgcGVyY2VudDogMCxcbiAgICAgIGltYWdlOiBpdGVtLmltYWdlLFxuICAgIH0pKTtcbiAgICB0aGlzLmJ1aWxkaW5nVGFibGUodGhpcy5zb3J0T2JqZWN0KHJlc2V0QXJyYXkpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycsIGAke0pTT04uc3RyaW5naWZ5KHJlc2V0QXJyYXkpfWApO1xuICB9LFxufTtcblxuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKSB7XG4gIHN0YXRpc3RpY3MuaW5pdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdGF0aXN0aWNzO1xuIiwiaW1wb3J0IHN0YXRpc3RpY3MgZnJvbSAnLi4vc3RhdGlzdGljcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihpbWFnZSwgd29yZCwgdHJhbnNsYXRpb24sIG51bWJlcikge1xuICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICB0aGlzLndvcmQgPSB3b3JkO1xuICAgIHRoaXMudHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbjtcbiAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICB0aGlzLmNhcmQgPSBudWxsO1xuICAgIHRoaXMuY2FyZEZyb250ID0gbnVsbDtcbiAgICB0aGlzLmNhcmRCYWNrID0gbnVsbDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkJywgJ2FjdGl2ZS1jYXJkJyk7XG4gICAgY29uc3QgcmFuZG9tUm90YXRlID0gKE1hdGgucmFuZG9tKCkgKiAoMyAtICgtMykpIC0gMykudG9GaXhlZCgxKTtcbiAgICB0aGlzLmNhcmQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGB0cmFuc2Zvcm06IHJvdGF0ZSgke3JhbmRvbVJvdGF0ZX1kZWcpO2ApO1xuXG4gICAgdGhpcy5jYXJkRnJvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNhcmRGcm9udC5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2Zyb250Jyk7XG4gICAgdGhpcy5jYXJkRnJvbnQuc2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicsIGAke3RoaXMubnVtYmVyfWApO1xuICAgIHRoaXMuY2FyZEZyb250LnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgYCR7dGhpcy53b3JkfWApO1xuXG4gICAgY29uc3QgY2FyZEZyb250SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkRnJvbnRJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2Zyb250LWltYWdlJyk7XG4gICAgY29uc3QgaW1nRnJvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWdGcm9udC5zcmMgPSBgLi8ke3RoaXMuaW1hZ2V9YDtcbiAgICBjYXJkRnJvbnRJbWFnZS5hcHBlbmRDaGlsZChpbWdGcm9udCk7XG5cbiAgICBjb25zdCBjYXJkRnJvbnROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZEZyb250TmFtZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2Zyb250LW5hbWUnKTtcbiAgICBjYXJkRnJvbnROYW1lLmlubmVyVGV4dCA9IGAke3RoaXMud29yZH1gO1xuXG4gICAgY29uc3QgZ2FtZU1vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsYWJlbCA+IGlucHV0Jyk7XG5cbiAgICB0aGlzLmNhcmRGcm9udC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZXZlcnNlLWJ1dHRvbicpICYmICFnYW1lTW9kZS5jaGVja2VkKSB7XG4gICAgICAgIHN0YXRpc3RpY3MuY291bnRpbmdTdGF0aXN0aWNzKHRoaXMud29yZCwgJ2NsaWNrcycpO1xuICAgICAgICB0aGlzLnRvVm9pY2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGNhcmRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JldmVyc2UtYnV0dG9uJyk7XG4gICAgY2FyZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJywgYCR7dGhpcy5udW1iZXJ9YCk7XG4gICAgY2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmV2ZXJzZUNhcmQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2FyZEZyb250LmFwcGVuZENoaWxkKGNhcmRGcm9udEltYWdlKTtcbiAgICB0aGlzLmNhcmRGcm9udC5hcHBlbmRDaGlsZChjYXJkRnJvbnROYW1lKTtcbiAgICB0aGlzLmNhcmRGcm9udC5hcHBlbmRDaGlsZChjYXJkQnV0dG9uKTtcblxuICAgIHRoaXMuY2FyZEJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNhcmRCYWNrLmNsYXNzTGlzdC5hZGQoJ2NhcmQtd29yZF9fYmFjaycpO1xuXG4gICAgY29uc3QgY2FyZEJhY2tJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRCYWNrSW1hZ2UuY2xhc3NMaXN0LmFkZCgnY2FyZC13b3JkX19iYWNrLWltYWdlJyk7XG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaW1nLnNyYyA9IGAuLyR7dGhpcy5pbWFnZX1gO1xuICAgIGNhcmRCYWNrSW1hZ2UuYXBwZW5kQ2hpbGQoaW1nKTtcblxuICAgIGNvbnN0IGNhcmRCYWNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmRCYWNrTmFtZS5jbGFzc0xpc3QuYWRkKCdjYXJkLXdvcmRfX2JhY2stbmFtZScpO1xuICAgIGNhcmRCYWNrTmFtZS5pbm5lclRleHQgPSBgJHt0aGlzLnRyYW5zbGF0aW9ufWA7XG5cbiAgICB0aGlzLmNhcmRCYWNrLmFwcGVuZENoaWxkKGNhcmRCYWNrSW1hZ2UpO1xuICAgIHRoaXMuY2FyZEJhY2suYXBwZW5kQ2hpbGQoY2FyZEJhY2tOYW1lKTtcblxuICAgIHRoaXMuY2FyZC5hcHBlbmRDaGlsZCh0aGlzLmNhcmRGcm9udCk7XG4gICAgdGhpcy5jYXJkLmFwcGVuZENoaWxkKHRoaXMuY2FyZEJhY2spO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FyZDtcbiAgfVxuXG4gIHRvVm9pY2UoKSB7XG4gICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oYC4vYXNzZXRzL3NvdW5kcy8ke3RoaXMud29yZH0ubXAzYCk7XG4gICAgYXVkaW8ubG9hZCgpO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgfVxuXG4gIHJldmVyc2VDYXJkKCkge1xuICAgIHRoaXMuY2FyZEZyb250LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDE4MGRlZyknO1xuICAgIHRoaXMuY2FyZEJhY2suc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZVkoMzYwZGVnKSc7XG4gICAgdGhpcy5jYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmNhcmRGcm9udC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlWSgwZGVnKSc7XG4gICAgICB0aGlzLmNhcmRCYWNrLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGVZKDE4MGRlZyknO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuaW1wb3J0IFRpdGxlQ2FyZCBmcm9tICcuL2NvbXBvbmVudHMvdGl0bGUtY2FyZCc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuL2NvbXBvbmVudHMvY2FyZCc7XG5pbXBvcnQgU3dpdGNoZXIgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaCc7XG5pbXBvcnQgcGxheUdhbWUgZnJvbSAnLi9wbGF5LWdhbWUnO1xuXG5jb25zdCBnYW1lRmllbGQgPSB7XG4gIGFjdGl2ZUNhcmQ6IG51bGwsXG4gIHRpdGxlOiB7XG4gICAgMDogJ0FjdGlvbiAoc2V0IEEpJyxcbiAgICAxOiAnQWN0aW9uIChzZXQgQiknLFxuICAgIDI6ICdBY3Rpb24gKHNldCBDKScsXG4gICAgMzogJ0FkamVjdGl2ZScsXG4gICAgNDogJ0FuaW1hbCAoc2V0IEEpJyxcbiAgICA1OiAnQW5pbWFsIChzZXQgQiknLFxuICAgIDY6ICdDbG90aGVzJyxcbiAgICA3OiAnRW1vdGlvbicsXG4gIH0sXG5cbiAgaW1hZ2VzOiB7XG4gICAgMDogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FjdGlvbkEuanBnJyxcbiAgICAxOiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvYWN0aW9uQi5qcGcnLFxuICAgIDI6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hY3Rpb25DLmpwZycsXG4gICAgMzogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FkamVjdGl2ZS5qcGcnLFxuICAgIDQ6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9hbmltYWxBLmpwZycsXG4gICAgNTogJy4vYXNzZXRzL2ltYWdlcy9jYXRlZ29yaWVzL2FuaW1hbEIuanBnJyxcbiAgICA2OiAnLi9hc3NldHMvaW1hZ2VzL2NhdGVnb3JpZXMvY2xvdGhlcy5qcGcnLFxuICAgIDc6ICcuL2Fzc2V0cy9pbWFnZXMvY2F0ZWdvcmllcy9lbW90aW9uLmpwZycsXG4gIH0sXG5cbiAgc2V0VGl0bGVDYXJkcygpIHtcbiAgICBwbGF5R2FtZS5yZXBlYXRNb2RlID0gZmFsc2U7XG4gICAgdGhpcy5yZW1vdmVDb250ZW50KCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXInKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2FyZHMtdGl0bGUnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IFRpdGxlQ2FyZCh0aGlzLmltYWdlc1tpXSwgdGhpcy50aXRsZVtpXSwgaSk7XG4gICAgICBjYXJkc0NvbnRhaW5lci5pbm5lckhUTUwgKz0gY2FyZC5yZW5kZXIoKTtcbiAgICB9XG4gICAgY2FyZHNDb250YWluZXIuaW5uZXJIVE1MICs9ICc8ZGl2IGNsYXNzPVwic3VidGl0bGVcIj5IZWxsbyEgY2hvb3NlIGEgY2F0ZWdvcnk6PC9kaXY+JztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZHNDb250YWluZXIpO1xuXG4gICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZCcpO1xuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ29udGVudCgpO1xuICAgICAgICB0aGlzLmFjdGl2ZUNhcmQgPSBjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKTtcbiAgICAgICAgdGhpcy5zZXRDb250ZW50Q2FyZHModGhpcy5hY3RpdmVDYXJkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIHNldENvbnRlbnRDYXJkcyhhY3RpdmVDYXJkKSB7XG4gICAgcGxheUdhbWUucmVwZWF0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMucmVtb3ZlQ29udGVudCgpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyJyk7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCArPSBTd2l0Y2hlci5yZW5kZXIoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJykuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2FyZHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2FyZHMnKTtcblxuICAgIGZldGNoKCcuL2Fzc2V0cy9qc29uL2NhcmRzLmpzb24nKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lmpzb24oKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHJlc3VsdFthY3RpdmVDYXJkXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGFbaV0uaW1hZ2UsIGRhdGFbaV0ud29yZCwgZGF0YVtpXS50cmFuc2xhdGlvbiwgaSk7XG4gICAgICAgICAgY2FyZHNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZC5yZW5kZXIoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmRzQ29udGFpbmVyKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmFpbi1tb2RlJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLW1vZGUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLW1vZGUnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtbW9kZScpO1xuICAgICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC13b3JkX19mcm9udC1pbWFnZScpO1xuICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgICAgIGNhcmQuc3R5bGUuaGVpZ2h0ID0gJzI2MHB4JztcbiAgICAgICAgfSk7XG4gICAgICAgIHBsYXlHYW1lLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIgLndyYXBwZXInKS5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLXBsYXknKSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIgLndyYXBwZXInKS5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm94LXN0YXJzJykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZUNvbnRlbnQoKSB7XG4gICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgd2hpbGUgKGN1cnJlbnRDb250ZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIGN1cnJlbnRDb250ZW50LnJlbW92ZUNoaWxkKGN1cnJlbnRDb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfSxcbn07XG5cbmdhbWVGaWVsZC5zZXRUaXRsZUNhcmRzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVGaWVsZDtcbiIsImNvbnN0IG1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG5jb25zdCBuYXZpZ2F0aW9uSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi1pdGVtJyk7XG5cbmNvbnN0IGJ1cmdlckljb24gPSB7XG4gIGJ1cmdlckJveDogbnVsbCxcbiAgYnV0dG9uT2ZmOiB0cnVlLFxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5idXJnZXJCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmJ1cmdlckJveC5jbGFzc05hbWUgPSAnYnVyZ2VyLW1lbnVfX2J1dHRvbic7XG5cbiAgICBjb25zdCBmaXJzdExJbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaXJzdExJbmUuY2xhc3NOYW1lID0gJ2ZpcnN0LWxpbmUnO1xuICAgIGNvbnN0IHNlY29uZExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzZWNvbmRMaW5lLmNsYXNzTmFtZSA9ICdzZWNvbmQtbGluZSc7XG4gICAgY29uc3QgdGhpcmRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcmRMaW5lLmNsYXNzTmFtZSA9ICd0aGlyZC1saW5lJztcblxuICAgIHRoaXMuYnVyZ2VyQm94LmFwcGVuZENoaWxkKGZpcnN0TEluZSk7XG4gICAgdGhpcy5idXJnZXJCb3guYXBwZW5kQ2hpbGQoc2Vjb25kTGluZSk7XG4gICAgdGhpcy5idXJnZXJCb3guYXBwZW5kQ2hpbGQodGhpcmRMaW5lKTtcblxuICAgIHRoaXMuYnVyZ2VyQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbmF2aWdhdGlvbkl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCduYXZpZ2F0aW9uLWl0ZW1fb3BlbicpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLW1lbnUnKS5jbGFzc0xpc3QudG9nZ2xlKCdidXJnZXItbWVudV9vcGVuJyk7XG4gICAgICBpZiAodGhpcy5idXR0b25PZmYpIHtcbiAgICAgICAgZmlyc3RMSW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDEzcHgpIHJvdGF0ZSg0NWRlZyknO1xuICAgICAgICBzZWNvbmRMaW5lLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC00MHB4KSc7XG4gICAgICAgIHRoaXJkTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMTNweCkgcm90YXRlKC00NWRlZyknO1xuXG4gICAgICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLWRpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuYnV0dG9uT2ZmID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdExJbmUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCkgcm90YXRlKDApJztcbiAgICAgICAgc2Vjb25kTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgwKSc7XG4gICAgICAgIHRoaXJkTGluZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSByb3RhdGUoMCknO1xuXG4gICAgICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5hZGQoJ21vZGFsLWRpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuYnV0dG9uT2ZmID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXIgLndyYXBwZXInKS5wcmVwZW5kKHRoaXMuYnVyZ2VyQm94KTtcbiAgfSxcbn07XG5cbmJ1cmdlckljb24uaW5pdCgpO1xuXG5tb2RhbFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgYnVyZ2VySWNvbi5idXJnZXJCb3guY2xpY2soKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBidXJnZXJJY29uO1xuIiwiaW1wb3J0IGdhbWVGaWVsZCBmcm9tICcuL2dhbWUtZmllbGQnO1xuaW1wb3J0IGJ1cmdlckljb24gZnJvbSAnLi9jb21wb25lbnRzL2J1cmdlci1pY29uJztcbmltcG9ydCBzdGF0aXN0aWNzIGZyb20gJy4vc3RhdGlzdGljcyc7XG5cbmNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24taXRlbScpO1xubGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGJ1cmdlckljb24uYnVyZ2VyQm94LmNsaWNrKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24taXRlbS5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgaWYgKGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpID09PSAnbWFpbicpIHtcbiAgICAgIGdhbWVGaWVsZC5zZXRUaXRsZUNhcmRzKCk7XG4gICAgfSBlbHNlIGlmIChsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSA9PT0gJ3N0YXRpc3RpY3MnKSB7XG4gICAgICBjb25zdCBzdGF0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5nbGlzaC1mb3Ita2lkcycpKTtcbiAgICAgIGNvbnN0IGRhdGFGb3JUYWJsZSA9IHN0YXRpc3RpY3Muc29ydE9iamVjdChzdGF0KTtcbiAgICAgIHN0YXRpc3RpY3MuYnVpbGRpbmdUYWJsZShkYXRhRm9yVGFibGUpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKDEpJykuaW5uZXJIVE1MID0gJyZkYXJyOyBXb3JkJztcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZUZpZWxkLnJlbW92ZUNvbnRlbnQoKTtcbiAgICAgIGdhbWVGaWVsZC5zZXRDb250ZW50Q2FyZHMobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtYmVyJykpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUnKTtcbnRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBnYW1lRmllbGQuc2V0VGl0bGVDYXJkcygpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW0uYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWl0ZW06Zmlyc3QtY2hpbGQnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn0pO1xuIiwiaW1wb3J0ICcuL2dhbWUtZmllbGQnO1xuaW1wb3J0ICcuL3N0YXRpc3RpY3MnO1xuaW1wb3J0ICcuL2NvbXBvbmVudHMvc3dpdGNoJztcbmltcG9ydCAnLi9jb21wb25lbnRzL2J1cmdlci1pY29uJztcbmltcG9ydCAnLi9idXJnZXItbWVudSc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGZldGNoKCcuL2Fzc2V0cy9qc29uL2NhcmRzLmpzb24nKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5qc29uKCkpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc3QgaW1hZ2VzID0gcmVzdWx0LmZsYXQoKS5tYXAoKGl0ZW0pID0+IGl0ZW0uaW1hZ2UpO1xuXG4gICAgICBmdW5jdGlvbiBwcmVsb2FkSW1hZ2VzKGFycikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgaW1hZ2Uuc3JjID0gYC4vJHthcnJbaV19YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJlbG9hZEltYWdlcyhpbWFnZXMpO1xuICAgIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9